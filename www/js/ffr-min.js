var g;function aa(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function w(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return b?b.call(a):{next:aa(a)}}function ca(a){if(!(a instanceof Array)){a=w(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}var da="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},ea;
if("function"==typeof Object.setPrototypeOf)ea=Object.setPrototypeOf;else{var fa;a:{var ha={a:!0},ia={};try{ia.__proto__=ha;fa=ia.a;break a}catch(a){}fa=!1}ea=fa?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var ja=ea;
function ka(a,b){a.prototype=da(b.prototype);a.prototype.constructor=a;if(ja)ja(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.m=b.prototype}var la="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,ma="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};
function na(a,b){if(b){var c=la;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ma(c,a,{configurable:!0,writable:!0,value:b})}}
na("Promise",function(a){function b(a){this.h=0;this.i=void 0;this.f=[];var b=this.l();try{a(b.resolve,b.reject)}catch(l){b.reject(l)}}function c(){this.f=null}function d(a){return a instanceof b?a:new b(function(b){b(a)})}if(a)return a;c.prototype.h=function(a){if(null==this.f){this.f=[];var b=this;this.i(function(){b.A()})}this.f.push(a)};var e=la.setTimeout;c.prototype.i=function(a){e(a,0)};c.prototype.A=function(){for(;this.f&&this.f.length;){var a=this.f;this.f=[];for(var b=0;b<a.length;++b){var c=
a[b];a[b]=null;try{c()}catch(m){this.l(m)}}}this.f=null};c.prototype.l=function(a){this.i(function(){throw a;})};b.prototype.l=function(){function a(a){return function(d){c||(c=!0,a.call(b,d))}}var b=this,c=!1;return{resolve:a(this.D),reject:a(this.A)}};b.prototype.D=function(a){if(a===this)this.A(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof b)this.fb(a);else{a:switch(typeof a){case "object":var c=null!=a;break a;case "function":c=!0;break a;default:c=!1}c?this.Xa(a):
this.C(a)}};b.prototype.Xa=function(a){var b=void 0;try{b=a.then}catch(l){this.A(l);return}"function"==typeof b?this.ua(b,a):this.C(a)};b.prototype.A=function(a){this.u(2,a)};b.prototype.C=function(a){this.u(1,a)};b.prototype.u=function(a,b){if(0!=this.h)throw Error("Cannot settle("+a+", "+b+"): Promise already settled in state"+this.h);this.h=a;this.i=b;this.B()};b.prototype.B=function(){if(null!=this.f){for(var a=0;a<this.f.length;++a)f.h(this.f[a]);this.f=null}};var f=new c;b.prototype.fb=function(a){var b=
this.l();a.kd(b.resolve,b.reject)};b.prototype.ua=function(a,b){var c=this.l();try{a.call(b,c.resolve,c.reject)}catch(m){c.reject(m)}};b.prototype.then=function(a,c){function d(a,b){return"function"==typeof a?function(b){try{e(a(b))}catch(B){f(B)}}:b}var e,f,k=new b(function(a,b){e=a;f=b});this.kd(d(a,e),d(c,f));return k};b.prototype.catch=function(a){return this.then(void 0,a)};b.prototype.kd=function(a,b){function c(){switch(d.h){case 1:a(d.i);break;case 2:b(d.i);break;default:throw Error("Unexpected state: "+
d.h);}}var d=this;null==this.f?f.h(c):this.f.push(c)};b.resolve=d;b.reject=function(a){return new b(function(b,c){c(a)})};b.race=function(a){return new b(function(b,c){for(var e=w(a),f=e.next();!f.done;f=e.next())d(f.value).kd(b,c)})};b.all=function(a){var c=w(a),e=c.next();return e.done?d([]):new b(function(a,b){function f(b){return function(c){k[b]=c;h--;0==h&&a(k)}}var k=[],h=0;do k.push(void 0),h++,d(e.value).kd(f(k.length-1),b),e=c.next();while(!e.done)})};return b});
function oa(){oa=function(){};la.Symbol||(la.Symbol=qa)}function ra(a,b){this.f=a;ma(this,"description",{configurable:!0,writable:!0,value:b})}ra.prototype.toString=function(){return this.f};var qa=function(){function a(c){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new ra("jscomp_symbol_"+(c||"")+"_"+b++,c)}var b=0;return a}();
function sa(){oa();var a=la.Symbol.iterator;a||(a=la.Symbol.iterator=la.Symbol("Symbol.iterator"));"function"!=typeof Array.prototype[a]&&ma(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return ta(aa(this))}});sa=function(){}}function ta(a){sa();a={next:a};a[la.Symbol.iterator]=function(){return this};return a}function ua(){this.A=!1;this.i=null;this.h=void 0;this.f=1;this.u=0;this.l=null}function va(a){if(a.A)throw new TypeError("Generator is already running");a.A=!0}
ua.prototype.C=function(a){this.h=a};function wa(a,b){a.l={eg:b,Lg:!0};a.f=a.u}ua.prototype.return=function(a){this.l={return:a};this.f=this.u};function z(a,b,c){a.f=c;return{value:b}}function xa(a){this.f=new ua;this.h=a}function ya(a,b){va(a.f);var c=a.f.i;if(c)return za(a,"return"in c?c["return"]:function(a){return{value:a,done:!0}},b,a.f.return);a.f.return(b);return Aa(a)}
function za(a,b,c,d){try{var e=b.call(a.f.i,c);if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object");if(!e.done)return a.f.A=!1,e;var f=e.value}catch(h){return a.f.i=null,wa(a.f,h),Aa(a)}a.f.i=null;d.call(a.f,f);return Aa(a)}function Aa(a){for(;a.f.f;)try{var b=a.h(a.f);if(b)return a.f.A=!1,{value:b.value,done:!1}}catch(c){a.f.h=void 0,wa(a.f,c)}a.f.A=!1;if(a.f.l){b=a.f.l;a.f.l=null;if(b.Lg)throw b.eg;return{value:b.return,done:!0}}return{value:void 0,done:!0}}
function Ba(a){this.next=function(b){va(a.f);a.f.i?b=za(a,a.f.i.next,b,a.f.C):(a.f.C(b),b=Aa(a));return b};this.throw=function(b){va(a.f);a.f.i?b=za(a,a.f.i["throw"],b,a.f.C):(wa(a.f,b),b=Aa(a));return b};this.return=function(b){return ya(a,b)};sa();this[Symbol.iterator]=function(){return this}}function Ca(a){function b(b){return a.next(b)}function c(b){return a.throw(b)}return new Promise(function(d,e){function f(a){a.done?d(a.value):Promise.resolve(a.value).then(b,c).then(f,e)}f(a.next())})}
function Ea(a){return Ca(new Ba(new xa(a)))}function Fa(a,b){sa();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d}na("Array.prototype.keys",function(a){return a?a:function(){return Fa(this,function(a){return a})}});function Ga(a,b){return Object.prototype.hasOwnProperty.call(a,b)}
na("WeakMap",function(a){function b(a){this.f=(h+=Math.random()+1).toString();if(a){a=w(a);for(var b;!(b=a.next()).done;)b=b.value,this.set(b[0],b[1])}}function c(){}function d(a){Ga(a,f)||ma(a,f,{value:new c})}function e(a){var b=Object[a];b&&(Object[a]=function(a){if(a instanceof c)return a;d(a);return b(a)})}if(function(){if(!a||!Object.seal)return!1;try{var b=Object.seal({}),c=Object.seal({}),d=new a([[b,2],[c,3]]);if(2!=d.get(b)||3!=d.get(c))return!1;d.delete(b);d.set(c,4);return!d.has(b)&&4==
d.get(c)}catch(p){return!1}}())return a;var f="$jscomp_hidden_"+Math.random();e("freeze");e("preventExtensions");e("seal");var h=0;b.prototype.set=function(a,b){d(a);if(!Ga(a,f))throw Error("WeakMap key fail: "+a);a[f][this.f]=b;return this};b.prototype.get=function(a){return Ga(a,f)?a[f][this.f]:void 0};b.prototype.has=function(a){return Ga(a,f)&&Ga(a[f],this.f)};b.prototype.delete=function(a){return Ga(a,f)&&Ga(a[f],this.f)?delete a[f][this.f]:!1};return b});
na("Map",function(a){function b(){var a={};return a.Jb=a.next=a.head=a}function c(a,b){var c=a.f;return ta(function(){if(c){for(;c.head!=a.f;)c=c.Jb;for(;c.next!=c.head;)return c=c.next,{done:!1,value:b(c)};c=null}return{done:!0,value:void 0}})}function d(a,b){var c=b&&typeof b;"object"==c||"function"==c?f.has(b)?c=f.get(b):(c=""+ ++h,f.set(b,c)):c="p_"+b;var d=a.h[c];if(d&&Ga(a.h,c))for(a=0;a<d.length;a++){var e=d[a];if(b!==b&&e.key!==e.key||b===e.key)return{id:c,list:d,index:a,Ka:e}}return{id:c,
list:d,index:-1,Ka:void 0}}function e(a){this.h={};this.f=b();this.size=0;if(a){a=w(a);for(var c;!(c=a.next()).done;)c=c.value,this.set(c[0],c[1])}}if(function(){if(!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),c=new a(w([[b,"s"]]));if("s"!=c.get(b)||1!=c.size||c.get({x:4})||c.set({x:4},"t")!=c||2!=c.size)return!1;var d=c.entries(),e=d.next();if(e.done||e.value[0]!=b||"s"!=e.value[1])return!1;e=d.next();return e.done||4!=e.value[0].x||
"t"!=e.value[1]||!d.next().done?!1:!0}catch(r){return!1}}())return a;sa();var f=new WeakMap;e.prototype.set=function(a,b){a=0===a?0:a;var c=d(this,a);c.list||(c.list=this.h[c.id]=[]);c.Ka?c.Ka.value=b:(c.Ka={next:this.f,Jb:this.f.Jb,head:this.f,key:a,value:b},c.list.push(c.Ka),this.f.Jb.next=c.Ka,this.f.Jb=c.Ka,this.size++);return this};e.prototype.delete=function(a){a=d(this,a);return a.Ka&&a.list?(a.list.splice(a.index,1),a.list.length||delete this.h[a.id],a.Ka.Jb.next=a.Ka.next,a.Ka.next.Jb=a.Ka.Jb,
a.Ka.head=null,this.size--,!0):!1};e.prototype.clear=function(){this.h={};this.f=this.f.Jb=b();this.size=0};e.prototype.has=function(a){return!!d(this,a).Ka};e.prototype.get=function(a){return(a=d(this,a).Ka)&&a.value};e.prototype.entries=function(){return c(this,function(a){return[a.key,a.value]})};e.prototype.keys=function(){return c(this,function(a){return a.key})};e.prototype.values=function(){return c(this,function(a){return a.value})};e.prototype.forEach=function(a,b){for(var c=this.entries(),
d;!(d=c.next()).done;)d=d.value,a.call(b,d[1],d[0],this)};e.prototype[Symbol.iterator]=e.prototype.entries;var h=0;return e});function Ha(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{Af:e,Rf:f}}return{Af:-1,Rf:void 0}}na("Array.prototype.findIndex",function(a){return a?a:function(a,c){return Ha(this,a,c).Af}});
function Ia(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""}na("Array.prototype.find",function(a){return a?a:function(a,c){return Ha(this,a,c).Rf}});
na("String.prototype.endsWith",function(a){return a?a:function(a,c){var b=Ia(this,a,"endsWith");void 0===c&&(c=b.length);c=Math.max(0,Math.min(c|0,b.length));for(var e=a.length;0<e&&0<c;)if(b[--c]!=a[--e])return!1;return 0>=e}});na("String.prototype.startsWith",function(a){return a?a:function(a,c){var b=Ia(this,a,"startsWith"),e=b.length,f=a.length;c=Math.max(0,Math.min(c|0,b.length));for(var h=0;h<f&&c<e;)if(b[c++]!=a[h++])return!1;return h>=f}});
var Ja="function"==typeof Object.assign?Object.assign:function(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c];if(d)for(var e in d)Ga(d,e)&&(a[e]=d[e])}return a};na("Object.assign",function(a){return a||Ja});
na("Set",function(a){function b(a){this.f=new Map;if(a){a=w(a);for(var b;!(b=a.next()).done;)this.add(b.value)}this.size=this.f.size}if(function(){if(!a||"function"!=typeof a||!a.prototype.entries||"function"!=typeof Object.seal)return!1;try{var b=Object.seal({x:4}),d=new a(w([b]));if(!d.has(b)||1!=d.size||d.add(b)!=d||1!=d.size||d.add({x:4})!=d||2!=d.size)return!1;var e=d.entries(),f=e.next();if(f.done||f.value[0]!=b||f.value[1]!=b)return!1;f=e.next();return f.done||f.value[0]==b||4!=f.value[0].x||
f.value[1]!=f.value[0]?!1:e.next().done}catch(h){return!1}}())return a;sa();b.prototype.add=function(a){a=0===a?0:a;this.f.set(a,a);this.size=this.f.size;return this};b.prototype.delete=function(a){a=this.f.delete(a);this.size=this.f.size;return a};b.prototype.clear=function(){this.f.clear();this.size=0};b.prototype.has=function(a){return this.f.has(a)};b.prototype.entries=function(){return this.f.entries()};b.prototype.values=function(){return this.f.values()};b.prototype.keys=b.prototype.values;
b.prototype[Symbol.iterator]=b.prototype.values;b.prototype.forEach=function(a,b){var c=this;this.f.forEach(function(d){return a.call(b,d,d,c)})};return b});na("Object.is",function(a){return a?a:function(a,c){return a===c?0!==a||1/a===1/c:a!==a&&c!==c}});na("Array.prototype.includes",function(a){return a?a:function(a,c){var b=this;b instanceof String&&(b=String(b));var e=b.length;c=c||0;for(0>c&&(c=Math.max(c+e,0));c<e;c++){var f=b[c];if(f===a||Object.is(f,a))return!0}return!1}});
na("String.prototype.includes",function(a){return a?a:function(a,c){return-1!==Ia(this,a,"includes").indexOf(a,c||0)}});na("Math.sign",function(a){return a?a:function(a){a=Number(a);return 0===a||isNaN(a)?a:0<a?1:-1}});var A=this;function Ka(a){return void 0!==a}function La(a){return"string"==typeof a}function Ma(a){return"number"==typeof a}function Na(){}function Oa(a){a.ze=void 0;a.ia=function(){return a.ze?a.ze:a.ze=new a}}
function Pa(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function Qa(a){return"array"==Pa(a)}function Ta(a){var b=Pa(a);return"array"==b||"object"==b&&"number"==typeof a.length}function Ua(a){return"function"==Pa(a)}function Va(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function Wa(a){return a[Xa]||(a[Xa]=++Ya)}var Xa="closure_uid_"+(1E9*Math.random()>>>0),Ya=0;function Za(a,b,c){return a.call.apply(a.bind,arguments)}
function $a(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function ab(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ab=Za:ab=$a;return ab.apply(null,arguments)}
function bb(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}var cb=Date.now||function(){return+new Date};function C(a,b){function c(){}c.prototype=b.prototype;a.m=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.gi=function(a,c,f){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}};function V5TrackballControl(a,b){function c(a){!1!==n.enabled&&(window.removeEventListener("keydown",c),F=v,-1===v&&(a.keyCode!==n.keys[1]||n.noRotate?a.keyCode!==n.keys[2]||n.rc?a.keyCode!==n.keys[0]||n.qc||(v=0):v=2:v=1))}function d(){!1!==n.enabled&&(v=F,window.addEventListener("keydown",c,!1))}function e(a){!1!==n.enabled&&-1!==v&&(v=n.mf,1===v?n.noRotate=!1:2===v?n.rc=!1:0===v?n.qc=!1:99===v&&(n.Uc=!1),1!==v||n.noRotate?2!==v||n.rc?0!==v||n.qc?99!==v||n.Uc||(Ra.copy(pa(a.pageX,a.pageY)),Sa.copy(Ra)):
(I.copy(pa(a.pageX,a.pageY)),ba.copy(I)):(K.copy(pa(a.pageX,a.pageY)),S.copy(K)):(u.copy(Bd(a.pageX,a.pageY)),y.copy(u)),document.addEventListener("mousemove",f,!1),document.addEventListener("mouseup",h,!1),n.dispatchEvent(vb))}function f(a){!1!==n.enabled&&(a.preventDefault(),a.stopPropagation(),1!==v||n.noRotate?2!==v||n.rc?0!==v||n.qc?99!==v||n.Uc||Sa.copy(pa(a.pageX,a.pageY)):ba.copy(pa(a.pageX,a.pageY)):S.copy(pa(a.pageX,a.pageY)):(y.copy(u),u.copy(Bd(a.pageX,a.pageY))))}function h(a){!1!==n.enabled&&
(a.preventDefault(),a.stopPropagation(),v=-1,n.rc=!0,n.qc=!0,n.noRotate=!0,n.Uc=!0,document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",h),n.dispatchEvent(hb))}function k(a){!1!==n.enabled&&1==v&&(a.preventDefault(),a.stopPropagation(),n.dispatchEvent({type:"OnScroll",delta:.01*a.deltaY}),n.dispatchEvent(vb),n.dispatchEvent(hb))}function l(a){if(!1!==n.enabled){switch(a.touches.length){case 1:v=4;break;case 2:v=5;var b=a.touches[0].pageX-a.touches[1].pageX,c=a.touches[0].pageY-
a.touches[1].pageY;W=O=Math.sqrt(b*b+c*c);I.copy(pa((a.touches[0].pageX+a.touches[1].pageX)/2,(a.touches[0].pageY+a.touches[1].pageY)/2));ba.copy(I);break;default:v=-1}n.dispatchEvent(vb)}}function m(a){if(!1!==n.enabled)switch(a.preventDefault(),a.stopPropagation(),a.touches.length){case 1:break;case 2:var b=a.touches[0].pageX-a.touches[1].pageX,c=a.touches[0].pageY-a.touches[1].pageY;W=Math.sqrt(b*b+c*c);ba.copy(pa((a.touches[0].pageX+a.touches[1].pageX)/2,(a.touches[0].pageY+a.touches[1].pageY)/
2));break;default:v=-1}}function p(a){if(!1!==n.enabled){switch(a.touches.length){case 2:O=W=0,ba.copy(pa((a.touches[0].pageX+a.touches[1].pageX)/2,(a.touches[0].pageY+a.touches[1].pageY)/2)),I.copy(ba)}v=-1;n.dispatchEvent(hb)}}function r(a){a.preventDefault()}var q=THREE.EventDispatcher.call(this)||this;var t=window.THREE,n=q;q.object=a;q.domElement=void 0!==b?b:document;q.bg=0;q.enabled=!0;q.screen={left:0,top:0,width:0,height:0};q.radius=0;q.zoomSpeed=1.2;q.noRotate=!0;q.rc=!0;q.qc=!0;q.Uc=!0;
q.mf=-1;q.staticMoving=!1;q.dynamicDampingFactor=.2;q.keys=[65,83,68];q.target=new t.Vector3;var B=!0,v=-1,F=-1,x=new t.Vector3,y=new t.Vector2,u=new t.Vector2,K=new t.Vector2,S=new t.Vector2,O=0,W=0,I=new t.Vector2,ba=new t.Vector2,Ra=new t.Vector2,Sa=new t.Vector2;q.qh=q.target.clone();q.jh=q.object.position.clone();q.th=q.object.up.clone();q.Cf=q.object.left;q.Lf=q.object.right;q.Qf=q.object.top;q.bf=q.object.bottom;var Da={type:"change"},vb={type:"start"},hb={type:"end"};q.handleResize=function(){if(this.domElement===
document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{var a=this.domElement.getBoundingClientRect(),b=this.domElement.ownerDocument.documentElement;this.screen.left=a.left+window.pageXOffset-b.clientLeft;this.screen.top=a.top+window.pageYOffset-b.clientTop;this.screen.width=a.width;this.screen.height=a.height}this.radius=.5*Math.min(this.screen.width,this.screen.height);this.Cf=this.object.left;this.Lf=this.object.right;this.Qf=
this.object.top;this.bf=this.object.bottom};q.handleEvent=function(a){if("function"==typeof this[a.type])this[a.type](a)};var pa=function(){var a=new t.Vector2;return function(b,c){a.set((b-n.screen.left)/n.screen.width,(c-n.screen.top)/n.screen.height);return a}}(),Bd=function(){var a=new t.Vector2;return function(b,c){a.set((b-.5*n.screen.width-n.screen.left)/(.5*n.screen.width),(n.screen.height+2*(n.screen.top-c))/n.screen.width);return a}}();q.mh=function(){n.bg++;0!==u.y-y.y&&y.copy(u)};q.zh=
function(){if(5===v){var a=W/O;O=W;n.object.zoom*=a;B=!0}else a=1+(S.y-K.y)*n.zoomSpeed,1E-6<Math.abs(a-1)&&0<a&&(n.object.zoom/=a,n.staticMoving?K.copy(S):K.y+=(S.y-K.y)*this.dynamicDampingFactor,B=!0)};q.ih=function(){var a=new t.Vector2,b=new t.Vector3,c=new t.Vector3;return function(){a.copy(ba).sub(I);if(a.lengthSq()){var d=(n.object.top-n.object.bottom)/n.object.zoom;a.x*=(n.object.right-n.object.left)/n.object.zoom;a.y*=d;c.copy(x).cross(n.object.up).setLength(a.x);c.add(b.copy(n.object.up).setLength(a.y));
n.object.position.add(c);n.target.add(c);n.staticMoving?I.copy(ba):I.add(a.subVectors(ba,I).multiplyScalar(n.dynamicDampingFactor));B=!0}}}();q.uh=function(){x.subVectors(n.object.position,n.target);n.noRotate||n.mh();n.rc||(n.zh(),B&&n.object.updateProjectionMatrix());n.qc||n.ih();n.Uc||Ra.copy(Sa);n.object.position.addVectors(n.target,x);n.object.lookAt(n.target);B&&(n.dispatchEvent(Da),B=!1)};q.reset=function(){F=v=-1;n.target.copy(n.qh);n.object.position.copy(n.jh);n.object.up.copy(n.th);x.subVectors(n.object.position,
n.target);n.object.left=n.Cf;n.object.right=n.Lf;n.object.top=n.Qf;n.object.bottom=n.bf;n.object.lookAt(n.target);n.dispatchEvent(Da);B=!1};q.Na=function(a){v=F=n.mf=a};q.ii=function(){};q.dispose=function(){this.domElement.removeEventListener("contextmenu",r,!1);this.domElement.removeEventListener("mousedown",e,!1);this.domElement.removeEventListener("wheel",k,!1);this.domElement.removeEventListener("touchstart",l,!1);this.domElement.removeEventListener("touchend",p,!1);this.domElement.removeEventListener("touchmove",
m,!1);window.removeEventListener("keydown",c,!1);window.removeEventListener("keyup",d,!1)};q.domElement.addEventListener("contextmenu",r,!1);q.domElement.addEventListener("mousedown",e,!1);q.domElement.addEventListener("wheel",k,!1);q.domElement.addEventListener("touchstart",l,!1);q.domElement.addEventListener("touchend",p,!1);q.domElement.addEventListener("touchmove",m,!1);window.addEventListener("keydown",c,!1);window.addEventListener("keyup",d,!1);q.handleResize();q.uh();return q}
ka(V5TrackballControl,THREE.EventDispatcher);new THREE.Scene;new THREE.Plane(new THREE.Vector3(0,0,0),0);new THREE.Plane(new THREE.Vector3(0,0,0),0);new THREE.Plane(new THREE.Vector3(0,0,0),0);function db(a){a=a.getBoundingClientRect();var b=document.body,c=document.documentElement;return{top:Math.round(a.top+(window.pageYOffset||c.scrollTop||b.scrollTop)-(c.clientTop||b.clientTop||0)),left:Math.round(a.left+(window.pageXOffset||c.scrollLeft||b.scrollLeft)-(c.clientLeft||b.clientLeft||0))}}
function eb(a,b){a.za=new AMI.StackHelper(b);a.za.bbox.visible=!1;a.za.borderColor=a.ph;a.za.slice.canvasWidth=a.domElement.clientWidth;a.za.slice.canvasHeight=a.domElement.clientHeight;var c=b.worldBoundingBox();c=new THREE.Vector3((c[1]-c[0])/2,(c[3]-c[2])/2,(c[5]-c[4])/2);c={center:b.worldCenter().clone(),halfDimensions:new THREE.Vector3(c.x+10,c.y+10,c.z+10)};var d={width:a.domElement.clientWidth,height:a.domElement.clientHeight};a.F.directions=[b.xCosine,b.yCosine,b.zCosine];a.F.box=c;a.F.canvas=
d;a.F.orientation=a.Vd;a.F.update();a.F.fitBox(2,1);a.za.orientation=a.F.stackOrientation;a.za.index=Math.floor(a.za.orientationMaxIndex/2);a.J.add(a.za)}function fb(a){return"#"==a.substring(0,1)?document.querySelectorAll(a):document.getElementById(a)};function gb(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function ib(){var a=jb,b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function kb(){var a=lb,b;for(b in a)return!1;return!0}function mb(a,b,c){if(null!==a&&b in a)throw Error('The object already contains the key "'+b+'"');a[b]=c}function nb(a){var b={},c;for(c in a)b[a[c]]=c;return b}var ob="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function pb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<ob.length;f++)c=ob[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}function qb(a){var b=arguments.length;if(1==b&&Qa(arguments[0]))return qb.apply(null,arguments[0]);if(b%2)throw Error("Uneven number of arguments");for(var c={},d=0;d<b;d+=2)c[arguments[d]]=arguments[d+1];return c};function rb(a){if(Error.captureStackTrace)Error.captureStackTrace(this,rb);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}C(rb,Error);rb.prototype.name="CustomError";var sb;function tb(a,b){a=a.split("%s");for(var c="",d=a.length-1,e=0;e<d;e++)c+=a[e]+(e<b.length?b[e]:"%s");rb.call(this,c+a[d])}C(tb,rb);tb.prototype.name="AssertionError";function ub(a,b){throw new tb("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};var wb=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if(La(a))return La(b)&&1==b.length?a.indexOf(b,0):-1;for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},xb=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=La(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},yb=Array.prototype.filter?function(a,b){return Array.prototype.filter.call(a,b,void 0)}:function(a,
b){for(var c=a.length,d=[],e=0,f=La(a)?a.split(""):a,h=0;h<c;h++)if(h in f){var k=f[h];b.call(void 0,k,h,a)&&(d[e++]=k)}return d},zb=Array.prototype.map?function(a,b){return Array.prototype.map.call(a,b,void 0)}:function(a,b){for(var c=a.length,d=Array(c),e=La(a)?a.split(""):a,f=0;f<c;f++)f in e&&(d[f]=b.call(void 0,e[f],f,a));return d},Ab=Array.prototype.every?function(a,b){return Array.prototype.every.call(a,b,void 0)}:function(a,b){for(var c=a.length,d=La(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&
!b.call(void 0,d[e],e,a))return!1;return!0};function Bb(a,b){return 0<=wb(a,b)}function Cb(a,b){b=wb(a,b);var c;(c=0<=b)&&Array.prototype.splice.call(a,b,1);return c}function Db(a){return Array.prototype.concat.apply([],arguments)}function Eb(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}function Fb(a,b,c,d){Array.prototype.splice.apply(a,Gb(arguments,1))}
function Gb(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)};function Hb(a){return a.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")}var Ib=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};
function Jb(a){if(!Kb.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(Lb,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(Mb,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(Nb,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(Ob,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(Pb,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(Qb,"&#0;"));return a}var Lb=/&/g,Mb=/</g,Nb=/>/g,Ob=/"/g,Pb=/'/g,Qb=/\x00/g,Kb=/[\x00&<>"']/;
function Rb(a,b){var c=0;a=Ib(String(a)).split(".");b=Ib(String(b)).split(".");for(var d=Math.max(a.length,b.length),e=0;0==c&&e<d;e++){var f=a[e]||"",h=b[e]||"";do{f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""];h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""];if(0==f[0].length&&0==h[0].length)break;c=Sb(0==f[1].length?0:parseInt(f[1],10),0==h[1].length?0:parseInt(h[1],10))||Sb(0==f[2].length,0==h[2].length)||Sb(f[2],h[2]);f=f[3];h=h[3]}while(0==c)}return c}function Sb(a,b){return a<b?-1:a>b?1:0}
function Tb(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})}function Ub(a){var b=La(void 0)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"):"\\s";return a.replace(new RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,e){return b+e.toUpperCase()})};var Vb;a:{var Wb=A.navigator;if(Wb){var Xb=Wb.userAgent;if(Xb){Vb=Xb;break a}}Vb=""}function D(a){return-1!=Vb.indexOf(a)};function Yb(){return D("Firefox")||D("FxiOS")}function Zb(){return(D("Chrome")||D("CriOS"))&&!D("Edge")};function $b(){return D("iPhone")&&!D("iPod")&&!D("iPad")}function ac(){return $b()||D("iPad")||D("iPod")};function bc(a){bc[" "](a);return a}bc[" "]=Na;function cc(a,b){try{return bc(a[b]),!0}catch(c){}return!1}function dc(a,b){var c=ec;return Object.prototype.hasOwnProperty.call(c,a)?c[a]:c[a]=b(a)};var fc=D("Opera"),E=D("Trident")||D("MSIE"),gc=D("Edge"),hc=gc||E,ic=D("Gecko")&&!(-1!=Vb.toLowerCase().indexOf("webkit")&&!D("Edge"))&&!(D("Trident")||D("MSIE"))&&!D("Edge"),jc=-1!=Vb.toLowerCase().indexOf("webkit")&&!D("Edge"),kc=D("Macintosh"),lc=D("Windows"),mc=D("Linux")||D("CrOS"),nc=D("Android"),oc=$b(),pc=D("iPad"),qc=D("iPod"),rc=ac();function sc(){var a=A.document;return a?a.documentMode:void 0}var tc;
a:{var uc="",vc=function(){var a=Vb;if(ic)return/rv:([^\);]+)(\)|;)/.exec(a);if(gc)return/Edge\/([\d\.]+)/.exec(a);if(E)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(jc)return/WebKit\/(\S+)/.exec(a);if(fc)return/(?:Version)[ \/]?(\S+)/.exec(a)}();vc&&(uc=vc?vc[1]:"");if(E){var wc=sc();if(null!=wc&&wc>parseFloat(uc)){tc=String(wc);break a}}tc=uc}var ec={};function G(a){return dc(a,function(){return 0<=Rb(tc,a)})}function xc(a){return Number(yc)>=a}var zc;var Ac=A.document;
zc=Ac&&E?sc()||("CSS1Compat"==Ac.compatMode?parseInt(tc,10):5):void 0;var yc=zc;var Bc=!E||xc(9),Cc=!ic&&!E||E&&xc(9)||ic&&G("1.9.1"),Dc=E&&!G("9");function Ec(){return null};function Fc(a,b){this.f=a===Gc&&b||"";this.h=Hc}Fc.prototype.cc=!0;Fc.prototype.Nb=function(){return this.f};Fc.prototype.toString=function(){return"Const{"+this.f+"}"};function Ic(a){if(a instanceof Fc&&a.constructor===Fc&&a.h===Hc)return a.f;ub("expected object of type Const, got '"+a+"'");return"type_error:Const"}var Hc={},Gc={};function Jc(){this.f="";this.h=Kc}Jc.prototype.cc=!0;Jc.prototype.Nb=function(){return this.f};Jc.prototype.toString=function(){return"TrustedResourceUrl{"+this.f+"}"};function Lc(a){if(a instanceof Jc&&a.constructor===Jc&&a.h===Kc)return a.f;ub("expected object of type TrustedResourceUrl, got '"+a+"' of type "+Pa(a));return"type_error:TrustedResourceUrl"}var Kc={};function Mc(a){var b=new Jc;b.f=a;return b};function Nc(){this.f="";this.h=Oc}Nc.prototype.cc=!0;Nc.prototype.Nb=function(){return this.f};Nc.prototype.toString=function(){return"SafeUrl{"+this.f+"}"};var Pc=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Qc(a){if(a instanceof Nc)return a;a="object"==typeof a&&a.cc?a.Nb():String(a);Pc.test(a)||(a="about:invalid#zClosurez");return Rc(a)}var Oc={};function Rc(a){var b=new Nc;b.f=a;return b}Rc("about:blank");function Sc(){this.f="";this.h=Tc}Sc.prototype.cc=!0;var Tc={};Sc.prototype.Nb=function(){return this.f};Sc.prototype.toString=function(){return"SafeStyle{"+this.f+"}"};function Uc(a){var b=new Sc;b.f=a;return b}var Vc=Uc("");
function Wc(a){a instanceof Nc?(a instanceof Nc&&a.constructor===Nc&&a.h===Oc?a=a.f:(ub("expected object of type SafeUrl, got '"+a+"' of type "+Pa(a)),a="type_error:SafeUrl"),a='url("'+a.replace(/</g,"%3c").replace(/[\\"]/g,"\\$&")+'")'):a=a instanceof Fc?Ic(a):Xc(String(a));return a}
function Xc(a){var b=a.replace(Yc,"$1").replace(Yc,"$1").replace(Zc,"url");if($c.test(b)){if(ad.test(a))return ub("String value disallows comments, got: "+a),"zClosurez";for(var c=b=!0,d=0;d<a.length;d++){var e=a.charAt(d);"'"==e&&c?b=!b:'"'==e&&b&&(c=!c)}if(!b||!c)return ub("String value requires balanced quotes, got: "+a),"zClosurez";if(!bd(a))return ub("String value requires balanced square brackets and one identifier per pair of brackets, got: "+a),"zClosurez"}else return ub("String value allows only "+
cd+" and simple functions, got: "+a),"zClosurez";return dd(a)}function bd(a){for(var b=!0,c=/^[-_a-zA-Z0-9]$/,d=0;d<a.length;d++){var e=a.charAt(d);if("]"==e){if(b)return!1;b=!0}else if("["==e){if(!b)return!1;b=!1}else if(!b&&!c.test(e))return!1}return b}
var cd="[-,.\"'%_!# a-zA-Z0-9\\[\\]]",$c=new RegExp("^"+cd+"+$"),Zc=/\b(url\([ \t\n]*)('[ -&(-\[\]-~]*'|"[ !#-\[\]-~]*"|[!#-&*-\[\]-~]*)([ \t\n]*\))/g,Yc=/\b(hsl|hsla|rgb|rgba|matrix|calc|minmax|fit-content|repeat|(rotate|scale|translate)(X|Y|Z|3d)?)\([-+*/0-9a-z.%\[\], ]+\)/g,ad=/\/\*/;function dd(a){return a.replace(Zc,function(a,c,d,e){var b="";d=d.replace(/^(['"])(.*)\1$/,function(a,c,d){b=c;return d});a=Qc(d).Nb();return c+b+a+b+e})};function ed(){this.f="";this.h=fd}ed.prototype.cc=!0;var fd={};
function gd(){var a={display:"none"},b=".hidden".replace(/('|")((?!\1)[^\r\n\f\\]|\\[\s\S])*\1/g,"");if(!/^[-_a-zA-Z0-9#.:* ,>+~[\]()=^$|]+$/.test(b))throw Error("Selector allows only [-_a-zA-Z0-9#.:* ,>+~[\\]()=^$|] and strings, got: .hidden");a:{for(var c={"(":")","[":"]"},d=[],e=0;e<b.length;e++){var f=b[e];if(c[f])d.push(c[f]);else{b:{var h=void 0;for(h in c)if(c[h]==f){h=!0;break b}h=!1}if(h&&d.pop()!=f){b=!1;break a}}}b=0==d.length}if(!b)throw Error("() and [] in selector must be balanced, got: .hidden");if(!(a instanceof
Sc)){b="";for(var k in a){if(!/^[-_a-zA-Z0-9]+$/.test(k))throw Error("Name allows only [-_a-zA-Z0-9], got: "+k);c=a[k];null!=c&&(c=Qa(c)?zb(c,Wc).join(" "):Wc(c),b+=k+":"+c+";")}a=b?Uc(b):Vc}a instanceof Sc&&a.constructor===Sc&&a.h===Tc?k=a.f:(ub("expected object of type SafeStyle, got '"+a+"' of type "+Pa(a)),k="type_error:SafeStyle");return hd(".hidden{"+k+"}")}ed.prototype.Nb=function(){return this.f};ed.prototype.toString=function(){return"SafeStyleSheet{"+this.f+"}"};
function hd(a){var b=new ed;b.f=a;return b}hd("");function id(){this.f="";this.h=jd}id.prototype.cc=!0;id.prototype.Nb=function(){return this.f};id.prototype.toString=function(){return"SafeHtml{"+this.f+"}"};var jd={};function kd(a){var b=new id;b.f=a;return b}kd("<!DOCTYPE html>");var ld=kd("");kd("<br>");var md={MATH:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},nd=function(a){var b=!1,c;return function(){b||(c=a(),b=!0);return c}}(function(){if("undefined"===typeof document)return!1;var a=document.createElement("div");a.innerHTML="<div><div></div></div>";if(!a.firstChild)return!1;var b=a.firstChild.firstChild;a.innerHTML="";return!b.parentElement});
function od(a,b){if(md[a.tagName.toUpperCase()])throw Error("goog.dom.safe.setInnerHtml cannot be used to set content of "+a.tagName+".");b instanceof id&&b.constructor===id&&b.h===jd?b=b.f:(ub("expected object of type SafeHtml, got '"+b+"' of type "+Pa(b)),b="type_error:SafeHtml");if(nd())for(;a.lastChild;)a.removeChild(a.lastChild);a.innerHTML=b};function pd(a,b,c){return Math.min(Math.max(a,b),c)};function H(a,b){this.x=Ka(a)?a:0;this.y=Ka(b)?b:0}g=H.prototype;g.clone=function(){return new H(this.x,this.y)};g.toString=function(){return"("+this.x+", "+this.y+")"};g.equals=function(a){return a instanceof H&&qd(this,a)};function qd(a,b){return a==b?!0:a&&b?a.x==b.x&&a.y==b.y:!1}function rd(a,b){return new H(a.x-b.x,a.y-b.y)}g.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};g.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};
g.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};g.scale=function(a,b){b=Ma(b)?b:a;this.x*=a;this.y*=b;return this};function sd(a,b){this.width=a;this.height=b}g=sd.prototype;g.clone=function(){return new sd(this.width,this.height)};g.toString=function(){return"("+this.width+" x "+this.height+")"};g.area=function(){return this.width*this.height};g.aspectRatio=function(){return this.width/this.height};g.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};g.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
g.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};g.scale=function(a,b){b=Ma(b)?b:a;this.width*=a;this.height*=b;return this};function td(a){return a?new ud(vd(a)):sb||(sb=new ud)}
function wd(a,b,c,d){a=d||a;b=b&&"*"!=b?String(b).toUpperCase():"";if(a.querySelectorAll&&a.querySelector&&(b||c))return a.querySelectorAll(b+(c?"."+c:""));if(c&&a.getElementsByClassName){a=a.getElementsByClassName(c);if(b){d={};for(var e=0,f=0,h;h=a[f];f++)b==h.nodeName&&(d[e++]=h);d.length=e;return d}return a}a=a.getElementsByTagName(b||"*");if(c){d={};for(f=e=0;h=a[f];f++)b=h.className,"function"==typeof b.split&&Bb(b.split(/\s+/),c)&&(d[e++]=h);d.length=e;return d}return a}
function xd(a,b){gb(b,function(b,d){b&&"object"==typeof b&&b.cc&&(b=b.Nb());"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:yd.hasOwnProperty(d)?a.setAttribute(yd[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}
var yd={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function zd(a){a=a.document;a=Ad(a)?a.documentElement:a.body;return new sd(a.clientWidth,a.clientHeight)}
function Cd(a){var b=Dd(a);a=Ed(a);return E&&G("10")&&a.pageYOffset!=b.scrollTop?new H(b.scrollLeft,b.scrollTop):new H(a.pageXOffset||b.scrollLeft,a.pageYOffset||b.scrollTop)}function Dd(a){return a.scrollingElement?a.scrollingElement:!jc&&Ad(a)?a.documentElement:a.body||a.documentElement}function Fd(a){return a?Ed(a):window}function Ed(a){return a.parentWindow||a.defaultView}function J(a,b,c){return Gd(document,arguments)}
function Gd(a,b){var c=String(b[0]),d=b[1];if(!Bc&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',Jb(d.name),'"');if(d.type){c.push(' type="',Jb(d.type),'"');var e={};pb(e,d);delete e.type;d=e}c.push(">");c=c.join("")}c=a.createElement(c);d&&(La(d)?c.className=d:Qa(d)?c.className=d.join(" "):xd(c,d));2<b.length&&Hd(a,c,b,2);return c}
function Hd(a,b,c,d){function e(c){c&&b.appendChild(La(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var f=c[d];if(!Ta(f)||Va(f)&&0<f.nodeType)e(f);else{a:{if(f&&"number"==typeof f.length){if(Va(f)){var h="function"==typeof f.item||"string"==typeof f.item;break a}if(Ua(f)){h="function"==typeof f.item;break a}}h=!1}xb(h?Eb(f):f,e)}}}function Ad(a){return"CSS1Compat"==a.compatMode}function Id(a,b){Hd(vd(a),a,arguments,1)}function Jd(a){for(var b;b=a.firstChild;)a.removeChild(b)}
function Kd(a){return a&&a.parentNode?a.parentNode.removeChild(a):null}function Ld(a){return Cc&&void 0!=a.children?a.children:yb(a.childNodes,function(a){return 1==a.nodeType})}function Md(a){if(Ka(a.firstElementChild))a=a.firstElementChild;else for(a=a.firstChild;a&&1!=a.nodeType;)a=a.nextSibling;return a}function Nd(a){return Va(a)&&1==a.nodeType}
function Od(a,b){if(!a||!b)return!1;if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||!!(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function vd(a){return 9==a.nodeType?a:a.ownerDocument||a.document}
function Pd(a,b){if("textContent"in a)a.textContent=b;else if(3==a.nodeType)a.data=String(b);else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=String(b)}else Jd(a),a.appendChild(vd(a).createTextNode(String(b)))}function Qd(a,b,c,d){if(null!=a)for(a=a.firstChild;a;){if(b(a)&&(c.push(a),d)||Qd(a,b,c,d))return!0;a=a.nextSibling}return!1}var Rd={SCRIPT:1,STYLE:1,HEAD:1,IFRAME:1,OBJECT:1},Sd={IMG:" ",BR:"\n"};
function Td(a){if(E&&!G("9")){var b=a.getAttributeNode("tabindex");b=null!=b&&b.specified}else b=a.hasAttribute("tabindex");b&&(a=a.tabIndex,b=Ma(a)&&0<=a&&32768>a);return b}function Ud(a,b){b?a.tabIndex=0:(a.tabIndex=-1,a.removeAttribute("tabIndex"))}
function Vd(a){if(Dc&&null!==a&&"innerText"in a)a=a.innerText.replace(/(\r\n|\r|\n)/g,"\n");else{var b=[];Wd(a,b,!0);a=b.join("")}a=a.replace(/ \xAD /g," ").replace(/\xAD/g,"");a=a.replace(/\u200B/g,"");Dc||(a=a.replace(/ +/g," "));" "!=a&&(a=a.replace(/^\s*/,""));return a}function Xd(a){var b=[];Wd(a,b,!1);return b.join("")}
function Wd(a,b,c){if(!(a.nodeName in Rd))if(3==a.nodeType)c?b.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):b.push(a.nodeValue);else if(a.nodeName in Sd)b.push(Sd[a.nodeName]);else for(a=a.firstChild;a;)Wd(a,b,c),a=a.nextSibling}function ud(a){this.f=a||A.document||document}g=ud.prototype;g.j=function(a){return La(a)?this.f.getElementById(a):a};
g.pe=function(a,b){var c=(b=b||this.f)||document;if(c.getElementsByClassName)a=c.getElementsByClassName(a)[0];else{c=document;var d=b||c;a=d.querySelectorAll&&d.querySelector&&a?d.querySelector(a?"."+a:""):wd(c,"*",a,b)[0]||null}return a||null};g.M=function(a,b,c){return Gd(this.f,arguments)};g.appendChild=function(a,b){a.appendChild(b)};g.append=Id;g.qf=Kd;g.gg=Ld;g.pf=Md;g.jg=Od;g.findNode=function(a,b){var c=[];return Qd(a,b,c,!0)?c[0]:void 0};var Yd;function Zd(a,b){b?a.setAttribute("role",b):a.removeAttribute("role")}function L(a,b,c){Qa(c)&&(c=c.join(" "));var d="aria-"+b;""===c||void 0==c?(Yd||(Yd={atomic:!1,autocomplete:"none",dropeffect:"none",haspopup:!1,live:"off",multiline:!1,multiselectable:!1,orientation:"vertical",readonly:!1,relevant:"additions text",required:!1,sort:"none",busy:!1,disabled:!1,hidden:!1,invalid:"false"}),c=Yd,b in c?a.setAttribute(d,c[b]):a.removeAttribute(d)):a.setAttribute(d,c)}
function $d(a,b){a=a.getAttribute("aria-"+b);return null==a||void 0==a?"":String(a)}function ae(a,b){var c="";b&&(c=b.id);L(a,"activedescendant",c)};var be=!E||xc(9),ce=!E||xc(9),de=E&&!G("9");!jc||G("528");ic&&G("1.9b")||E&&G("8")||fc&&G("9.5")||jc&&G("528");ic&&!G("8")||E&&G("9");var ee=function(){if(!A.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{A.addEventListener("test",Na,b),A.removeEventListener("test",Na,b)}catch(c){}return a}();var fe={yc:"mousedown",zc:"mouseup",xc:"mousecancel",Th:"mousemove",Vh:"mouseover",Uh:"mouseout",Rh:"mouseenter",Sh:"mouseleave"};function he(a,b,c,d,e,f){if(jc&&!G("525"))return!0;if(kc&&e)return ie(a);if(e&&!d)return!1;if(!ic){Ma(b)&&(b=je(b));var h=17==b||18==b||kc&&91==b;if((!c||kc)&&h||kc&&16==b&&(d||f))return!1}if((jc||gc)&&d&&c)switch(a){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(E&&d&&b==a)return!1;switch(a){case 13:return ic?f||e?!1:!(c&&d):!0;case 27:return!(jc||gc||ic)}return ic&&(d||e||f)?!1:ie(a)}
function ie(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||(jc||gc)&&0==a)return!0;switch(a){case 32:case 43:case 63:case 64:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:case 163:return!0;default:return!1}}function je(a){if(ic)a=ke(a);else if(kc&&jc)switch(a){case 93:a=91}return a}
function ke(a){switch(a){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return a}};var le=Object.freeze||function(a){return a};function me(){0!=ne&&(oe[Wa(this)]=this);this.fb=this.fb;this.Xa=this.Xa}var ne=0,oe={};me.prototype.fb=!1;me.prototype.dispose=function(){if(!this.fb&&(this.fb=!0,this.G(),0!=ne)){var a=Wa(this);if(0!=ne&&this.Xa&&0<this.Xa.length)throw Error(this+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete oe[a]}};
function pe(a,b){a.fb?Ka(void 0)?b.call(void 0):b():(a.Xa||(a.Xa=[]),a.Xa.push(Ka(void 0)?ab(b,void 0):b))}me.prototype.G=function(){if(this.Xa)for(;this.Xa.length;)this.Xa.shift()()};function qe(a){a&&"function"==typeof a.dispose&&a.dispose()}function re(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];Ta(d)?re.apply(null,d):qe(d)}};function se(a,b){this.type=a;this.currentTarget=this.target=b;this.defaultPrevented=this.ec=!1;this.Jf=!0}se.prototype.stopPropagation=function(){this.ec=!0};se.prototype.preventDefault=function(){this.defaultPrevented=!0;this.Jf=!1};function te(a,b){se.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.key="";this.charCode=this.keyCode=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.state=null;this.Je=!1;this.pointerId=0;this.pointerType="";this.f=null;if(a){var c=this.type=a.type,d=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.currentTarget=
b;(b=a.relatedTarget)?ic&&(cc(b,"nodeName")||(b=null)):"mouseover"==c?b=a.fromElement:"mouseout"==c&&(b=a.toElement);this.relatedTarget=b;d?(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.offsetX=jc||void 0!==a.offsetX?a.offsetX:a.layerX,this.offsetY=jc||void 0!==a.offsetY?a.offsetY:a.layerY,this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,
this.screenX=a.screenX||0,this.screenY=a.screenY||0);this.button=a.button;this.keyCode=a.keyCode||0;this.key=a.key||"";this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Je=kc?a.metaKey:a.ctrlKey;this.pointerId=a.pointerId||0;this.pointerType=La(a.pointerType)?a.pointerType:ue[a.pointerType]||"";this.state=a.state;this.f=a;a.defaultPrevented&&this.preventDefault()}}C(te,se);
var ve=le([1,4,2]),ue=le({2:"touch",3:"pen",4:"mouse"});function we(a){return(be?0==a.f.button:"click"==a.type?!0:!!(a.f.button&ve[0]))&&!(jc&&kc&&a.ctrlKey)}te.prototype.stopPropagation=function(){te.m.stopPropagation.call(this);this.f.stopPropagation?this.f.stopPropagation():this.f.cancelBubble=!0};
te.prototype.preventDefault=function(){te.m.preventDefault.call(this);var a=this.f;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,de)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var xe="closure_listenable_"+(1E6*Math.random()|0);function ye(a){return!(!a||!a[xe])}var ze=0;function Ae(a,b,c,d,e){this.listener=a;this.proxy=null;this.src=b;this.type=c;this.capture=!!d;this.Gd=e;this.key=++ze;this.sc=this.jd=!1}function Be(a){a.sc=!0;a.listener=null;a.proxy=null;a.src=null;a.Gd=null};function Ce(a){this.src=a;this.f={};this.h=0}Ce.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.f[f];a||(a=this.f[f]=[],this.h++);var h=De(a,b,d,e);-1<h?(b=a[h],c||(b.jd=!1)):(b=new Ae(b,this.src,f,!!d,e),b.jd=c,a.push(b));return b};Ce.prototype.remove=function(a,b,c,d){a=a.toString();if(!(a in this.f))return!1;var e=this.f[a];b=De(e,b,c,d);return-1<b?(Be(e[b]),Array.prototype.splice.call(e,b,1),0==e.length&&(delete this.f[a],this.h--),!0):!1};
function Ee(a,b){var c=b.type;c in a.f&&Cb(a.f[c],b)&&(Be(b),0==a.f[c].length&&(delete a.f[c],a.h--))}Ce.prototype.Kc=function(a,b,c,d){a=this.f[a.toString()];var e=-1;a&&(e=De(a,b,c,d));return-1<e?a[e]:null};function De(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.sc&&f.listener==b&&f.capture==!!c&&f.Gd==d)return e}return-1};var Fe="closure_lm_"+(1E6*Math.random()|0),Ge={},He=0;function M(a,b,c,d,e){if(d&&d.once)return Ie(a,b,c,d,e);if(Qa(b)){for(var f=0;f<b.length;f++)M(a,b[f],c,d,e);return null}c=Je(c);return ye(a)?a.listen(b,c,Va(d)?!!d.capture:!!d,e):Ke(a,b,c,!1,d,e)}
function Ke(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var h=Va(e)?!!e.capture:!!e,k=Le(a);k||(a[Fe]=k=new Ce(a));c=k.add(b,c,d,h,f);if(c.proxy)return c;d=Me();c.proxy=d;d.src=a;d.listener=c;if(a.addEventListener)ee||(e=h),void 0===e&&(e=!1),a.addEventListener(b.toString(),d,e);else if(a.attachEvent)a.attachEvent(Ne(b.toString()),d);else if(a.addListener&&a.removeListener)a.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");He++;return c}
function Me(){var a=Oe,b=ce?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b}function Ie(a,b,c,d,e){if(Qa(b)){for(var f=0;f<b.length;f++)Ie(a,b[f],c,d,e);return null}c=Je(c);return ye(a)?a.Df(b,c,Va(d)?!!d.capture:!!d,e):Ke(a,b,c,!0,d,e)}function Pe(a,b,c,d,e){if(Qa(b))for(var f=0;f<b.length;f++)Pe(a,b[f],c,d,e);else d=Va(d)?!!d.capture:!!d,c=Je(c),ye(a)?a.W(b,c,d,e):a&&(a=Le(a))&&(b=a.Kc(b,c,d,e))&&Qe(b)}
function Qe(a){if(!Ma(a)&&a&&!a.sc){var b=a.src;if(ye(b))Ee(b.Db,a);else{var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent?b.detachEvent(Ne(c),d):b.addListener&&b.removeListener&&b.removeListener(d);He--;(c=Le(b))?(Ee(c,a),0==c.h&&(c.src=null,b[Fe]=null)):Be(a)}}}function Ne(a){return a in Ge?Ge[a]:Ge[a]="on"+a}
function Re(a,b,c,d){var e=!0;if(a=Le(a))if(b=a.f[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.capture==c&&!f.sc&&(f=Se(f,d),e=e&&!1!==f)}return e}function Se(a,b){var c=a.listener,d=a.Gd||a.src;a.jd&&Qe(a);return c.call(d,b)}
function Oe(a,b){if(a.sc)return!0;if(!ce){if(!b)a:{b=["window","event"];for(var c=A,d=0;d<b.length;d++)if(c=c[b[d]],null==c){b=null;break a}b=c}d=b;b=new te(d,this);c=!0;if(!(0>d.keyCode||void 0!=d.returnValue)){a:{var e=!1;if(0==d.keyCode)try{d.keyCode=-1;break a}catch(h){e=!0}if(e||void 0==d.returnValue)d.returnValue=!0}d=[];for(e=b.currentTarget;e;e=e.parentNode)d.push(e);a=a.type;for(e=d.length-1;!b.ec&&0<=e;e--){b.currentTarget=d[e];var f=Re(d[e],a,!0,b);c=c&&f}for(e=0;!b.ec&&e<d.length;e++)b.currentTarget=
d[e],f=Re(d[e],a,!1,b),c=c&&f}return c}return Se(a,new te(b,this))}function Le(a){a=a[Fe];return a instanceof Ce?a:null}var Te="__closure_events_fn_"+(1E9*Math.random()>>>0);function Je(a){if(Ua(a))return a;a[Te]||(a[Te]=function(b){return a.handleEvent(b)});return a[Te]};function Ue(){me.call(this);this.Db=new Ce(this);this.$f=this;this.He=null}C(Ue,me);Ue.prototype[xe]=!0;g=Ue.prototype;g.mc=function(){return this.He};g.Le=function(a){this.He=a};g.addEventListener=function(a,b,c,d){M(this,a,b,c,d)};g.removeEventListener=function(a,b,c,d){Pe(this,a,b,c,d)};
g.dispatchEvent=function(a){var b,c=this.mc();if(c)for(b=[];c;c=c.mc())b.push(c);c=this.$f;var d=a.type||a;if(La(a))a=new se(a,c);else if(a instanceof se)a.target=a.target||c;else{var e=a;a=new se(d,c);pb(a,e)}e=!0;if(b)for(var f=b.length-1;!a.ec&&0<=f;f--){var h=a.currentTarget=b[f];e=Ve(h,d,!0,a)&&e}a.ec||(h=a.currentTarget=c,e=Ve(h,d,!0,a)&&e,a.ec||(e=Ve(h,d,!1,a)&&e));if(b)for(f=0;!a.ec&&f<b.length;f++)h=a.currentTarget=b[f],e=Ve(h,d,!1,a)&&e;return e};
g.G=function(){Ue.m.G.call(this);if(this.Db){var a=this.Db,b=0,c;for(c in a.f){for(var d=a.f[c],e=0;e<d.length;e++)++b,Be(d[e]);delete a.f[c];a.h--}}this.He=null};g.listen=function(a,b,c,d){return this.Db.add(String(a),b,!1,c,d)};g.Df=function(a,b,c,d){return this.Db.add(String(a),b,!0,c,d)};g.W=function(a,b,c,d){return this.Db.remove(String(a),b,c,d)};
function Ve(a,b,c,d){b=a.Db.f[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,f=0;f<b.length;++f){var h=b[f];if(h&&!h.sc&&h.capture==c){var k=h.listener,l=h.Gd||h.src;h.jd&&Ee(a.Db,h);e=!1!==k.call(l,d)&&e}}return e&&0!=d.Jf}g.Kc=function(a,b,c,d){return this.Db.Kc(String(a),b,c,d)};function We(a,b){Ue.call(this);a&&Xe(this,a,b)}C(We,Ue);g=We.prototype;g.w=null;g.Md=null;g.Ae=null;g.Nd=null;g.Ta=-1;g.qb=-1;g.he=!1;
var Ye={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},Ze={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},$e=!jc||G("525"),af=kc&&ic;g=We.prototype;
g.kg=function(a){if(jc||gc)if(17==this.Ta&&!a.ctrlKey||18==this.Ta&&!a.altKey||kc&&91==this.Ta&&!a.metaKey)this.qb=this.Ta=-1;-1==this.Ta&&(a.ctrlKey&&17!=a.keyCode?this.Ta=17:a.altKey&&18!=a.keyCode?this.Ta=18:a.metaKey&&91!=a.keyCode&&(this.Ta=91));$e&&!he(a.keyCode,this.Ta,a.shiftKey,a.ctrlKey,a.altKey,a.metaKey)?this.handleEvent(a):(this.qb=je(a.keyCode),af&&(this.he=a.altKey))};g.Cg=function(a){this.qb=this.Ta=-1;this.he=a.altKey};
g.handleEvent=function(a){var b=a.f,c=b.altKey;if(E&&"keypress"==a.type){var d=this.qb;var e=13!=d&&27!=d?b.keyCode:0}else(jc||gc)&&"keypress"==a.type?(d=this.qb,e=0<=b.charCode&&63232>b.charCode&&ie(d)?b.charCode:0):fc&&!jc?(d=this.qb,e=ie(d)?b.keyCode:0):("keypress"==a.type?(af&&(c=this.he),b.keyCode==b.charCode?32>b.keyCode?(d=b.keyCode,e=0):(d=this.qb,e=b.charCode):(d=b.keyCode||this.qb,e=b.charCode||0)):(d=b.keyCode||this.qb,e=b.charCode||0),kc&&63==e&&224==d&&(d=191));var f=d=je(d);d?63232<=
d&&d in Ye?f=Ye[d]:25==d&&a.shiftKey&&(f=9):b.keyIdentifier&&b.keyIdentifier in Ze&&(f=Ze[b.keyIdentifier]);ic&&$e&&"keypress"==a.type&&!he(f,this.Ta,a.shiftKey,a.ctrlKey,c,a.metaKey)||(a=f==this.Ta,this.Ta=f,b=new bf(f,e,a,b),b.altKey=c,this.dispatchEvent(b))};g.j=function(){return this.w};function Xe(a,b,c){a.Nd&&cf(a);a.w=b;a.Md=M(a.w,"keypress",a,c);a.Ae=M(a.w,"keydown",a.kg,c,a);a.Nd=M(a.w,"keyup",a.Cg,c,a)}
function cf(a){a.Md&&(Qe(a.Md),Qe(a.Ae),Qe(a.Nd),a.Md=null,a.Ae=null,a.Nd=null);a.w=null;a.Ta=-1;a.qb=-1}g.G=function(){We.m.G.call(this);cf(this)};function bf(a,b,c,d){te.call(this,d);this.type="key";this.keyCode=a;this.charCode=b;this.repeat=c}C(bf,te);function df(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}g=df.prototype;g.clone=function(){return new df(this.top,this.right,this.bottom,this.left)};g.toString=function(){return"("+this.top+"t, "+this.right+"r, "+this.bottom+"b, "+this.left+"l)"};g.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};
g.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};g.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};g.scale=function(a,b){b=Ma(b)?b:a;this.left*=a;this.right*=a;this.top*=b;this.bottom*=b;return this};function ef(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}g=ef.prototype;g.clone=function(){return new ef(this.left,this.top,this.width,this.height)};g.toString=function(){return"("+this.left+", "+this.top+" - "+this.width+"w x "+this.height+"h)"};g.distance=function(a){var b=a.x<this.left?this.left-a.x:Math.max(a.x-(this.left+this.width),0);a=a.y<this.top?this.top-a.y:Math.max(a.y-(this.top+this.height),0);return Math.sqrt(b*b+a*a)};g.getSize=function(){return new sd(this.width,this.height)};
g.getCenter=function(){return new H(this.left+this.width/2,this.top+this.height/2)};g.ceil=function(){this.left=Math.ceil(this.left);this.top=Math.ceil(this.top);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};g.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
g.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};g.scale=function(a,b){b=Ma(b)?b:a;this.left*=a;this.width*=a;this.top*=b;this.height*=b;return this};function ff(a,b,c){if(La(b))(b=gf(a,b))&&(a.style[b]=c);else for(var d in b){c=a;var e=b[d],f=gf(c,d);f&&(c.style[f]=e)}}var hf={};function gf(a,b){var c=hf[b];if(!c){var d=Tb(b);c=d;void 0===a.style[d]&&(d=(jc?"Webkit":ic?"Moz":E?"ms":fc?"O":null)+Ub(d),void 0!==a.style[d]&&(c=d));hf[b]=c}return c}function jf(a,b){var c=vd(a);return c.defaultView&&c.defaultView.getComputedStyle&&(a=c.defaultView.getComputedStyle(a,null))?a[b]||a.getPropertyValue(b)||"":""}
function kf(a,b){return jf(a,b)||(a.currentStyle?a.currentStyle[b]:null)||a.style&&a.style[b]}function lf(a){return kf(a,"position")}function mf(a,b,c){if(b instanceof H){var d=b.x;b=b.y}else d=b,b=c;a.style.left=nf(d,!1);a.style.top=nf(b,!1)}function of(a){return new H(a.offsetLeft,a.offsetTop)}function pf(a){a=a?vd(a):document;return!E||xc(9)||Ad(td(a).f)?a.documentElement:a.body}
function qf(a){try{var b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}E&&a.ownerDocument.body&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function rf(a){if(E&&!xc(8))return a.offsetParent;var b=vd(a),c=kf(a,"position"),d="fixed"==c||"absolute"==c;for(a=a.parentNode;a&&a!=b;a=a.parentNode)if(11==a.nodeType&&a.host&&(a=a.host),c=kf(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return null}
function sf(a){for(var b=new df(0,Infinity,Infinity,0),c=td(a),d=c.f.body,e=c.f.documentElement,f=Dd(c.f);a=rf(a);)if(!(E&&0==a.clientWidth||jc&&0==a.clientHeight&&a==d)&&a!=d&&a!=e&&"visible"!=kf(a,"overflow")){var h=tf(a),k=new H(a.clientLeft,a.clientTop);h.x+=k.x;h.y+=k.y;b.top=Math.max(b.top,h.y);b.right=Math.min(b.right,h.x+a.clientWidth);b.bottom=Math.min(b.bottom,h.y+a.clientHeight);b.left=Math.max(b.left,h.x)}d=f.scrollLeft;f=f.scrollTop;b.left=Math.max(b.left,d);b.top=Math.max(b.top,f);c=
zd(Ed(c.f)||window);b.right=Math.min(b.right,d+c.width);b.bottom=Math.min(b.bottom,f+c.height);return 0<=b.top&&0<=b.left&&b.bottom>b.top&&b.right>b.left?b:null}function tf(a){var b=vd(a),c=new H(0,0),d=pf(b);if(a==d)return c;a=qf(a);b=Cd(td(b).f);c.x=a.left+b.x;c.y=a.top+b.y;return c}function uf(a,b){a=vf(a);b=vf(b);return new H(a.x-b.x,a.y-b.y)}function wf(a){a=qf(a);return new H(a.left,a.top)}
function vf(a){if(1==a.nodeType)return wf(a);a=a.changedTouches?a.changedTouches[0]:a;return new H(a.clientX,a.clientY)}function xf(a,b,c){if(b instanceof sd)c=b.height,b=b.width;else if(void 0==c)throw Error("missing height argument");a.style.width=nf(b,!0);a.style.height=nf(c,!0)}function nf(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}
function yf(a){var b=zf;if("none"!=kf(a,"display"))return b(a);var c=a.style,d=c.display,e=c.visibility,f=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";a=b(a);c.display=d;c.position=f;c.visibility=e;return a}function zf(a){var b=a.offsetWidth,c=a.offsetHeight,d=jc&&!b&&!c;return Ka(b)&&!d||!a.getBoundingClientRect?new sd(b,c):(a=qf(a),new sd(a.right-a.left,a.bottom-a.top))}function Af(a){var b=tf(a);a=yf(a);return new ef(b.x,b.y,a.width,a.height)}
function Bf(a,b){a=a.style;"opacity"in a?a.opacity=b:"MozOpacity"in a?a.MozOpacity=b:"filter"in a&&(a.filter=""===b?"":"alpha(opacity="+100*Number(b)+")")}function N(a,b){a.style.display=b?"":"none"}function Cf(a){var b=td(void 0),c=b.f;if(E&&c.createStyleSheet)b=c.createStyleSheet(),Df(b,a);else{c=wd(b.f,"HEAD",void 0,void 0)[0];if(!c){var d=wd(b.f,"BODY",void 0,void 0)[0];c=b.M("HEAD");d.parentNode.insertBefore(c,d)}d=b.M("STYLE");Df(d,a);b.appendChild(c,d)}}
function Df(a,b){b instanceof ed&&b.constructor===ed&&b.h===fd?b=b.f:(ub("expected object of type SafeStyleSheet, got '"+b+"' of type "+Pa(b)),b="type_error:SafeStyleSheet");E&&Ka(a.cssText)?a.cssText=b:a.innerHTML=b}function Ef(a){return"rtl"==kf(a,"direction")}var Ff=ic?"MozUserSelect":jc||gc?"WebkitUserSelect":null;
function Gf(a,b,c){c=c?null:a.getElementsByTagName("*");if(Ff){if(b=b?"none":"",a.style&&(a.style[Ff]=b),c){a=0;for(var d;d=c[a];a++)d.style&&(d.style[Ff]=b)}}else if(E||fc)if(b=b?"on":"",a.setAttribute("unselectable",b),c)for(a=0;d=c[a];a++)d.setAttribute("unselectable",b)}function Hf(a){return new sd(a.offsetWidth,a.offsetHeight)}
function If(a,b){var c=Ad(td(vd(a)).f);if(!E||G("10")||c&&G("8")){var d=a.style;ic?d.MozBoxSizing="border-box":jc?d.WebkitBoxSizing="border-box":d.boxSizing="border-box";d.width=Math.max(b.width,0)+"px";d.height=Math.max(b.height,0)+"px"}else d=a.style,c?(c=Jf(a),a=Kf(a),d.pixelWidth=b.width-a.left-c.left-c.right-a.right,d.pixelHeight=b.height-a.top-c.top-c.bottom-a.bottom):(d.pixelWidth=b.width,d.pixelHeight=b.height)}
function Lf(a){var b=vd(a),c=E&&a.currentStyle;if(c&&Ad(td(b).f)&&"auto"!=c.width&&"auto"!=c.height&&!c.boxSizing)return b=Mf(a,c.width,"width","pixelWidth"),a=Mf(a,c.height,"height","pixelHeight"),new sd(b,a);c=Hf(a);b=Jf(a);a=Kf(a);return new sd(c.width-a.left-b.left-b.right-a.right,c.height-a.top-b.top-b.bottom-a.bottom)}
function Mf(a,b,c,d){if(/^\d+px?$/.test(b))return parseInt(b,10);var e=a.style[c],f=a.runtimeStyle[c];a.runtimeStyle[c]=a.currentStyle[c];a.style[c]=b;b=a.style[d];a.style[c]=e;a.runtimeStyle[c]=f;return+b}function Nf(a,b){return(b=a.currentStyle?a.currentStyle[b]:null)?Mf(a,b,"left","pixelLeft"):0}
function Jf(a){if(E){var b=Nf(a,"paddingLeft"),c=Nf(a,"paddingRight"),d=Nf(a,"paddingTop");a=Nf(a,"paddingBottom");return new df(d,c,a,b)}b=jf(a,"paddingLeft");c=jf(a,"paddingRight");d=jf(a,"paddingTop");a=jf(a,"paddingBottom");return new df(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))}var Of={thin:2,medium:4,thick:6};
function Pf(a,b){if("none"==(a.currentStyle?a.currentStyle[b+"Style"]:null))return 0;b=a.currentStyle?a.currentStyle[b+"Width"]:null;return b in Of?Of[b]:Mf(a,b,"left","pixelLeft")}function Kf(a){if(E&&!xc(9)){var b=Pf(a,"borderLeft"),c=Pf(a,"borderRight"),d=Pf(a,"borderTop");a=Pf(a,"borderBottom");return new df(d,c,a,b)}b=jf(a,"borderLeftWidth");c=jf(a,"borderRightWidth");d=jf(a,"borderTopWidth");a=jf(a,"borderBottomWidth");return new df(parseFloat(d),parseFloat(c),parseFloat(a),parseFloat(b))};function Qf(a){me.call(this);this.h=a;this.f={}}C(Qf,me);var Rf=[];g=Qf.prototype;g.listen=function(a,b,c,d){Qa(b)||(b&&(Rf[0]=b.toString()),b=Rf);for(var e=0;e<b.length;e++){var f=M(a,b[e],c||this.handleEvent,d||!1,this.h||this);if(!f)break;this.f[f.key]=f}return this};g.Df=function(a,b,c,d){return Sf(this,a,b,c,d)};function Sf(a,b,c,d,e,f){if(Qa(c))for(var h=0;h<c.length;h++)Sf(a,b,c[h],d,e,f);else{b=Ie(b,c,d||a.handleEvent,e,f||a.h||a);if(!b)return a;a.f[b.key]=b}return a}
g.W=function(a,b,c,d,e){if(Qa(b))for(var f=0;f<b.length;f++)this.W(a,b[f],c,d,e);else c=c||this.handleEvent,d=Va(d)?!!d.capture:!!d,e=e||this.h||this,c=Je(c),d=!!d,b=ye(a)?a.Kc(b,c,d,e):a?(a=Le(a))?a.Kc(b,c,d,e):null:null,b&&(Qe(b),delete this.f[b.key]);return this};function Tf(a){gb(a.f,function(a,c){this.f.hasOwnProperty(c)&&Qe(a)},a);a.f={}}g.G=function(){Qf.m.G.call(this);Tf(this)};g.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function Uf(){}Oa(Uf);Uf.prototype.f=0;function P(a){Ue.call(this);this.f=a||td();this.be=Vf;this.ic=null;this.N=!1;this.w=null;this.ua=void 0;this.C=this.A=this.Ma=this.dc=null;this.Ue=!1}C(P,Ue);P.prototype.Wf=Uf.ia();var Vf=null,jb={Ch:"beforeshow",Xh:"show",Nh:"hide",Jh:"disable",Kh:"enable",Oh:"highlight",ai:"unhighlight",Bh:"activate",Ih:"deactivate",dd:"select",bi:"unselect",Fh:"check",Yh:"uncheck",Mh:"focus",Dh:"blur",OPEN:"open",Hh:"close",Lh:"enter",Ph:"leave",Ah:"action",Eh:"change"};
function Wf(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}throw Error("Invalid component state");}function Xf(a){return a.ic||(a.ic=":"+(a.Wf.f++).toString(36))}function Yf(a,b){if(a.Ma&&a.Ma.C){var c=a.Ma.C,d=a.ic;d in c&&delete c[d];mb(a.Ma.C,b,a)}a.ic=b}g=P.prototype;g.j=function(){return this.w};
g.pe=function(a){return this.w?this.f.pe(a,this.w):null};function Q(a){a.ua||(a.ua=new Qf(a));return a.ua}function Zf(a,b){if(a==b)throw Error("Unable to set parent component");if(b&&a.Ma&&a.ic&&$f(a.Ma,a.ic)&&a.Ma!=b)throw Error("Unable to set parent component");a.Ma=b;P.m.Le.call(a,b)}g.getParent=function(){return this.Ma};g.Le=function(a){if(this.Ma&&this.Ma!=a)throw Error("Method not supported");P.m.Le.call(this,a)};g.S=function(){this.w=this.f.f.createElement("DIV")};
g.render=function(a){ag(this,a)};function ag(a,b,c){if(a.N)throw Error("Component already rendered");a.w||a.S();b?b.insertBefore(a.w,c||null):a.f.f.body.appendChild(a.w);a.Ma&&!a.Ma.N||a.I()}function bg(a,b){if(a.N)throw Error("Component already rendered");if(b&&a.Lc(b)){a.Ue=!0;var c=vd(b);a.f&&a.f.f==c||(a.f=td(b));a.xa(b);a.I()}else throw Error("Invalid element to decorate");}g.Lc=function(){return!0};g.xa=function(a){this.w=a};g.I=function(){this.N=!0;cg(this,function(a){!a.N&&a.j()&&a.I()})};
g.ha=function(){cg(this,function(a){a.N&&a.ha()});this.ua&&Tf(this.ua);this.N=!1};g.G=function(){this.N&&this.ha();this.ua&&(this.ua.dispose(),delete this.ua);cg(this,function(a){a.dispose()});!this.Ue&&this.w&&Kd(this.w);this.Ma=this.dc=this.w=this.C=this.A=null;P.m.G.call(this)};function R(a,b){return Xf(a)+"."+b}function dg(a,b){if(!a.N)throw Error("Operation not supported while component is not in document");return a.f.j(R(a,b))}g.da=function(a,b){this.ge(a,eg(this),b)};
g.ge=function(a,b,c){if(a.N&&(c||!this.N))throw Error("Component already rendered");if(0>b||b>eg(this))throw Error("Child component index out of bounds");this.C&&this.A||(this.C={},this.A=[]);if(a.getParent()==this){var d=Xf(a);this.C[d]=a;Cb(this.A,a)}else mb(this.C,Xf(a),a);Zf(a,this);Fb(this.A,b,0,a);a.N&&this.N&&a.getParent()==this?(c=this.Ia(),b=c.childNodes[b]||null,b!=a.j()&&c.insertBefore(a.j(),b)):c?(this.w||this.S(),b=T(this,b+1),ag(a,this.Ia(),b?b.w:null)):this.N&&!a.N&&a.w&&a.w.parentNode&&
1==a.w.parentNode.nodeType&&a.I()};g.Ia=function(){return this.w};function fg(a){null==a.be&&(a.be=Ef(a.N?a.w:a.f.f.body));return a.be}function eg(a){return a.A?a.A.length:0}function $f(a,b){a.C&&b?(a=a.C,b=(null!==a&&b in a?a[b]:void 0)||null):b=null;return b}function T(a,b){return a.A?a.A[b]||null:null}function cg(a,b,c){a.A&&xb(a.A,b,c)}function gg(a,b){return a.A&&b?wb(a.A,b):-1}
g.removeChild=function(a,b){if(a){var c=La(a)?a:Xf(a);a=$f(this,c);if(c&&a){var d=this.C;c in d&&delete d[c];Cb(this.A,a);b&&(a.ha(),a.w&&Kd(a.w));Zf(a,null)}}if(!a)throw Error("Child is not in parent component");return a};function hg(a){if(a.classList)return a.classList;a=a.className;return La(a)&&a.match(/\S+/g)||[]}function ig(a,b){return a.classList?a.classList.contains(b):Bb(hg(a),b)}function jg(a,b){a.classList?a.classList.add(b):ig(a,b)||(a.className+=0<a.className.length?" "+b:b)}function kg(a,b){if(a.classList)xb(b,function(b){jg(a,b)});else{var c={};xb(hg(a),function(a){c[a]=!0});xb(b,function(a){c[a]=!0});a.className="";for(var d in c)a.className+=0<a.className.length?" "+d:d}}
function lg(a,b){a.classList?a.classList.remove(b):ig(a,b)&&(a.className=yb(hg(a),function(a){return a!=b}).join(" "))}function mg(a,b){a.classList?xb(b,function(b){lg(a,b)}):a.className=yb(hg(a),function(a){return!Bb(b,a)}).join(" ")}function ng(a,b,c){c?jg(a,b):lg(a,b)};function og(a,b){if(!a)throw Error("Invalid class name "+a);if(!Ua(b))throw Error("Invalid decorator function "+b);pg[a]=b}var qg={},pg={};function rg(a){this.f=a}Oa(rg);function sg(a,b){a&&(a.tabIndex=b?0:-1)}g=rg.prototype;g.qe=function(a){return"DIV"==a.tagName};function tg(a,b,c){c.id&&Yf(b,c.id);var d=a.Xb(),e=!1,f=hg(c);f&&xb(f,function(a){a==d?e=!0:a&&this.Me(b,a,d)},a);e||jg(c,d);ug(a,b,c);return c}g.Me=function(a,b,c){b==c+"-disabled"?a.Fa(!1):b==c+"-horizontal"?vg(a,wg):b==c+"-vertical"&&vg(a,xg)};
function ug(a,b,c){if(c)for(var d=c.firstChild,e;d&&d.parentNode==c;){e=d.nextSibling;if(1==d.nodeType){var f=a.Jc(d);f&&(f.w=d,b.isEnabled()||f.Fa(!1),b.da(f),bg(f,d))}else d.nodeValue&&""!=Ib(d.nodeValue)||c.removeChild(d);d=e}}g.Jc=function(a){a:{a=hg(a);for(var b=0,c=a.length;b<c;b++){var d=a[b];if(d=d in pg?pg[d]():null){a=d;break a}}a=null}return a};g.se=function(a){a=a.j();Gf(a,!0,ic);E&&(a.hideFocus=!0);var b=this.f;b&&Zd(a,b)};g.Xb=function(){return"goog-container"};
g.re=function(a){var b=this.Xb(),c=[b,a.Ob==wg?b+"-horizontal":b+"-vertical"];a.isEnabled()||c.push(b+"-disabled");return c};g.nf=function(){return xg};function yg(){}var zg;Oa(yg);var Ag={button:"pressed",checkbox:"checked",menuitem:"selected",menuitemcheckbox:"checked",menuitemradio:"checked",radio:"checked",tab:"selected",treeitem:"selected"};g=yg.prototype;g.$b=function(){};g.Sa=function(a){return a.f.M("DIV",Bg(this,a).join(" "),a.wa)};g.gb=function(a){return a};function Cg(a,b,c){if(a=a.j?a.j():a){var d=[b];E&&!G("7")&&(d=Dg(hg(a),b),d.push(b));(c?kg:mg)(a,d)}}g.ue=function(){return!0};
g.na=function(a,b){b.id&&Yf(a,b.id);var c=this.gb(b);c&&c.firstChild?Eg(a,c.firstChild.nextSibling?Eb(c.childNodes):c.firstChild):a.wa=null;var d=0,e=this.T(),f=this.T(),h=!1,k=!1,l=!1,m=Eb(hg(b));xb(m,function(a){h||a!=e?k||a!=f?d|=this.ud(a):k=!0:(h=!0,f==e&&(k=!0));1==this.ud(a)&&Td(c)&&Ud(c,!1)},this);a.Pb=d;h||(m.push(e),f==e&&(k=!0));k||m.push(f);(a=a.me)&&m.push.apply(m,a);if(E&&!G("7")){var p=Dg(m);0<p.length&&(m.push.apply(m,p),l=!0)}if(!h||!k||a||l)b.className=m.join(" ");return b};
g.wd=function(a){fg(a)&&this.tf(a.j(),!0);a.isEnabled()&&this.Nc(a,a.Ca)};function Fg(a,b,c){if(a=c||a.$b())c=b.getAttribute("role")||null,a!=c&&Zd(b,a)}function Gg(a,b,c){b.Ca||L(c,"hidden",!b.Ca);b.isEnabled()||a.xb(c,1,!b.isEnabled());Hg(b,8)&&a.xb(c,8,Ig(b,8));Hg(b,16)&&a.xb(c,16,b.pc());Hg(b,64)&&a.xb(c,64,Ig(b,64))}g.ve=function(a,b){Gf(a,!b,!E&&!fc)};g.tf=function(a,b){Cg(a,this.T()+"-rtl",b)};g.sf=function(a){var b;return Hg(a,32)&&(b=a.j())?Td(b):!1};
g.Nc=function(a,b){var c;if(Hg(a,32)&&(c=a.j())){if(!b&&Ig(a,32)){try{c.blur()}catch(d){}Ig(a,32)&&a.xd(null)}Td(c)!=b&&Ud(c,b)}};g.K=function(a,b){N(a,b);a&&L(a,"hidden",!b)};g.Na=function(a,b,c){var d=a.j();if(d){var e=this.Ic(b);e&&Cg(a,e,c);this.xb(d,b,c)}};g.xb=function(a,b,c){zg||(zg={1:"disabled",8:"selected",16:"checked",64:"expanded"});b=zg[b];var d=a.getAttribute("role")||null;d&&(d=Ag[d]||b,b="checked"==b||"selected"==b?d:b);b&&L(a,b,c)};
g.ac=function(a,b){var c=this.gb(a);c&&(Jd(c),b&&(La(b)?Pd(c,b):(a=function(a){if(a){var b=vd(c);c.appendChild(La(a)?b.createTextNode(a):a)}},Qa(b)?xb(b,a):!Ta(b)||"nodeType"in b?a(b):xb(Eb(b),a))))};g.T=function(){return"goog-control"};function Bg(a,b){var c=a.T(),d=[c],e=a.T();e!=c&&d.push(e);c=b.Pb;for(e=[];c;){var f=c&-c;e.push(a.Ic(f));c&=~f}d.push.apply(d,e);(a=b.me)&&d.push.apply(d,a);E&&!G("7")&&d.push.apply(d,Dg(d));return d}
function Dg(a,b){var c=[];b&&(a=Db(a,[b]));xb([],function(d){!Ab(d,bb(Bb,a))||b&&!Bb(d,b)||c.push(d.join("_"))});return c}g.Ic=function(a){this.f||Jg(this);return this.f[a]};g.ud=function(a){this.i||(this.f||Jg(this),this.i=nb(this.f));a=parseInt(this.i[a],10);return isNaN(a)?0:a};function Jg(a){var b=a.T();a.f={1:b+"-disabled",2:b+"-hover",4:b+"-active",8:b+"-selected",16:b+"-checked",32:b+"-focused",64:b+"-open"}};function Kg(a,b,c){P.call(this,c);if(!b){b=this.constructor;for(var d;b;){d=Wa(b);if(d=qg[d])break;b=b.m?b.m.constructor:null}b=d?Ua(d.ia)?d.ia():new d:null}this.i=b;this.wa=Ka(a)?a:null}C(Kg,P);g=Kg.prototype;g.wa=null;g.Pb=0;g.Wc=39;g.Ec=255;g.hc=0;g.Ca=!0;g.me=null;g.Dd=!0;function Lg(a,b){a.N&&b!=a.Dd&&Mg(a,b);a.Dd=b}g.S=function(){var a=this.i.Sa(this);this.w=a;Fg(this.i,a,this.Oc());this.i.ve(a,!1);this.Ca||this.i.K(a,!1)};g.Oc=function(){return null};g.Ia=function(){return this.i.gb(this.j())};
g.Lc=function(a){return this.i.ue(a)};g.xa=function(a){this.w=a=this.i.na(this,a);Fg(this.i,a,this.Oc());this.i.ve(a,!1);this.Ca="none"!=a.style.display};g.I=function(){Kg.m.I.call(this);Gg(this.i,this,this.w);this.i.wd(this);if(this.Wc&-2&&(this.Dd&&Mg(this,!0),Hg(this,32))){var a=this.j();if(a){var b=this.u||(this.u=new We);Xe(b,a);Q(this).listen(b,"key",this.hb).listen(a,"focus",this.pg).listen(a,"blur",this.xd)}}};
function Mg(a,b){var c=Q(a),d=a.j();b?(c.listen(d,fe.yc,a.oc).listen(d,[fe.zc,fe.xc],a.Rb).listen(d,"mouseover",a.Rc).listen(d,"mouseout",a.ye),a.Qc!=Na&&c.listen(d,"contextmenu",a.Qc),E&&(G(9)||c.listen(d,"dblclick",a.wf),a.B||(a.B=new Ng(a),pe(a,bb(qe,a.B))))):(c.W(d,fe.yc,a.oc).W(d,[fe.zc,fe.xc],a.Rb).W(d,"mouseover",a.Rc).W(d,"mouseout",a.ye),a.Qc!=Na&&c.W(d,"contextmenu",a.Qc),E&&(G(9)||c.W(d,"dblclick",a.wf),qe(a.B),a.B=null))}
g.ha=function(){Kg.m.ha.call(this);this.u&&cf(this.u);this.Ca&&this.isEnabled()&&this.i.Nc(this,!1)};g.G=function(){Kg.m.G.call(this);this.u&&(this.u.dispose(),delete this.u);delete this.i;this.B=this.me=this.wa=null};function Eg(a,b){a.wa=b}g.Mb=function(){var a=this.wa;if(!a)return"";a=La(a)?a:Qa(a)?zb(a,Xd).join(""):Vd(a);return Hb(a)};g.K=function(a,b){return b||this.Ca!=a&&this.dispatchEvent(a?"show":"hide")?((b=this.j())&&this.i.K(b,a),this.isEnabled()&&this.i.Nc(this,a),this.Ca=a,!0):!1};
g.isEnabled=function(){return!Ig(this,1)};g.Fa=function(a){var b=this.getParent();b&&"function"==typeof b.isEnabled&&!b.isEnabled()||!Og(this,1,!a)||(a||(Pg(this,!1),this.jb(!1)),this.Ca&&this.i.Nc(this,a),this.Na(1,!a,!0))};g.jb=function(a){Og(this,2,a)&&this.Na(2,a)};function Pg(a,b){Og(a,4,b)&&a.Na(4,b)}function Qg(a,b){Og(a,8,b)&&a.Na(8,b)}g.pc=function(){return Ig(this,16)};g.Td=function(a){Og(this,16,a)&&this.Na(16,a)};g.sa=function(a){Og(this,64,a)&&this.Na(64,a)};
function Ig(a,b){return!!(a.Pb&b)}g.Na=function(a,b,c){c||1!=a?Hg(this,a)&&b!=Ig(this,a)&&(this.i.Na(this,a,b),this.Pb=b?this.Pb|a:this.Pb&~a):this.Fa(!b)};function Hg(a,b){return!!(a.Wc&b)}g.Ja=function(a,b){if(this.N&&Ig(this,a)&&!b)throw Error("Component already rendered");!b&&Ig(this,a)&&this.Na(a,!1);this.Wc=b?this.Wc|a:this.Wc&~a};function Rg(a,b){return!!(a.Ec&b)&&Hg(a,b)}function Og(a,b,c){return Hg(a,b)&&Ig(a,b)!=c&&(!(a.hc&b)||a.dispatchEvent(Wf(b,c)))&&!a.fb}
g.Rc=function(a){(!a.relatedTarget||!Od(this.j(),a.relatedTarget))&&this.dispatchEvent("enter")&&this.isEnabled()&&Rg(this,2)&&this.jb(!0)};g.ye=function(a){a.relatedTarget&&Od(this.j(),a.relatedTarget)||!this.dispatchEvent("leave")||(Rg(this,4)&&Pg(this,!1),Rg(this,2)&&this.jb(!1))};g.Qc=Na;g.oc=function(a){this.isEnabled()&&(Rg(this,2)&&this.jb(!0),we(a)&&(Rg(this,4)&&Pg(this,!0),this.i&&this.i.sf(this)&&this.j().focus()));we(a)&&a.preventDefault()};
g.Rb=function(a){this.isEnabled()&&(Rg(this,2)&&this.jb(!0),Ig(this,4)&&this.sb(a)&&Rg(this,4)&&Pg(this,!1))};g.wf=function(a){this.isEnabled()&&this.sb(a)};g.sb=function(a){Rg(this,16)&&this.Td(!this.pc());Rg(this,8)&&Qg(this,!0);Rg(this,64)&&this.sa(!Ig(this,64));var b=new se("action",this);a&&(b.altKey=a.altKey,b.ctrlKey=a.ctrlKey,b.metaKey=a.metaKey,b.shiftKey=a.shiftKey,b.Je=a.Je);return this.dispatchEvent(b)};g.pg=function(){Rg(this,32)&&Og(this,32,!0)&&this.Na(32,!0)};
g.xd=function(){Rg(this,4)&&Pg(this,!1);Rg(this,32)&&Og(this,32,!1)&&this.Na(32,!1)};g.hb=function(a){return this.Ca&&this.isEnabled()&&this.bc(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};g.bc=function(a){return 13==a.keyCode&&this.sb(a)};if(!Ua(Kg))throw Error("Invalid component class "+Kg);if(!Ua(yg))throw Error("Invalid renderer class "+yg);var Sg=Wa(Kg);qg[Sg]=yg;og("goog-control",function(){return new Kg(null)});
function Ng(a){me.call(this);this.h=a;this.f=!1;this.i=new Qf(this);pe(this,bb(qe,this.i));a=this.h.w;this.i.listen(a,"mousedown",this.A).listen(a,"mouseup",this.C).listen(a,"click",this.l)}C(Ng,me);var Tg=!E||xc(9);Ng.prototype.A=function(){this.f=!1};Ng.prototype.C=function(){this.f=!0};
function Ug(a,b){if(!Tg)return a.button=0,a.type=b,a;var c=document.createEvent("MouseEvents");c.initMouseEvent(b,a.bubbles,a.cancelable,a.view||null,a.detail,a.screenX,a.screenY,a.clientX,a.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,a.relatedTarget||null);return c}Ng.prototype.l=function(a){if(this.f)this.f=!1;else{var b=a.f,c=b.button,d=b.type,e=Ug(b,"mousedown");this.h.oc(new te(e,a.currentTarget));e=Ug(b,"mouseup");this.h.Rb(new te(e,a.currentTarget));Tg||(b.button=c,b.type=d)}};
Ng.prototype.G=function(){this.h=null;Ng.m.G.call(this)};function Vg(a,b,c){P.call(this,c);this.Hb=b||rg.ia();this.Ob=a||this.Hb.nf()}C(Vg,P);var wg="horizontal",xg="vertical";g=Vg.prototype;g.Be=null;g.Zb=null;g.Hb=null;g.Ob=null;g.$=!0;g.Yb=!0;g.lc=!0;g.oa=-1;g.ra=null;g.rb=!1;g.Ab=null;function Wg(a){return a.Be||a.j()}g.S=function(){this.w=this.f.M("DIV",this.Hb.re(this).join(" "))};g.Ia=function(){return this.j()};g.Lc=function(a){return this.Hb.qe(a)};g.xa=function(a){this.w=tg(this.Hb,this,a);"none"==a.style.display&&(this.$=!1)};
g.I=function(){Vg.m.I.call(this);cg(this,function(a){a.N&&Xg(this,a)},this);var a=this.j();this.Hb.se(this);this.K(this.$,!0);Q(this).listen(this,"enter",this.xe).listen(this,"highlight",this.mg).listen(this,"unhighlight",this.og).listen(this,"open",this.Gg).listen(this,"close",this.lg).listen(a,fe.yc,this.ng).listen(vd(a),[fe.zc,fe.xc],this.wg).listen(a,[fe.yc,fe.zc,fe.xc,"mouseover","mouseout","contextmenu"],this.ug);this.lc&&Yg(this,!0)};
function Yg(a,b){var c=Q(a),d=Wg(a);b?c.listen(d,"focus",a.Mc).listen(d,"blur",a.vd).listen(a.Zb||(a.Zb=new We(Wg(a))),"key",a.hb):c.W(d,"focus",a.Mc).W(d,"blur",a.vd).W(a.Zb||(a.Zb=new We(Wg(a))),"key",a.hb)}g.ha=function(){this.ib(-1);this.ra&&this.ra.sa(!1);this.rb=!1;Vg.m.ha.call(this)};g.G=function(){Vg.m.G.call(this);this.Zb&&(this.Zb.dispose(),this.Zb=null);this.Hb=this.ra=this.Ab=this.Be=null};g.xe=function(){return!0};
g.mg=function(a){var b=gg(this,a.target);if(-1<b&&b!=this.oa){var c=Zg(this);c&&c.jb(!1);this.oa=b;c=Zg(this);this.rb&&Pg(c,!0);this.ra&&c!=this.ra&&(Hg(c,64)?c.sa(!0):this.ra.sa(!1))}b=this.j();null!=a.target.j()&&L(b,"activedescendant",a.target.j().id)};g.og=function(a){a.target==Zg(this)&&(this.oa=-1);this.j().removeAttribute("aria-activedescendant")};g.Gg=function(a){(a=a.target)&&a!=this.ra&&a.getParent()==this&&(this.ra&&this.ra.sa(!1),this.ra=a)};
g.lg=function(a){a.target==this.ra&&(this.ra=null);var b=this.j(),c=a.target.j();b&&Ig(a.target,2)&&c&&ae(b,c)};g.ng=function(a){this.Yb&&(this.rb=!0);var b=Wg(this);b&&Td(b)?b.focus():a.preventDefault()};g.wg=function(){this.rb=!1};
g.ug=function(a){a:{var b=a.target;if(this.Ab)for(var c=this.j();b&&b!==c;){var d=b.id;if(d in this.Ab){b=this.Ab[d];break a}b=b.parentNode}b=null}if(b)switch(a.type){case fe.yc:b.oc(a);break;case fe.zc:case fe.xc:b.Rb(a);break;case "mouseover":b.Rc(a);break;case "mouseout":b.ye(a);break;case "contextmenu":b.Qc(a)}};g.Mc=function(){};g.vd=function(){this.ib(-1);this.rb=!1;this.ra&&this.ra.sa(!1)};
g.hb=function(a){return this.isEnabled()&&this.$&&(0!=eg(this)||this.Be)&&this.te(a)?(a.preventDefault(),a.stopPropagation(),!0):!1};
g.te=function(a){var b=Zg(this);if(b&&"function"==typeof b.hb&&b.hb(a)||this.ra&&this.ra!=b&&"function"==typeof this.ra.hb&&this.ra.hb(a))return!0;if(a.shiftKey||a.ctrlKey||a.metaKey||a.altKey)return!1;switch(a.keyCode){case 27:if(this.lc)Wg(this).blur();else return!1;break;case 36:$g(this);break;case 35:ah(this);break;case 38:if(this.Ob==xg)bh(this);else return!1;break;case 37:if(this.Ob==wg)fg(this)?ch(this):bh(this);else return!1;break;case 40:if(this.Ob==xg)ch(this);else return!1;break;case 39:if(this.Ob==
wg)fg(this)?bh(this):ch(this);else return!1;break;default:return!1}return!0};function Xg(a,b){var c=b.j();c=c.id||(c.id=Xf(b));a.Ab||(a.Ab={});a.Ab[c]=b}g.da=function(a,b){Vg.m.da.call(this,a,b)};g.ge=function(a,b,c){a.hc|=2;a.hc|=64;a.Ja(32,!1);Lg(a,!1);var d=a.getParent()==this?gg(this,a):-1;Vg.m.ge.call(this,a,b,c);a.N&&this.N&&Xg(this,a);a=d;-1==a&&(a=eg(this));a==this.oa?this.oa=Math.min(eg(this)-1,b):a>this.oa&&b<=this.oa?this.oa++:a<this.oa&&b>this.oa&&this.oa--};
g.removeChild=function(a,b){if(a=La(a)?$f(this,a):a){var c=gg(this,a);-1!=c&&(c==this.oa?(a.jb(!1),this.oa=-1):c<this.oa&&this.oa--);var d=a.j();d&&d.id&&this.Ab&&(c=this.Ab,d=d.id,d in c&&delete c[d])}a=Vg.m.removeChild.call(this,a,b);Lg(a,!0);return a};function vg(a,b){if(a.j())throw Error("Component already rendered");a.Ob=b}
g.K=function(a,b){if(b||this.$!=a&&this.dispatchEvent(a?"show":"hide")){this.$=a;var c=this.j();c&&(N(c,a),this.lc&&sg(Wg(this),this.Yb&&this.$),b||this.dispatchEvent(this.$?"aftershow":"afterhide"));return!0}return!1};g.isEnabled=function(){return this.Yb};g.Fa=function(a){this.Yb!=a&&this.dispatchEvent(a?"enable":"disable")&&(a?(this.Yb=!0,cg(this,function(a){a.Sf?delete a.Sf:a.Fa(!0)})):(cg(this,function(a){a.isEnabled()?a.Fa(!1):a.Sf=!0}),this.rb=this.Yb=!1),this.lc&&sg(Wg(this),a&&this.$))};
function dh(a,b){b!=a.lc&&a.N&&Yg(a,b);a.lc=b;a.Yb&&a.$&&sg(Wg(a),b)}g.ib=function(a){(a=T(this,a))?a.jb(!0):-1<this.oa&&Zg(this).jb(!1)};function Zg(a){return T(a,a.oa)}function $g(a){eh(a,function(a,c){return(a+1)%c},eg(a)-1)}function ah(a){eh(a,function(a,c){a--;return 0>a?c-1:a},0)}function ch(a){eh(a,function(a,c){return(a+1)%c},a.oa)}function bh(a){eh(a,function(a,c){a--;return 0>a?c-1:a},a.oa)}
function eh(a,b,c){c=0>c?gg(a,a.ra):c;var d=eg(a);c=b.call(a,c,d);for(var e=0;e<=d;){var f=T(a,c);if(f&&a.df(f)){a.Ke(c);break}e++;c=b.call(a,c,d)}}g.df=function(a){return a.Ca&&a.isEnabled()&&Hg(a,2)};g.Ke=function(a){this.ib(a)};function fh(){}C(fh,yg);Oa(fh);fh.prototype.Sa=function(a){return a.f.M("DIV",this.T())};fh.prototype.na=function(a,b){b.id&&Yf(a,b.id);if("HR"==b.tagName){var c=b;b=this.Sa(a);c.parentNode&&c.parentNode.insertBefore(b,c);Kd(c)}else jg(b,this.T());return b};fh.prototype.ac=function(){};fh.prototype.T=function(){return"goog-menuseparator"};function gh(a,b){Kg.call(this,null,a||fh.ia(),b);this.Ja(1,!1);this.Ja(2,!1);this.Ja(4,!1);this.Ja(32,!1);this.Pb=1}C(gh,Kg);gh.prototype.I=function(){gh.m.I.call(this);Zd(this.j(),"separator")};og("goog-menuseparator",function(){return new gh});function hh(){}C(hh,fh);Oa(hh);hh.prototype.Sa=function(a){return a.f.M("DIV",Bg(this,a).join(" ")+" goog-inline-block","\u00a0")};hh.prototype.na=function(a,b){b=hh.m.na.call(this,a,b);jg(b,"goog-inline-block");return b};hh.prototype.T=function(){return"goog-toolbar-separator"};function ih(){this.f="toolbar"}C(ih,rg);Oa(ih);ih.prototype.Jc=function(a){return"HR"==a.tagName?new gh(hh.ia()):ih.m.Jc.call(this,a)};ih.prototype.Xb=function(){return"goog-toolbar"};ih.prototype.nf=function(){return wg};function jh(a,b,c){Vg.call(this,b,a||ih.ia(),c)}C(jh,Vg);jh.prototype.Mc=function(a){jh.m.Mc.call(this,a);this.rb||$g(this)};function kh(){}C(kh,yg);Oa(kh);kh.prototype.T=function(){return"goog-menuheader"};function lh(a,b,c){Kg.call(this,a,c||kh.ia(),b);this.Ja(1,!1);this.Ja(2,!1);this.Ja(4,!1);this.Ja(32,!1);this.Pb=1}C(lh,Kg);og("goog-menuheader",function(){return new lh(null)});function mh(){this.h=[]}C(mh,yg);Oa(mh);function nh(a,b){var c=a.h[b];if(!c){switch(b){case 0:c=a.T()+"-highlight";break;case 1:c=a.T()+"-checkbox";break;case 2:c=a.T()+"-content"}a.h[b]=c}return c}g=mh.prototype;g.$b=function(){return"menuitem"};g.Sa=function(a){var b=a.f.M("DIV",Bg(this,a).join(" "),oh(this,a.wa,a.f));ph(this,a,b,Hg(a,8)||Hg(a,16));return b};g.gb=function(a){return a&&a.firstChild};
g.na=function(a,b){var c=Md(b),d=nh(this,2);c&&ig(c,d)||b.appendChild(oh(this,b.childNodes,a.f));ig(b,"goog-option")&&(a.Ja(16,!0),a&&b&&ph(this,a,b,!0));return mh.m.na.call(this,a,b)};g.ac=function(a,b){var c=this.gb(a),d=qh(this,a)?c.firstChild:null;mh.m.ac.call(this,a,b);d&&!qh(this,a)&&c.insertBefore(d,c.firstChild||null)};function oh(a,b,c){a=nh(a,2);return c.M("DIV",a,b)}function qh(a,b){return(b=a.gb(b))?(b=b.firstChild,a=nh(a,1),!!b&&Nd(b)&&ig(b,a)):!1}
function ph(a,b,c,d){Fg(a,c,b.Oc());Gg(a,b,c);d!=qh(a,c)&&(ng(c,"goog-option",d),c=a.gb(c),d?(a=nh(a,1),c.insertBefore(b.f.M("DIV",a),c.firstChild||null)):c.removeChild(c.firstChild))}g.Ic=function(a){switch(a){case 2:return nh(this,0);case 16:case 8:return"goog-option-selected";default:return mh.m.Ic.call(this,a)}};g.ud=function(a){var b=nh(this,0);switch(a){case "goog-option-selected":return 16;case b:return 2;default:return mh.m.ud.call(this,a)}};g.T=function(){return"goog-menuitem"};function U(a,b,c,d){Kg.call(this,a,d||mh.ia(),c);this.dc=b}C(U,Kg);g=U.prototype;g.getValue=function(){var a=this.dc;return null!=a?a:this.Mb()};g.Ja=function(a,b){U.m.Ja.call(this,a,b);switch(a){case 8:this.pc()&&!b&&this.Td(!1);(a=this.j())&&this&&a&&ph(this.i,this,a,b);break;case 16:(a=this.j())&&this&&a&&ph(this.i,this,a,b)}};
g.Mb=function(){var a=this.wa;return Qa(a)?(a=zb(a,function(a){return Nd(a)&&(ig(a,"goog-menuitem-accel")||ig(a,"goog-menuitem-mnemonic-separator"))?"":Xd(a)}).join(""),Hb(a)):U.m.Mb.call(this)};g.Rb=function(a){var b=this.getParent();if(b){var c=b.i;b.i=null;if(c&&Ma(a.clientX)&&qd(c,new H(a.clientX,a.clientY)))return}U.m.Rb.call(this,a)};g.bc=function(a){return a.keyCode==this.Fe&&this.sb(a)?!0:U.m.bc.call(this,a)};g.hg=function(){return this.Fe};og("goog-menuitem",function(){return new U(null)});
U.prototype.Oc=function(){return Hg(this,16)?"menuitemcheckbox":Hg(this,8)?"menuitemradio":U.m.Oc.call(this)};U.prototype.getParent=function(){return Kg.prototype.getParent.call(this)};U.prototype.mc=function(){return Kg.prototype.mc.call(this)};function rh(a){this.f=a||"menu"}C(rh,rg);Oa(rh);g=rh.prototype;g.qe=function(a){return"UL"==a.tagName||rh.m.qe.call(this,a)};g.Jc=function(a){return"HR"==a.tagName?new gh:rh.m.Jc.call(this,a)};g.ob=function(a,b){return Od(a.j(),b)};g.Xb=function(){return"goog-menu"};g.se=function(a){rh.m.se.call(this,a);L(a.j(),"haspopup","true")};function sh(a){gh.call(this,fh.ia(),a)}C(sh,gh);og("goog-menuseparator",function(){return new gh});function th(a,b){Vg.call(this,xg,b||rh.ia(),a);dh(this,!1)}C(th,Vg);g=th.prototype;g.Cc=!0;g.ob=function(a){if(this.Hb.ob(this,a))return!0;for(var b=0,c=eg(this);b<c;b++){var d=T(this,b);if("function"==typeof d.ob&&d.ob(a))return!0}return!1};function uh(a,b){a.da(b,!0)}g.getPosition=function(){return this.$?tf(this.j()):null};g.K=function(a,b,c){(b=th.m.K.call(this,a,b))&&a&&this.N&&this.Cc&&Wg(this).focus();a&&c&&Ma(c.clientX)?this.i=new H(c.clientX,c.clientY):this.i=null;return b};
g.xe=function(a){this.Cc&&Wg(this).focus();return th.m.xe.call(this,a)};g.df=function(a){return a.isEnabled()&&a.Ca&&Hg(a,2)};g.xa=function(a){for(var b=this.Hb,c=wd(this.f.f,"DIV",b.Xb()+"-content",a),d=c.length,e=0;e<d;e++)ug(b,this,c[e]);th.m.xa.call(this,a)};g.te=function(a){var b=th.m.te.call(this,a);b||cg(this,function(c){!b&&c.hg&&c.Fe==a.keyCode&&(this.isEnabled()&&this.ib(gg(this,c)),b=c.hb(a))},this);return b};
g.ib=function(a){th.m.ib.call(this,a);var b=T(this,a);if(b){a=this.j()||Dd(document);var c=b.j();b=a||Dd(document);var d=tf(c),e=tf(b),f=Kf(b);if(b==Dd(document)){var h=d.x-b.scrollLeft;d=d.y-b.scrollTop;E&&!xc(10)&&(h+=f.left,d+=f.top)}else h=d.x-e.x-f.left,d=d.y-e.y-f.top;c=zf(c);f=b.clientHeight-c.height;e=b.scrollLeft;var k=b.scrollTop;e+=Math.min(h,Math.max(h-(b.clientWidth-c.width),0));k+=Math.min(d,Math.max(d-f,0));b=new H(e,k);a.scrollLeft=b.x;a.scrollTop=b.y}};function vh(a,b){Ue.call(this);this.h=a||1;this.f=b||A;this.i=ab(this.rh,this);this.l=cb()}C(vh,Ue);g=vh.prototype;g.enabled=!1;g.Gb=null;g.rh=function(){if(this.enabled){var a=cb()-this.l;0<a&&a<.8*this.h?this.Gb=this.f.setTimeout(this.i,this.h-a):(this.Gb&&(this.f.clearTimeout(this.Gb),this.Gb=null),this.dispatchEvent("tick"),this.enabled&&(this.stop(),this.start()))}};g.start=function(){this.enabled=!0;this.Gb||(this.Gb=this.f.setTimeout(this.i,this.h),this.l=cb())};
g.stop=function(){this.enabled=!1;this.Gb&&(this.f.clearTimeout(this.Gb),this.Gb=null)};g.G=function(){vh.m.G.call(this);this.stop();delete this.f};function wh(a,b,c){if(Ua(a))c&&(a=ab(a,c));else if(a&&"function"==typeof a.handleEvent)a=ab(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:A.setTimeout(a,b||0)};var xh=function(){if(lc){var a=/Windows NT ([0-9.]+)/;return(a=a.exec(Vb))?a[1]:"0"}return kc?(a=/10[_.][0-9_.]+/,(a=a.exec(Vb))?a[0].replace(/_/g,"."):"10"):nc?(a=/Android\s+([^\);]+)(\)|;)/,(a=a.exec(Vb))?a[1]:""):oc||pc||qc?(a=/(?:iPhone|CPU)\s+OS\s+(\S+)/,(a=a.exec(Vb))?a[1].replace(/_/g,"."):""):""}();var yh=Yb(),zh=$b()||D("iPod"),Ah=D("iPad"),Bh=D("Android")&&!(Zb()||Yb()||D("Opera")||D("Silk")),Ch=Zb(),Dh=D("Safari")&&!(Zb()||D("Coast")||D("Opera")||D("Edge")||Yb()||D("Silk")||D("Android"))&&!ac();function Eh(a){return(a=a.exec(Vb))?a[1]:""}var Fh=function(){if(yh)return Eh(/Firefox\/([0-9.]+)/);if(E||gc||fc)return tc;if(Ch)return ac()?Eh(/CriOS\/([0-9.]+)/):Eh(/Chrome\/([0-9.]+)/);if(Dh&&!ac())return Eh(/Version\/([0-9.]+)/);if(zh||Ah){var a=/Version\/(\S+).*Mobile\/(\S+)/.exec(Vb);if(a)return a[1]+"."+a[2]}else if(Bh)return(a=Eh(/Android\s+([0-9.]+)/))?a:Eh(/Version\/([0-9.]+)/);return""}();function Gh(a,b,c,d,e,f,h,k,l){var m=Hh(c),p=Af(a),r=sf(a);if(r){var q=new ef(r.left,r.top,r.right-r.left,r.bottom-r.top);r=Math.max(p.left,q.left);var t=Math.min(p.left+p.width,q.left+q.width);if(r<=t){var n=Math.max(p.top,q.top);q=Math.min(p.top+p.height,q.top+q.height);n<=q&&(p.left=r,p.top=n,p.width=t-r,p.height=q-n)}}r=td(a);n=td(c);if(r.f!=n.f){t=r.f.body;n=Ed(n.f);q=new H(0,0);var B=Fd(vd(t));if(cc(B,"parent")){var v=t;do{var F=B==n?tf(v):wf(v);q.x+=F.x;q.y+=F.y}while(B&&B!=n&&B!=B.parent&&
(v=B.frameElement)&&(B=B.parent))}t=rd(q,tf(t));!E||xc(9)||Ad(r.f)||(t=rd(t,Cd(r.f)));p.left+=t.x;p.top+=t.y}a=Ih(a,b);b=p.left;a&4?b+=p.width:a&2&&(b+=p.width/2);p=new H(b,p.top+(a&1?p.height:0));p=rd(p,m);e&&(p.x+=(a&4?-1:1)*e.x,p.y+=(a&1?-1:1)*e.y);if(h)if(l)var x=l;else if(x=sf(c))x.top-=m.y,x.right-=m.x,x.bottom-=m.y,x.left-=m.x;return Jh(p,c,d,f,x,h,k)}
function Hh(a){if(a=a.offsetParent){var b="HTML"==a.tagName||"BODY"==a.tagName;if(!b||"static"!=lf(a)){var c=tf(a);if(!b){b=Ef(a);var d;if(d=b){if(d=Dh)d=0<=Rb(Fh,10);var e;if(e=rc)e=0<=Rb(xh,10);d=ic||d||e}b=d?-a.scrollLeft:!b||hc&&G("8")||"visible"==kf(a,"overflowX")?a.scrollLeft:a.scrollWidth-a.clientWidth-a.scrollLeft;c=rd(c,new H(b,a.scrollTop))}}}return c||new H}
function Jh(a,b,c,d,e,f,h){a=a.clone();var k=Ih(b,c);c=yf(b);h=h?h.clone():c.clone();a=a.clone();h=h.clone();var l=0;if(d||0!=k)k&4?a.x-=h.width+(d?d.right:0):k&2?a.x-=h.width/2:d&&(a.x+=d.left),k&1?a.y-=h.height+(d?d.bottom:0):d&&(a.y+=d.top);if(f){if(e){d=a;k=h;l=0;65==(f&65)&&(d.x<e.left||d.x>=e.right)&&(f&=-2);132==(f&132)&&(d.y<e.top||d.y>=e.bottom)&&(f&=-5);d.x<e.left&&f&1&&(d.x=e.left,l|=1);if(f&16){var m=d.x;d.x<e.left&&(d.x=e.left,l|=4);d.x+k.width>e.right&&(k.width=Math.min(e.right-d.x,
m+k.width-e.left),k.width=Math.max(k.width,0),l|=4)}d.x+k.width>e.right&&f&1&&(d.x=Math.max(e.right-k.width,e.left),l|=1);f&2&&(l|=(d.x<e.left?16:0)|(d.x+k.width>e.right?32:0));d.y<e.top&&f&4&&(d.y=e.top,l|=2);f&32&&(m=d.y,d.y<e.top&&(d.y=e.top,l|=8),d.y+k.height>e.bottom&&(k.height=Math.min(e.bottom-d.y,m+k.height-e.top),k.height=Math.max(k.height,0),l|=8));d.y+k.height>e.bottom&&f&4&&(d.y=Math.max(e.bottom-k.height,e.top),l|=2);f&8&&(l|=(d.y<e.top?64:0)|(d.y+k.height>e.bottom?128:0));e=l}else e=
256;l=e}e=new ef(0,0,0,0);e.left=a.x;e.top=a.y;e.width=h.width;e.height=h.height;a=l;if(a&496)return a;mf(b,new H(e.left,e.top));h=e.getSize();c==h||c&&h&&c.width==h.width&&c.height==h.height||If(b,h);return a}function Ih(a,b){return(b&8&&Ef(a)?b^4:b)&-9};function Kh(){}Kh.prototype.f=function(){};function Lh(a,b,c){this.h=a;this.i=b;this.B=c}C(Lh,Kh);Lh.prototype.f=function(a,b,c){Gh(this.h,this.i,a,b,void 0,c,this.B)};function Mh(a,b,c,d){Lh.call(this,a,b);this.l=c?5:0;this.C=d||void 0}C(Mh,Lh);Mh.prototype.u=function(){return this.l};Mh.prototype.A=function(a){this.l=a};Mh.prototype.f=function(a,b,c,d){var e=Gh(this.h,this.i,a,b,null,c,10,d,this.C);if(e&496){var f=Nh(e,this.i);b=Nh(e,b);e=Gh(this.h,f,a,b,null,c,10,d,this.C);e&496&&(f=Nh(e,f),b=Nh(e,b),Gh(this.h,f,a,b,null,c,this.l,d,this.C))}};function Nh(a,b){a&48&&(b^=4);a&192&&(b^=1);return b};function Oh(){this.h=[]}C(Oh,mh);Oa(Oh);Oh.prototype.Sa=function(a){var b=Oh.m.Sa.call(this,a);jg(b,"goog-submenu");Ph(this,a,b);return b};Oh.prototype.na=function(a,b){b=Oh.m.na.call(this,a,b);jg(b,"goog-submenu");Ph(this,a,b);var c=wd(document,"DIV","goog-menu",b);if(c.length){var d=new th(a.f);c=c[0];N(c,!1);a.f.f.body.appendChild(c);bg(d,c);Qh(a,d)}return b};Oh.prototype.ac=function(a,b){var c=this.gb(a),d=c&&c.lastChild;Oh.m.ac.call(this,a,b);d&&c.lastChild!=d&&ig(d,"goog-submenu-arrow")&&c.appendChild(d)};
Oh.prototype.wd=function(a){Oh.m.wd.call(this,a);var b=a.Ia(),c=wd(a.f.f,"SPAN","goog-submenu-arrow",b)[0];Rh(a,c);c!=b.lastChild&&b.appendChild(c);L(a.j(),"haspopup","true")};function Ph(a,b,c){var d=b.f.M("SPAN");d.className="goog-submenu-arrow";Rh(b,d);a.gb(c).appendChild(d)}function Rh(a,b){fg(a)?(jg(b,"goog-submenu-arrow-rtl"),Pd(b,"\u25c4")):(lg(b,"goog-submenu-arrow-rtl"),Pd(b,"\u25ba"))};function Sh(a,b,c,d){U.call(this,a,b,c,d||Oh.ia())}C(Sh,U);g=Sh.prototype;g.Fc=null;g.Oe=null;g.Ee=!1;g.ta=null;g.rd=!1;g.I=function(){Sh.m.I.call(this);Q(this).listen(this.getParent(),"hide",this.Gf);this.ta&&Th(this,this.ta,!0)};g.ha=function(){Q(this).W(this.getParent(),"hide",this.Gf);this.ta&&(Th(this,this.ta,!1),this.rd||(this.ta.ha(),Kd(this.ta.j())));Sh.m.ha.call(this)};g.G=function(){this.ta&&!this.rd&&this.ta.dispose();this.ta=null;Sh.m.G.call(this)};
g.jb=function(a){Sh.m.jb.call(this,a);a||(this.Fc&&A.clearTimeout(this.Fc),this.Fc=wh(this.Cb,218,this))};g.Ne=function(){var a=this.getParent();a&&Zg(a)==this&&(Uh(this,!0),Vh(this))};g.Cb=function(){var a=this.ta;a&&a.getParent()==this&&(Uh(this,!1),cg(a,function(a){"function"==typeof a.Cb&&a.Cb()}))};function Wh(a){a.Fc&&A.clearTimeout(a.Fc);a.Oe&&A.clearTimeout(a.Oe)}g.K=function(a,b){(a=Sh.m.K.call(this,a,b))&&!this.Ca&&this.Cb();return a};
function Vh(a){cg(a.getParent(),function(a){a!=this&&"function"==typeof a.Cb&&(a.Cb(),Wh(a))},a)}g.hb=function(a){var b=a.keyCode,c=fg(this)?37:39,d=fg(this)?39:37;if(!this.Ee){if(!this.isEnabled()||b!=c&&b!=this.Fe)return!1;this.Ne();$g(Xh(this));Wh(this)}else if(!Xh(this).hb(a))if(b==d)this.Cb();else return!1;a.preventDefault();return!0};g.Zg=function(){if(this.ta.getParent()==this){Wh(this);var a=this.mc();a.ib(gg(a,this));Vh(this)}};g.Gf=function(a){a.target==this.mc()&&(this.Cb(),Wh(this))};
g.Rc=function(a){this.isEnabled()&&(Wh(this),this.Oe=wh(this.Ne,218,this));Sh.m.Rc.call(this,a)};g.sb=function(a){Wh(this);if(Hg(this,8)||Hg(this,16))return Sh.m.sb.call(this,a);this.Ne();return!0};
function Uh(a,b){!b&&Xh(a)&&Xh(a).ib(-1);a.dispatchEvent(Wf(64,b));var c=Xh(a);b!=a.Ee&&ng(a.j(),"goog-submenu-open",b);if(b!=c.$&&(b&&(c.N||c.render(),c.ib(-1)),c.K(b),b)){c=new Mh(a.j(),12,!1);var d=Xh(a),e=d.j();d.$||(e.style.visibility="hidden",N(e,!0));c.f(e,8);d.$||(N(e,!1),e.style.visibility="visible")}a.Ee=b}function Th(a,b,c){var d=Q(a);(c?d.listen:d.W).call(d,b,"enter",a.Zg)}function Yh(a,b){Xh(a).da(b,!0)}
function Xh(a){a.ta?a.rd&&a.ta.getParent()!=a&&Zf(a.ta,a):Qh(a,new th(a.f));a.ta.j()||a.ta.S();return a.ta}function Qh(a,b){var c=a.ta;b!=c&&(c&&(a.Cb(),a.N&&Th(a,c,!1)),a.ta=b,a.rd=!1,b&&(Zf(b,a),b.K(!1,!0),b.Cc=!1,dh(b,!1),a.N&&Th(a,b,!0)))}g.ob=function(a){return Xh(this).ob(a)};og("goog-submenu",function(){return new Sh(null)});function Zh(a,b,c,d){Mh.call(this,a,b,c||d);(c||d)&&this.A(65|(d?32:132))}C(Zh,Mh);function $h(){}C($h,yg);Oa($h);g=$h.prototype;g.$b=function(){return"button"};g.xb=function(a,b,c){switch(b){case 8:case 16:L(a,"pressed",c);break;default:case 64:case 1:$h.m.xb.call(this,a,b,c)}};g.Sa=function(a){var b=$h.m.Sa.call(this,a);this.Oa(b,a.Fb());var c=a.getValue();c&&this.rf(b,c);Hg(a,16)&&this.xb(b,16,a.pc());return b};g.na=function(a,b){b=$h.m.na.call(this,a,b);var c=this.getValue(b);a.Ya=c;a.Ud(this.Fb(b));Hg(a,16)&&this.xb(b,16,a.pc());return b};g.getValue=Na;g.rf=Na;g.Fb=function(a){return a.title};
g.Oa=function(a,b){a&&(b?a.title=b:a.removeAttribute("title"))};g.T=function(){return"goog-button"};function ai(){}C(ai,$h);Oa(ai);g=ai.prototype;g.$b=function(){};g.Sa=function(a){Lg(a,!1);a.Ec&=-256;a.Ja(32,!1);return a.f.M("BUTTON",{"class":Bg(this,a).join(" "),disabled:!a.isEnabled(),title:a.Fb()||"",value:a.getValue()||""},a.Mb()||"")};g.ue=function(a){return"BUTTON"==a.tagName||"INPUT"==a.tagName&&("button"==a.type||"submit"==a.type||"reset"==a.type)};g.na=function(a,b){Lg(a,!1);a.Ec&=-256;a.Ja(32,!1);if(b.disabled){var c=this.Ic(1);jg(b,c)}return ai.m.na.call(this,a,b)};
g.wd=function(a){Q(a).listen(a.j(),"click",a.sb)};g.ve=Na;g.tf=Na;g.sf=function(a){return a.isEnabled()};g.Nc=Na;g.Na=function(a,b,c){ai.m.Na.call(this,a,b,c);(a=a.j())&&1==b&&(a.disabled=c)};g.getValue=function(a){return a.value};g.rf=function(a,b){a&&(a.value=b)};g.xb=Na;function bi(a,b,c){Kg.call(this,a,b||ai.ia(),c)}C(bi,Kg);g=bi.prototype;g.getValue=function(){return this.Ya};g.Fb=function(){return this.Y};g.Oa=function(a){this.Y=a;this.i.Oa(this.j(),a)};g.Ud=function(a){this.Y=a};g.G=function(){bi.m.G.call(this);delete this.Ya;delete this.Y};g.I=function(){bi.m.I.call(this);if(Hg(this,32)){var a=this.j();a&&Q(this).listen(a,"keyup",this.bc)}};g.bc=function(a){return 13==a.keyCode&&"key"==a.type||32==a.keyCode&&"keyup"==a.type?this.sb(a):32==a.keyCode};
og("goog-button",function(){return new bi(null)});function ci(){}C(ci,$h);Oa(ci);g=ci.prototype;g.Sa=function(a){var b=Bg(this,a);b=a.f.M("DIV","goog-inline-block "+b.join(" "),this.od(a.wa,a.f));this.Oa(b,a.Fb());return b};g.$b=function(){return"button"};g.gb=function(a){return a&&a.firstChild&&a.firstChild.firstChild};g.od=function(a,b){return b.M("DIV","goog-inline-block "+(this.T()+"-outer-box"),b.M("DIV","goog-inline-block "+(this.T()+"-inner-box"),a))};g.ue=function(a){return"DIV"==a.tagName};
g.na=function(a,b){di(b,!0);di(b,!1);a:{var c=a.f.pf(b);var d=this.T()+"-outer-box";if(c&&ig(c,d)&&(c=a.f.pf(c),d=this.T()+"-inner-box",c&&ig(c,d))){c=!0;break a}c=!1}c||b.appendChild(this.od(b.childNodes,a.f));kg(b,["goog-inline-block",this.T()]);return ci.m.na.call(this,a,b)};g.T=function(){return"goog-custom-button"};
function di(a,b){if(a)for(var c=b?a.firstChild:a.lastChild,d;c&&c.parentNode==a;){d=b?c.nextSibling:c.previousSibling;if(3==c.nodeType){var e=c.nodeValue;if(""==Ib(e))a.removeChild(c);else{c.nodeValue=b?e.replace(/^[\s\xa0]+/,""):e.replace(/[\s\xa0]+$/,"");break}}else break;c=d}};function ei(){}C(ei,ci);Oa(ei);ei.prototype.gb=function(a){return ei.m.gb.call(this,a&&a.firstChild)};ei.prototype.na=function(a,b){var c=wd(document,"*","goog-menu",b)[0];if(c){N(c,!1);vd(c).body.appendChild(c);var d=new th;bg(d,c);fi(a,d)}return ei.m.na.call(this,a,b)};ei.prototype.od=function(a,b){return ei.m.od.call(this,[b.M("DIV","goog-inline-block "+(this.T()+"-caption"),a),b.M("DIV","goog-inline-block "+(this.T()+"-dropdown"),"\u00a0")],b)};ei.prototype.T=function(){return"goog-menu-button"};function gi(a,b,c,d,e){bi.call(this,a,c||ei.ia(),d);this.Ja(64,!0);this.O=new Zh(null,9);b&&fi(this,b);this.D=new vh(500);!zh&&!Ah||G("533.17.9")||(this.Kd=!0);e||rh.ia()}C(gi,bi);g=gi.prototype;g.Kd=!1;g.I=function(){gi.m.I.call(this);hi(this,!0);this.h&&ii(this,this.h,!0);L(this.w,"haspopup",!!this.h)};g.ha=function(){gi.m.ha.call(this);hi(this,!1);if(this.h){this.sa(!1);this.h.ha();ii(this,this.h,!1);var a=this.h.j();a&&Kd(a)}};
g.G=function(){gi.m.G.call(this);this.h&&(this.h.dispose(),delete this.h);delete this.jc;this.D.dispose()};g.oc=function(a){gi.m.oc.call(this,a);Ig(this,4)&&(this.sa(!Ig(this,64),a),this.h&&(this.h.rb=Ig(this,64)))};g.Rb=function(a){gi.m.Rb.call(this,a);this.h&&!Ig(this,4)&&(this.h.rb=!1)};g.sb=function(){Pg(this,!1);return!0};g.vg=function(a){this.h&&this.h.$&&!this.ob(a.target)&&this.sa(!1)};g.ob=function(a){return a&&Od(this.j(),a)||this.h&&this.h.ob(a)||!1};
g.bc=function(a){if(32==a.keyCode){if(a.preventDefault(),"keyup"!=a.type)return!0}else if("key"!=a.type)return!1;if(this.h&&this.h.$){var b=13==a.keyCode||32==a.keyCode,c=this.h.hb(a);return 27==a.keyCode||b?(this.sa(!1),!0):c}return 40==a.keyCode||38==a.keyCode||32==a.keyCode||13==a.keyCode?(this.sa(!0,a),!0):!1};g.Dg=function(){this.sa(!1)};g.Eg=function(){Ig(this,4)||this.sa(!1)};g.xd=function(a){this.Kd||this.sa(!1);gi.m.xd.call(this,a)};
function fi(a,b){var c=a.h;b!=c&&(c&&(a.sa(!1),a.N&&ii(a,c,!1),delete a.h),a.N&&L(a.w,"haspopup",!!b),b&&(a.h=b,Zf(b,a),b.K(!1),c=a.Kd,(b.Cc=c)&&dh(b,!0),a.N&&ii(a,b,!0)))}g.K=function(a,b){(a=gi.m.K.call(this,a,b))&&!this.Ca&&this.sa(!1);return a};g.Fa=function(a){gi.m.Fa.call(this,a);this.isEnabled()||this.sa(!1)};
g.sa=function(a,b){gi.m.sa.call(this,a);if(this.h&&Ig(this,64)==a){if(a)this.h.N||this.h.render(),this.yb=sf(this.j()),this.fa=Af(this.j()),ji(this),!b||40!=b.keyCode&&38!=b.keyCode?this.h.ib(-1):$g(this.h);else{Pg(this,!1);this.h.rb=!1;var c=this.j();c&&(L(c,"activedescendant",""),L(c,"owns",""));null!=this.V&&(this.V=void 0,(c=this.h.j())&&xf(c,"",""))}this.h.K(a,!1,b);this.fb||(b=Q(this),c=a?b.listen:b.W,c.call(b,this.f.f,"mousedown",this.vg,!0),this.Kd&&c.call(b,this.h,"blur",this.Eg),c.call(b,
this.D,"tick",this.gh),a?this.D.start():this.D.stop())}this.h&&this.h.j()&&this.h.w.removeAttribute("aria-hidden")};function ji(a){if(a.h.N){var b=a.O;a.O.h=a.jc||a.j();var c=a.h.j();a.h.$||(c.style.visibility="hidden",N(c,!0));!a.V&&a.O.u&&a.O.l&32&&(a.V=yf(c));b.f(c,b.i^1,null,a.V);a.h.$||(N(c,!1),c.style.visibility="visible")}}
g.gh=function(){var a=Af(this.j()),b=sf(this.j());var c=this.fa;(c=!(c==a||c&&a&&c.left==a.left&&c.width==a.width&&c.top==a.top&&c.height==a.height))||(c=this.yb,c=!(c==b||c&&b&&c.top==b.top&&c.right==b.right&&c.bottom==b.bottom&&c.left==b.left));c&&(this.fa=a,this.yb=b,ji(this))};function ii(a,b,c){var d=Q(a);c=c?d.listen:d.W;c.call(d,b,"action",a.Dg);c.call(d,b,"close",a.qg);c.call(d,b,"highlight",a.rg);c.call(d,b,"unhighlight",a.sg)}
function hi(a,b){var c=Q(a);(b?c.listen:c.W).call(c,a.j(),"keydown",a.Bg)}g.rg=function(a){(a=a.target.j())&&ki(this,a)};g.Bg=function(a){Hg(this,32)&&this.j()&&this.h&&this.h.$&&a.stopPropagation()};g.sg=function(){if(!Zg(this.h)){var a=this.j();L(a,"activedescendant","");L(a,"owns","")}};g.qg=function(a){if(Ig(this,64)&&a.target instanceof U){a=a.target;var b=a.j();a.Ca&&Ig(a,2)&&null!=b&&ki(this,b)}};
function ki(a,b){a=a.j();var c=$d(b,"activedescendant");b=vd(b).getElementById(c)||b;b.id||(c=Uf.ia(),b.id=":"+(c.f++).toString(36));ae(a,b);L(a,"owns",b.id)}og("goog-menu-button",function(){return new gi(null)});function li(){}C(li,ei);Oa(li);li.prototype.T=function(){return"goog-toolbar-menu-button"};function mi(a,b,c,d){gi.call(this,a,b,c||li.ia(),d)}C(mi,gi);og("goog-toolbar-menu-button",function(){return new mi(null)});function ni(){}C(ni,ci);Oa(ni);ni.prototype.T=function(){return"goog-toolbar-button"};function oi(a,b,c){bi.call(this,a,b||ni.ia(),c)}C(oi,bi);og("goog-toolbar-button",function(){return new oi(null)});function pi(a,b,c){Ue.call(this);this.target=a;this.handle=b||a;this.u=c||new ef(NaN,NaN,NaN,NaN);this.i=vd(a);this.f=new Qf(this);pe(this,bb(qe,this.f));this.deltaY=this.deltaX=this.O=this.ua=this.screenY=this.screenX=this.clientY=this.clientX=0;this.C=!0;this.l=this.h=!1;M(this.handle,["touchstart","mousedown"],this.Nf,!1,this);this.A=qi}C(pi,Ue);var qi=A.document&&A.document.documentElement&&!!A.document.documentElement.setCapture&&!!A.document.releaseCapture;
function ri(a,b){a.u=b||new ef(NaN,NaN,NaN,NaN)}g=pi.prototype;g.Fa=function(a){this.C=a};g.G=function(){pi.m.G.call(this);Pe(this.handle,["touchstart","mousedown"],this.Nf,!1,this);Tf(this.f);this.A&&this.i.releaseCapture();this.handle=this.target=null};function si(a){Ka(a.D)||(a.D=Ef(a.target));return a.D}
g.Nf=function(a){var b="mousedown"==a.type;if(!this.C||this.h||b&&!we(a))this.dispatchEvent("earlycancel");else if(this.dispatchEvent(new ti("start",this,a.clientX,a.clientY,a))){this.h=!0;b&&a.preventDefault();b=this.i;var c=b.documentElement,d=!this.A;this.f.listen(b,["touchmove","mousemove"],this.Fg,{capture:d,passive:!1});this.f.listen(b,["touchend","mouseup"],this.qd,d);this.A?(c.setCapture(!1),this.f.listen(c,"losecapture",this.qd)):this.f.listen(Fd(b),"blur",this.qd);this.V&&this.f.listen(this.V,
"scroll",this.dh,d);this.clientX=this.ua=a.clientX;this.clientY=this.O=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.l?(a=this.target,b=a.offsetLeft,c=a.offsetParent,c||"fixed"!=lf(a)||(c=vd(a).documentElement),c?(ic&&!G(58)?(d=Kf(c),b+=d.left):xc(8)&&!xc(9)&&(d=Kf(c),b-=d.left),a=Ef(c)?c.clientWidth-(b+a.offsetWidth):b):a=b):a=this.target.offsetLeft;this.deltaX=a;this.deltaY=this.target.offsetTop;this.B=Cd(td(this.i).f)}};
g.qd=function(a,b){Tf(this.f);this.A&&this.i.releaseCapture();this.h?(this.h=!1,this.dispatchEvent(new ti("end",this,a.clientX,a.clientY,a,ui(this,this.deltaX),vi(this,this.deltaY),b||"touchcancel"==a.type))):this.dispatchEvent("earlycancel")};
g.Fg=function(a){if(this.C){var b=(this.l&&si(this)?-1:1)*(a.clientX-this.clientX),c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.h){var d=this.ua-this.clientX,e=this.O-this.clientY;if(0<d*d+e*e)if(this.dispatchEvent(new ti("start",this,a.clientX,a.clientY,a)))this.h=!0;else{this.fb||this.qd(a);return}}c=wi(this,b,c);b=c.x;c=c.y;this.h&&this.dispatchEvent(new ti("beforedrag",this,a.clientX,a.clientY,a,b,c))&&(xi(this,a,
b,c),a.preventDefault())}};function wi(a,b,c){var d=Cd(td(a.i).f);b+=d.x-a.B.x;c+=d.y-a.B.y;a.B=d;a.deltaX+=b;a.deltaY+=c;return new H(ui(a,a.deltaX),vi(a,a.deltaY))}g.dh=function(a){var b=wi(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;xi(this,a,b.x,b.y)};function xi(a,b,c,d){a.je(c,d);a.dispatchEvent(new ti("drag",a,b.clientX,b.clientY,b,c,d))}
function ui(a,b){var c=a.u;a=isNaN(c.left)?null:c.left;c=isNaN(c.width)?0:c.width;return Math.min(null!=a?a+c:Infinity,Math.max(null!=a?a:-Infinity,b))}function vi(a,b){var c=a.u;a=isNaN(c.top)?null:c.top;c=isNaN(c.height)?0:c.height;return Math.min(null!=a?a+c:Infinity,Math.max(null!=a?a:-Infinity,b))}g.je=function(a,b){this.l&&si(this)?this.target.style.right=a+"px":this.target.style.left=a+"px";this.target.style.top=b+"px"};
function ti(a,b,c,d,e,f,h){se.call(this,a);this.clientX=c;this.clientY=d;this.left=Ka(f)?f:b.deltaX;this.top=Ka(h)?h:b.deltaY;this.f=b}C(ti,se);function yi(a,b){this.h={};this.f=[];this.i=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a)if(a instanceof yi)for(c=zi(a),d=0;d<c.length;d++)this.set(c[d],a.get(c[d]));else for(d in a)this.set(d,a[d])}function zi(a){Ai(a);return a.f.concat()}g=yi.prototype;
g.equals=function(a,b){if(this===a)return!0;if(this.i!=a.i)return!1;b=b||Bi;Ai(this);for(var c,d=0;c=this.f[d];d++)if(!b(this.get(c),a.get(c)))return!1;return!0};function Bi(a,b){return a===b}g.clear=function(){this.h={};this.i=this.f.length=0};g.remove=function(a){return Ci(this.h,a)?(delete this.h[a],this.i--,this.f.length>2*this.i&&Ai(this),!0):!1};
function Ai(a){if(a.i!=a.f.length){for(var b=0,c=0;b<a.f.length;){var d=a.f[b];Ci(a.h,d)&&(a.f[c++]=d);b++}a.f.length=c}if(a.i!=a.f.length){var e={};for(c=b=0;b<a.f.length;)d=a.f[b],Ci(e,d)||(a.f[c++]=d,e[d]=1),b++;a.f.length=c}}g.get=function(a,b){return Ci(this.h,a)?this.h[a]:b};g.set=function(a,b){Ci(this.h,a)||(this.i++,this.f.push(a));this.h[a]=b};g.forEach=function(a,b){for(var c=zi(this),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};g.clone=function(){return new yi(this)};
g.transpose=function(){for(var a=new yi,b=0;b<this.f.length;b++){var c=this.f[b];a.set(this.h[c],c)}return a};function Ci(a,b){return Object.prototype.hasOwnProperty.call(a,b)};(function(){for(var a=["ms","moz","webkit","o"],b=0,c;c=a[b]&&!A.requestAnimationFrame;++b)A.requestAnimationFrame=A[c+"RequestAnimationFrame"],A.cancelAnimationFrame=A[c+"CancelAnimationFrame"]||A[c+"CancelRequestAnimationFrame"];if(!A.requestAnimationFrame){var d=0;A.requestAnimationFrame=function(a){var b=(new Date).getTime(),c=Math.max(0,16-(b-d));d=b+c;return A.setTimeout(function(){a(b+c)},c)};A.cancelAnimationFrame||(A.cancelAnimationFrame=function(a){clearTimeout(a)})}})();
var Di=[[],[]],Ei=0,Fi=!1,Gi=0;function Hi(a,b){var c=Gi++,d={Qg:{id:c,Hc:a.measure,context:b},Tg:{id:c,Hc:a.Sg,context:b},state:{},$a:void 0,Ld:!1};return function(){0<arguments.length?(d.$a||(d.$a=[]),d.$a.length=0,d.$a.push.apply(d.$a,arguments),d.$a.push(d.state)):d.$a&&0!=d.$a.length?(d.$a[0]=d.state,d.$a.length=1):d.$a=[d.state];d.Ld||(d.Ld=!0,Di[Ei].push(d));Fi||(Fi=!0,window.requestAnimationFrame(Ii))}}
function Ii(){Fi=!1;var a=Di[Ei],b=a.length;Ei=(Ei+1)%2;for(var c,d=0;d<b;++d){c=a[d];var e=c.Qg;c.Ld=!1;e.Hc&&e.Hc.apply(e.context,c.$a)}for(d=0;d<b;++d)c=a[d],e=c.Tg,c.Ld=!1,e.Hc&&e.Hc.apply(e.context,c.$a),c.state={};a.length=0};var Ji=E?Mc(Ic(new Fc(Gc,'javascript:""'))):Mc(Ic(new Fc(Gc,"about:blank")));Lc(Ji);var Ki=E?Mc(Ic(new Fc(Gc,'javascript:""'))):Mc(Ic(new Fc(Gc,"javascript:undefined")));Lc(Ki);function Li(a){Ue.call(this);this.w=a;a=E?"focusout":"blur";this.f=M(this.w,E?"focusin":"focus",this,!E);this.h=M(this.w,a,this,!E)}C(Li,Ue);Li.prototype.handleEvent=function(a){var b=new te(a.f);b.type="focusin"==a.type||"focus"==a.type?"focusin":"focusout";this.dispatchEvent(b)};Li.prototype.G=function(){Li.m.G.call(this);Qe(this.f);Qe(this.h);delete this.w};function Mi(a,b){this.w=a;this.h=b};function Ni(a,b){P.call(this,b);this.fa=!!a;this.l=null;this.Y=Hi({Sg:this.Sd},this)}C(Ni,P);g=Ni.prototype;g.oe=null;g.Qb=!1;g.ab=null;g.Ga=null;g.lb=null;g.ie=!1;g.Pc=function(){return"goog-modalpopup"};g.td=function(){return this.ab};g.S=function(){Ni.m.S.call(this);var a=this.j(),b=Ib(this.Pc()).split(" ");kg(a,b);Ud(a,!0);N(a,!1);Oi(this);Pi(this)};
function Oi(a){if(a.fa&&!a.Ga){var b=a.f.M("IFRAME",{frameborder:0,style:"border:0;vertical-align:bottom;"});b.src=Lc(Ji);a.Ga=b;a.Ga.className=a.Pc()+"-bg";N(a.Ga,!1);Bf(a.Ga,0)}a.ab||(a.ab=a.f.M("DIV",a.Pc()+"-bg"),N(a.ab,!1))}function Pi(a){a.lb||(a.lb=a.f.f.createElement("SPAN"),N(a.lb,!1),Ud(a.lb,!0),a.lb.style.position="absolute")}g.If=function(){this.ie=!1};g.Lc=function(a){return!!a&&"DIV"==a.tagName};
g.xa=function(a){Ni.m.xa.call(this,a);a=Ib(this.Pc()).split(" ");kg(this.j(),a);Oi(this);Pi(this);Ud(this.j(),!0);N(this.j(),!1)};g.I=function(){if(this.Ga){var a=this.j();a.parentNode&&a.parentNode.insertBefore(this.Ga,a)}a=this.j();a.parentNode&&a.parentNode.insertBefore(this.ab,a);Ni.m.I.call(this);a=this.j();a.parentNode&&a.parentNode.insertBefore(this.lb,a.nextSibling);this.oe=new Li(this.f.f);Q(this).listen(this.oe,"focusin",this.ah);Qi(this,!1)};
g.ha=function(){this.Qb&&this.K(!1);qe(this.oe);Ni.m.ha.call(this);Kd(this.Ga);Kd(this.ab);Kd(this.lb)};
g.K=function(a){if(a!=this.Qb)if(this.B&&this.B.stop(),this.O&&this.O.stop(),this.u&&this.u.stop(),this.D&&this.D.stop(),this.N&&Qi(this,a),a){if(this.dispatchEvent("beforeshow")){try{this.l=this.f.f.activeElement}catch(e){}this.Sd();var b=Fd(this.f.f)||window;if("fixed"==lf(this.j()))var c=a=0;else c=Cd(this.f.f),a=c.x,c=c.y;var d=yf(this.j());b=zd(b||window);a=Math.max(a+b.width/2-d.width/2,0);c=Math.max(c+b.height/2-d.height/2,0);mf(this.j(),a,c);mf(this.lb,a,c);Q(this).listen(Ed(this.f.f),"resize",
this.Sd).listen(Ed(this.f.f),"orientationchange",this.Y);Ri(this,!0);this.kf();this.Qb=!0;this.B&&this.O?(Ie(this.B,"end",this.zd,!1,this),this.O.play(),this.B.play()):this.zd()}}else if(this.dispatchEvent("beforehide")){Q(this).W(Ed(this.f.f),"resize",this.Sd).W(Ed(this.f.f),"orientationchange",this.Y);this.Qb=!1;this.u&&this.D?(Ie(this.u,"end",this.yd,!1,this),this.D.play(),this.u.play()):this.yd();a:{try{c=this.f;d=c.f.body;b=c.f.activeElement||d;if(!this.l||this.l==d){this.l=null;break a}(b==
d||c.jg(this.j(),b))&&this.l.focus()}catch(e){}this.l=null}}};function Qi(a,b){a.V||(a.V=new Mi(a.w,a.f));a=a.V;if(b){a.f||(a.f=[]);b=a.h.gg(a.h.f.body);for(var c=0;c<b.length;c++){var d=b[c];d==a.w||$d(d,"hidden")||(L(d,"hidden",!0),a.f.push(d))}}else if(a.f){for(c=0;c<a.f.length;c++)a.f[c].removeAttribute("aria-hidden");a.f=null}}function Ri(a,b){a.Ga&&N(a.Ga,b);a.ab&&N(a.ab,b);N(a.j(),b);N(a.lb,b)}g.zd=function(){this.dispatchEvent("show")};g.yd=function(){Ri(this,!1);this.dispatchEvent("hide")};
g.Sd=function(){this.Ga&&N(this.Ga,!1);this.ab&&N(this.ab,!1);var a=this.f.f,b=zd(Fd(a)||window||window),c=Math.max(b.width,Math.max(a.body.scrollWidth,a.documentElement.scrollWidth));a=Math.max(b.height,Math.max(a.body.scrollHeight,a.documentElement.scrollHeight));this.Ga&&(N(this.Ga,!0),xf(this.Ga,c,a));this.ab&&(N(this.ab,!0),xf(this.ab,c,a))};g.ah=function(a){this.ie?this.If():a.target==this.lb&&wh(this.kf,0,this)};g.kf=function(){try{E&&this.f.f.body.focus(),this.j().focus()}catch(a){}};
g.G=function(){qe(this.B);this.B=null;qe(this.u);this.u=null;qe(this.O);this.O=null;qe(this.D);this.D=null;Ni.m.G.call(this)};function Si(a,b,c){Ni.call(this,b,c);this.i=a||"modal-dialog";this.h=Ti(Ti(new Ui,Vi,!0),Wi,!1,!0)}C(Si,Ni);g=Si.prototype;g.Qd=!0;g.hd=.5;g.Re="";g.wa=null;g.Lb=null;g.hf=!1;g.Pa=null;g.Qa=null;g.Xd=null;g.Va=null;g.Bb=null;g.Ba=null;g.Pc=function(){return this.i};function Xi(a,b){a.Re=b;a.Qa&&Pd(a.Qa,b)}g.Ia=function(){this.j()||this.render();return this.Bb};function Yi(a){a.j()||a.render();return a.Pa}g.td=function(){this.j()||this.render();return Si.m.td.call(this)};
function Zi(a,b){a.hd=b;a.j()&&(b=a.td())&&Bf(b,a.hd)}function $i(a){a.Qd=!1;if(a.N){var b=a.f,c=a.td();b.qf(a.Ga);b.qf(c)}a.Qb&&Qi(a,!1)}function aj(a,b){var c=Ib(a.i+"-title-draggable").split(" ");a.j()&&(b?kg(a.Pa,c):mg(a.Pa,c));b&&!a.Lb?(a.Lb=new pi(a.j(),a.Pa),kg(a.Pa,c),M(a.Lb,"start",a.oh,!1,a)):!b&&a.Lb&&(a.Lb.dispose(),a.Lb=null)}
g.S=function(){Si.m.S.call(this);var a=this.j(),b=this.f;this.Pa=b.M("DIV",this.i+"-title",this.Qa=b.M("SPAN",{className:this.i+"-title-text",id:Xf(this)},this.Re),this.Va=b.M("SPAN",this.i+"-title-close"));Id(a,this.Pa,this.Bb=b.M("DIV",this.i+"-content"),this.Ba=b.M("DIV",this.i+"-buttons"));Zd(this.Qa,"heading");Zd(this.Va,"button");Ud(this.Va,!0);L(this.Va,"label","Close");this.Xd=this.Qa.id;Zd(a,"dialog");L(a,"labelledby",this.Xd||"");this.wa&&od(this.Bb,this.wa);N(this.Va,!0);this.h&&(a=this.h,
a.w=this.Ba,a.render());N(this.Ba,!!this.h);Zi(this,this.hd)};
g.xa=function(a){Si.m.xa.call(this,a);a=this.j();var b=this.i+"-content";this.Bb=wd(document,null,b,a)[0];this.Bb||(this.Bb=this.f.M("DIV",b),this.wa&&od(this.Bb,this.wa),a.appendChild(this.Bb));b=this.i+"-title";var c=this.i+"-title-text",d=this.i+"-title-close";(this.Pa=wd(document,null,b,a)[0])?(this.Qa=wd(document,null,c,this.Pa)[0],this.Va=wd(document,null,d,this.Pa)[0]):(this.Pa=this.f.M("DIV",b),a.insertBefore(this.Pa,this.Bb));this.Qa?(this.Re=Vd(this.Qa),this.Qa.id||(this.Qa.id=Xf(this))):
(this.Qa=J("SPAN",{className:c,id:Xf(this)}),this.Pa.appendChild(this.Qa));this.Xd=this.Qa.id;L(a,"labelledby",this.Xd||"");this.Va||(this.Va=this.f.M("SPAN",d),this.Pa.appendChild(this.Va));N(this.Va,!0);b=this.i+"-buttons";if(this.Ba=wd(document,null,b,a)[0]){if(a=this.h=new Ui(this.f),(b=this.Ba)&&1==b.nodeType){a.w=b;b=(a.w||document).getElementsByTagName("BUTTON");c=0;for(var e,f;d=b[c];c++)if(e=d.name||d.id,f=Vd(d)||d.value,e){var h=0==c;a.set(e,f,h,d.name==bj);h&&jg(d,"goog-buttonset-default")}}}else this.Ba=
this.f.M("DIV",b),a.appendChild(this.Ba),this.h&&(a=this.h,a.w=this.Ba,a.render()),N(this.Ba,!!this.h);Zi(this,this.hd)};g.I=function(){Si.m.I.call(this);Q(this).listen(this.j(),"keydown",this.Ff).listen(this.j(),"keypress",this.Ff);Q(this).listen(this.Ba,"click",this.Yg);aj(this,!0);Q(this).listen(this.Va,"click",this.hh);var a=this.j();Zd(a,"dialog");""!==this.Qa.id&&L(a,"labelledby",this.Qa.id);this.Qd||$i(this)};g.ha=function(){this.Qb&&this.K(!1);aj(this,!1);Si.m.ha.call(this)};
g.K=function(a){a!=this.Qb&&(this.N||this.render(),Si.m.K.call(this,a))};g.zd=function(){Si.m.zd.call(this);this.dispatchEvent(cj)};g.yd=function(){Si.m.yd.call(this);this.dispatchEvent(dj);this.hf&&this.dispose()};
g.oh=function(){var a=this.f.f,b=zd(Fd(a)||window||window),c=Math.max(a.body.scrollWidth,b.width);a=Math.max(a.body.scrollHeight,b.height);var d=yf(this.j());"fixed"==lf(this.j())?ri(this.Lb,new ef(0,0,Math.max(0,b.width-d.width),Math.max(0,b.height-d.height))):ri(this.Lb,new ef(0,0,c-d.width,a-d.height))};g.hh=function(){ej(this)};function ej(a){var b=a.h,c=b&&b.md;c?(b=b.get(c),a.dispatchEvent(new fj(c,b))&&a.K(!1)):a.K(!1)}g.G=function(){this.Ba=this.Va=null;Si.m.G.call(this)};
function gj(a,b){a.h=b;a.Ba&&(a.h?(b=a.h,b.w=a.Ba,b.render()):od(a.Ba,ld),N(a.Ba,!!a.h))}g.Yg=function(a){a:{for(a=a.target;null!=a&&a!=this.Ba;){if("BUTTON"==a.tagName)break a;a=a.parentNode}a=null}if(a&&!a.disabled){a=a.name;var b=this.h.get(a);this.dispatchEvent(new fj(a,b))&&this.K(!1)}};
g.Ff=function(a){var b=!1,c=!1,d=this.h,e=a.target;if("keydown"==a.type)if(27==a.keyCode){var f=d&&d.md;e="SELECT"==e.tagName&&!e.disabled;f&&!e?(c=!0,b=d.get(f),b=this.dispatchEvent(new fj(f,b))):e||(b=!0)}else{if(9==a.keyCode&&a.shiftKey&&e==this.j()){this.ie=!0;try{this.lb.focus()}catch(l){}wh(this.If,0,this)}}else if(13==a.keyCode){if("BUTTON"==e.tagName&&!e.disabled)f=e.name;else if(e==this.Va)ej(this);else if(d){var h=d.pd,k=h&&hj(d,h);e=("TEXTAREA"==e.tagName||"SELECT"==e.tagName||"A"==e.tagName)&&
!e.disabled;!k||k.disabled||e||(f=h)}f&&d&&(c=!0,b=this.dispatchEvent(new fj(f,String(d.get(f)))))}else e!=this.Va||32!=a.keyCode&&" "!=a.key||ej(this);if(b||c)a.stopPropagation(),a.preventDefault();b&&this.K(!1)};function fj(a,b){this.type=ij;this.key=a;this.caption=b}C(fj,se);var ij="dialogselect",dj="afterhide",cj="aftershow";function Ui(a){a||td();yi.call(this)}C(Ui,yi);g=Ui.prototype;g.pd=null;g.w=null;g.md=null;g.clear=function(){yi.prototype.clear.call(this);this.pd=this.md=null};
g.set=function(a,b,c,d){yi.prototype.set.call(this,a,b);c&&(this.pd=a);d&&(this.md=a);return this};function Ti(a,b,c,d){return a.set(b.key,b.caption,c,d)}g.render=function(){if(this.w){od(this.w,ld);var a=td(this.w);this.forEach(function(b,c){b=a.M("BUTTON",{name:c},b);c==this.pd&&(b.className="goog-buttonset-default");this.w.appendChild(b)},this)}};g.j=function(){return this.w};
function hj(a,b){a=(a.w||document).getElementsByTagName("BUTTON");for(var c=0,d;d=a[c];c++)if(d.name==b||d.id==b)return d;return null}function jj(a,b,c){if(a=hj(a,b))a.disabled=!c}var bj="cancel",Vi={key:"ok",caption:"OK"},Wi={key:bj,caption:"Cancel"},kj={key:"yes",caption:"Yes"},lj={key:"no",caption:"No"},mj={key:"save",caption:"Save"},nj={key:"continue",caption:"Continue"};
"undefined"!=typeof document&&(Ti(new Ui,Vi,!0,!0),Ti(Ti(new Ui,Vi,!0),Wi,!1,!0),Ti(Ti(new Ui,kj,!0),lj,!1,!0),Ti(Ti(Ti(new Ui,kj),lj,!0),Wi,!1,!0),Ti(Ti(Ti(new Ui,nj),mj),Wi,!0,!0));function oj(){this.f=new Si;this.f.Ia();Yi(this.f).style.background="#5f6063";this.f.Ia().style.background="#909090"}oj.prototype.log=function(){console.log("this.dialog",this.f)};oj.prototype.listen=function(a){M(this.f,ij,a)};function pj(a,b){a.f.Ia().innerHTML=b}oj.prototype.setSize=function(a,b){xf(this.f.Ia(),a,b)};function qj(a,b,c,d){P.call(this,d);this.D=c;this.i=a;this.da(a);this.l=b;this.da(b);this.h=null}C(qj,P);g=qj.prototype;g.gc=null;g.La=null;g.tc=null;g.Ed=5;g.Mf=null;g.ne=null;g.pb=null;g.S=function(){var a=this.f,b=a.M("DIV","goog-splitpane-first-container"),c=a.M("DIV","goog-splitpane-second-container"),d=a.M("DIV","goog-splitpane-handle");this.w=a.M("DIV","goog-splitpane",b,c,d);this.La=b;this.tc=c;this.h=d;rj(this);sj(this)};
g.Lc=function(a){var b=tj(a,"goog-splitpane-first-container");if(!b)return!1;this.La=b;b=tj(a,"goog-splitpane-second-container");if(!b)return!1;this.tc=b;a=tj(a,"goog-splitpane-handle");if(!a)return!1;this.h=a;return!0};function tj(a,b){for(var c=Ld(a),d=0;d<c.length;d++){var e=c[d];if(ig(e,b))return e}return wd(document,null,b,a)[0]}g.xa=function(a){qj.m.xa.call(this,a);rj(this);a=Hf(a);this.setSize(new sd(a.width,a.height));sj(this)};
function sj(a){var b=a.f;a.i.j()||a.i.S();b.appendChild(a.La,a.i.j());a.l.j()||a.l.S();b.appendChild(a.tc,a.l.j());a.gc=new pi(a.h,a.h);a.La.style.position="absolute";a.tc.style.position="absolute";a=a.h.style;a.position="absolute";a.overflow="hidden";a.zIndex=2}
g.I=function(){qj.m.I.call(this);var a=this.j();"static"==lf(a)&&(a.style.position="relative");Q(this).listen(this.h,"dblclick",this.xg).listen(this.gc,"start",this.zg).listen(this.gc,"drag",this.Ag).listen(this.gc,"end",this.yg);uj(this,null)};function vj(a){return"vertical"==a.D}function rj(a){vj(a)?(a.h.style.height=a.Ed+"px",jg(a.h,"goog-splitpane-handle-vertical")):(a.h.style.width=a.Ed+"px",jg(a.h,"goog-splitpane-handle-horizontal"))}
function wj(a,b){mf(a,b.left,b.top);If(a,new sd(Math.max(b.width,0),Math.max(b.height,0)))}function uj(a,b){xj(a,Hf(a.j()),b)}
function xj(a,b,c){var d=vj(a);c=Ma(c)?c:Ma(a.ne)?a.ne:Math.floor((d?b.height:b.width)/2);a.ne=c;if(d){var e=d=b.width;var f=a.Ed;var h=b.height-c-f;var k=b.width;var l=c;var m=0;var p=l+f;b=0}else d=c,c=b.height,e=a.Ed,f=b.height,k=b.width-d-e,h=b.height,m=d,l=0,b=m+e,p=0;wj(a.La,new ef(0,0,d,c));"function"==typeof a.i.resize&&a.i.resize(new sd(d,c));wj(a.h,new ef(m,l,e,f));wj(a.tc,new ef(b,p,k,h));"function"==typeof a.l.resize&&a.l.resize(new sd(k,h));a.dispatchEvent("change")}
g.setSize=function(a,b){If(this.j(),a);this.pb&&If(this.pb,a);xj(this,a,b)};
g.zg=function(){if(!this.pb){var a="position: relative";E&&!G("10")&&(a+=";background-color: #000;filter: Alpha(Opacity=0)");this.pb=this.f.M("DIV",{style:a});this.f.appendChild(this.j(),this.pb)}this.pb.style.zIndex=1;If(this.pb,Hf(this.j()));var b=of(this.La),c=a=0,d=b.x;b=b.y;var e=Hf(this.La),f=Lf(this.La),h=Lf(this.tc);vj(this)?(c=f.height+h.height,b+=e.height-f.height):(a=f.width+h.width,d+=e.width-f.width);ri(this.gc,new ef(d,b,a,c))};
g.Ag=function(a){vj(this)?uj(this,a.top-of(this.La).y):uj(this,a.left-of(this.La).x);this.dispatchEvent("handle_drag")};g.yg=function(){this.pb.style.zIndex=-1;this.dispatchEvent("handle_drag_end")};g.xg=function(){var a=uf(this.h,this.La),b=Hf(this.La),c=Lf(this.La),d=vj(this);d?(b=b.height-c.height,a=a.y):(b=b.width-c.width,a=a.x);b==a?uj(this,this.Mf):(this.Mf=d?Hf(this.La).height:Hf(this.La).width,uj(this,b));this.dispatchEvent("handle_snap")};
g.G=function(){qe(this.gc);this.gc=null;Kd(this.pb);this.pb=null;qj.m.G.call(this)};function yj(a,b,c){a=a||new P;b=b||new P;qj.call(this,a,b,c&&"vertical"===c?"vertical":"horizontal");this.B=this.u=null;this.Kf=b}ka(yj,qj);yj.prototype.I=function(){var a=this;qj.prototype.I.call(this);this.j().style.height="100%";this.u=this.j().parentElement;var b=T(this,0).j(),c=T(this,1).j();b.style.height="100%";b.style.background="#ddd;";c.style.height="100%";c.style.background="#ddd;";this.B=new ResizeObserver(function(){uj(a)});this.B.observe(this.u)};
yj.prototype.G=function(){console.log("SplitPaneExpanded::disposeInternal()");qj.prototype.G.call(this);this.B.unobserve(this.u)};function zj(){}C(zj,yg);Oa(zj);g=zj.prototype;g.T=function(){return"goog-tab"};g.$b=function(){return"tab"};g.Sa=function(a){var b=zj.m.Sa.call(this,a);(a=a.Fb())&&this.Oa(b,a);return b};g.na=function(a,b){b=zj.m.na.call(this,a,b);var c=this.Fb(b);c&&a.Ud(c);Ig(a,8)&&(c=a.getParent())&&Ua(c.Ub)&&(a.Na(8,!1),c.Ub(a));return b};g.Fb=function(a){return a.title||""};g.Oa=function(a,b){a&&(a.title=b||"")};function Aj(a,b,c){Kg.call(this,a,b||zj.ia(),c);this.Ja(8,!0);this.hc|=9}C(Aj,Kg);Aj.prototype.Fb=function(){return this.h};Aj.prototype.Oa=function(a){this.i.Oa(this.j(),a);this.Ud(a)};Aj.prototype.Ud=function(a){this.h=a};og("goog-tab",function(){return new Aj(null)});function Bj(){this.f="tablist"}C(Bj,rg);Oa(Bj);Bj.prototype.Xb=function(){return"goog-tab-bar"};Bj.prototype.Me=function(a,b,c){this.i||(this.h||Cj(this),this.i=nb(this.h));var d=this.i[b];d?(vg(a,d==Dj||d==Ej?xg:wg),a.l=d):Bj.m.Me.call(this,a,b,c)};Bj.prototype.re=function(a){var b=Bj.m.re.call(this,a);this.h||Cj(this);b.push(this.h[a.l]);return b};function Cj(a){var b=a.Xb();a.h=qb(Fj,b+"-top",Gj,b+"-bottom",Dj,b+"-start",Ej,b+"-end")};function Hj(a,b,c){a=a||Fj;vg(this,a==Dj||a==Ej?xg:wg);this.l=a;Vg.call(this,this.Ob,b||Bj.ia(),c);Ij(this)}C(Hj,Vg);var Fj="top",Gj="bottom",Dj="start",Ej="end";g=Hj.prototype;g.cb=null;g.I=function(){Hj.m.I.call(this);Ij(this)};g.G=function(){Hj.m.G.call(this);this.cb=null};g.removeChild=function(a,b){Jj(this,a);return Hj.m.removeChild.call(this,a,b)};g.Ke=function(a){Hj.m.Ke.call(this,a);this.Ub(T(this,a))};g.Ub=function(a){a?Qg(a,!0):this.cb&&Qg(this.cb,!1)};function Kj(a){return gg(a,a.cb)}
function Jj(a,b){if(b&&b==a.cb){for(var c=gg(a,b),d=c-1;b=T(a,d);d--)if(b.Ca&&b.isEnabled()){a.Ub(b);return}for(c+=1;b=T(a,c);c++)if(b.Ca&&b.isEnabled()){a.Ub(b);return}a.Ub(null)}}g.Jg=function(a){this.cb&&this.cb!=a.target&&Qg(this.cb,!1);this.cb=a.target};g.Kg=function(a){a.target==this.cb&&(this.cb=null)};g.Hg=function(a){Jj(this,a.target)};g.Ig=function(a){Jj(this,a.target)};g.Mc=function(){Zg(this)||this.ib(gg(this,this.cb||T(this,0)))};
function Ij(a){Q(a).listen(a,"select",a.Jg).listen(a,"unselect",a.Kg).listen(a,"disable",a.Hg).listen(a,"hide",a.Ig)}og("goog-tab-bar",function(){return new Hj});function Lj(a,b){var c=this;this.u=new P;this.u.render(a);this.f=new Hj;this.l=J("div",{style:"display:none;"});document.body.appendChild(this.l);this.C=J("div",{style:"display:none;"});document.body.appendChild(this.C);this.h=[];if(b)for(var d=0;d<b.length;d++)this.f.da(new Aj(b[d]),!0),Mj(this,d,"<div></div>");this.u.da(this.f,!0);a.appendChild(J("div",{"class":"goog-tab-bar-clear"}));this.i=J("div",{"class":"goog-tab-content"});a.appendChild(this.i);M(this.f,"select",function(){Nj(c,Kj(c.f))});
0<this.h.length&&this.f.Ub(T(this.f,0));this.A=null}function Oj(a,b,c){var d=eg(a.f),e=new Aj(b);a.f.da(e,!0);if(c){b=e.j();c=J("SPAN","gfk-tab-title-close");var f=J("SPAN",{style:"color:white;"},"__");Id(b,f);Id(b,c);Q(e).listen(c,"click",function(){console.log("event handler");a.A&&a.A({target:e})})}Mj(a,d,"<div></div>")}function Nj(a,b){-1!=Kj(a.f)&&a.i.firstChild&&a.l.appendChild(a.i.firstChild);a.i.appendChild(a.h[b])}
function Mj(a,b,c){b<eg(a.f)&&0<=b&&(a.C.innerHTML=c,c=a.C.firstChild,a.h[b]=c,a.l.appendChild(c))}function Pj(a,b){b<eg(a.f)&&0<=b&&(Nj(a,b),a.f.Ub(T(a.f,b)))}Lj.prototype.Fa=function(a){a<eg(this.f)&&0<=a&&T(this.f,a).Fa(void 0)};Lj.prototype.log=function(){console.log("this._tabDOMs",this.l);console.log("this._content",this.h);console.log("this.tabContent",this.i)};function Qj(a,b){a.A=b};function Rj(){Ue.call(this)}C(Rj,Ue);Rj.prototype.h=0;Rj.prototype.f=0;Rj.prototype.i=!1;function Sj(a,b){b=V(b);a.h!=b&&(a.h=100<b+a.f?100-a.f:0>b?0:b,a.i||a.dispatchEvent("change"))}Rj.prototype.getValue=function(){return V(this.h)};function Tj(a,b){b=V(b);a.f!=b&&(a.f=0>b?0:100<a.h+b?100-a.h:b,a.i||a.dispatchEvent("change"))}function V(a){return Math.round(a)};function Uj(a){P.call(this,a);this.i=new Rj;M(this.i,"change",this.tg,!1,this)}C(Uj,P);var Vj={vertical:"progress-bar-vertical",horizontal:"progress-bar-horizontal"};g=Uj.prototype;g.S=function(){this.h=this.f.M("DIV","progress-bar-thumb");this.w=this.f.M("DIV",Vj.horizontal,this.h);Wj(this);L(this.j(),"valuemin",V(0));L(this.j(),"valuemax",V(100))};g.I=function(){Uj.m.I.call(this);E&&7>tc&&M(this.j(),"resize",this.Ad,!1,this);this.Ad();var a=this.j();Zd(a,"progressbar");L(a,"live","polite")};
g.ha=function(){Uj.m.ha.call(this);Xj(this)};function Xj(a){E&&7>tc&&Pe(a.j(),"resize",a.Ad,!1,a)}g.xa=function(a){Uj.m.xa.call(this,a);jg(this.j(),Vj.horizontal);a=wd(document,null,"progress-bar-thumb",this.j())[0];a||(a=this.f.M("DIV","progress-bar-thumb"),this.j().appendChild(a));this.h=a};g.getValue=function(){return this.i.getValue()};function Wj(a){L(a.j(),"valuenow",a.getValue())}g.tg=function(){this.Ad();this.dispatchEvent("change")};
g.Ad=function(){if(this.h){var a=V(0),b=V(100);a=(this.getValue()-a)/(b-a);this.h.style.width=Math.round(100*a)+"%"}};g.G=function(){Xj(this);Uj.m.G.call(this);this.h=null;this.i.dispose()};function Yj(){this.f=new oj;this.f.f.hf=!0;var a=this.f.f,b=R(a,"pb"),c=R(a,"out");a=R(a,"msg");gj(this.f.f,null);this.f.f.Ia().style.background="#939393";Xi(this.f.f,"ProgressBar");pj(this.f,'<div id="'+b+'" style="width:400px;">\n    <div class="progress-bar-thumb"></div>\n    <div id="'+a+"\" style='position:absolute;top:0;text-align:center;width:100%;'>\n      Decorated element\n    </div>\n    <div id=\""+c+"\" style='position:absolute;top:0;text-align:left;'></div>\n  </div>");Xi(this.f.f,"Progress bar");
this.h=new Uj;bg(this.h,La(b)?document.getElementById(b):b);this.l=La(c)?document.getElementById(c):c;this.i=La(a)?document.getElementById(a):a}Yj.prototype.close=function(){this.f.f.K(!1)};var X=X||{};X.Z={};X.Z.Ha={};X.aa=null;window.FFR=X;X.cg=function(a){document.title="V5-FFR Viewer build 72";var b=J("div",{"class":"ffr-viewer-main"});a.appendChild(b);X.aa=new Zj(b)};X.createViewer=X.cg;function ak(){P.call(this)}ka(ak,P);ak.prototype.resize=function(){cg(this,function(a){return a.resize()})};
function Zj(a){var b=this;console.log("constructor Viewer");bk();this.C=a;this.l=this.h=null;ck(this);this.Bc=this.ma=null;J("div",{});a=J("div",{"class":"container",id:"container"});var c=J("div",{"class":"ffr-viewer-stage"},a);this.C.appendChild(c);this.nb=new dk(this);this.A=new ek(this);c=new ak;this.uc=new fk;this.i=new yj(this.nb,c,"vertical");c.da(this.uc,!0);this.f=new qj(new ak,this.i,"horizontal");T(this.f,0).da(this.A,!0);this.f.render(a);T(this.f,0).j().style.height="100%";uj(this.f,350);
uj(this.i,450);this.vc=this.Tb=null;window.addEventListener("resize",function(){var a=yf(document.getElementsByClassName("ffr-viewer-stage")[0]);b.f.setSize(a)})}
function bk(){var a=new XMLHttpRequest;a.open("GET","service.php?c=start",!1);a.onload=function(){console.log("service.php onload()");console.log("\u043f\u043e\u043b\u0443\u0447\u0438\u043b\u0438 "+a.response.length+" \u0431\u0430\u0439\u0442")};a.onerror=function(){console.log("service.php onerror()")};console.log("sending service.php request start service");a.send()}
function gk(a,b){T(a.f,0).removeChild(a.A,!0);b=new hk(null,b);a.Tb=b;T(a.f,0).da(b,!0);a.uc.K(!1);var c=T(a.i,1);c.removeChild(T(c,0),void 0);a.vc=new ik(b);T(a.i,1).da(a.vc,!0)}
function ck(a){function b(a){jk(d,a)}var c=new jh,d=a,e=new th,f=R(c,"inpf");f=[J("INPUT",{id:f,type:"file","class":"inputfile-invisible"}),J("LABEL",{for:f},"\u0427\u0442\u0435\u043d\u0438\u0435 DICOM \u0444\u0430\u0439\u043b\u0430")];uh(e,new U(f));f=R(c,"inpd");f=[J("div","goog-menuitem-icon","\ud83d\udcc2"),J("INPUT",{id:f,type:"file","class":"inputfile-invisible",webkitdirectory:" "}),J("div","goog-menuitem-accel","Ctrl+F2"),J("LABEL",{for:f},"\u0427\u0442\u0435\u043d\u0438\u0435 DICOM \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0430")];
uh(e,new U(f));e=new mi("\u0424\u0430\u0439\u043b",e);e.Oa("\u0422\u0435\u0441\u0442\u044b \u0434\u0438\u0430\u043b\u043e\u0433\u043e\u0432");c.da(e,!0);f=new th;uh(f,a.l=new U("\u041c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0430 \u0441\u0442\u0435\u043d\u043e\u0437\u0430"));d.l.Fa(!1);f=new mi("\u0418\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u044b",f);f.Oa("\u0418\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u044b \u0424\u0420\u041a");c.da(f,!0);var h=new th,k=new Sh("\u0420\u0435\u0433\u0440\u0435\u0441\u0441\u0438\u043e\u043d\u043d\u044b\u0435 \u0442\u0435\u0441\u0442\u044b");
Yh(k,new U("\u041f\u043e\u0447\u0443\u043a\u0430\u0435\u0432\u0430-113"));Yh(k,new sh);Yh(k,new U("debug test"));uh(h,k);uh(h,a.u=new U("lws tests"));a.u.Fa(!1);uh(h,a.B=new U("test load svetz-190"));a.B.Fa(!1);h=new mi("\u0422\u0435\u0441\u0442\u044b",h);h.Oa("\u0422\u0435\u0441\u0442\u044b LWS");c.da(h,!0);k=new mi("\u041e \u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0435");k.Oa("\u0412\u0435\u0440\u0441\u0438\u044f 1.2.4.72\n\u043e\u0442 17.10.2022 ");c.da(k,!0);a.h=new oi("\ud83d\udd34");
a.h.Oa("FFR \u0441\u0435\u0440\u0432\u0435\u0440 @wss://dodo.inm.ras.ru/websocket \u043d\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d");c.da(a.h,!0);c.render(a.C);M(e,"action",b);M(f,"action",b);M(h,"action",b);a=c.j();a.className="ffr-viewer-toolbar";a.style.display="block";a.removeAttribute("role");a.removeAttribute("tabindex")}
function jk(a,b){var c=b.target.Mb(),d=b.target.getParent().Ma.wa;console.log(c);if("\u041c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0430 \u0441\u0442\u0435\u043d\u043e\u0437\u0430"===c)(function(){var b,c,d,e,f,r,q,t,n,B,v,F;return Ea(function(h){if(1==h.f)return console.log("\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0442\u0435\u0441\u0442 \u041f\u043e\u0447\u0443\u043a\u0430\u0435\u0432\u0430-113"),b=["http://localhost/~germank/IM1"],c=new AMI.VolumeLoader,
console.log("\u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c DICOM "+b[0]),z(h,c.load(b),2);if(3!=h.f)return d=c.data[0].mergeSeries(c.data)[0],console.log("\u043f\u0440\u043e\u0440\u0435\u0436\u0438\u0432\u0430\u0435\u043c \u0441\u0435\u0440\u0438\u044e \u0434\u043e 200 \u0441\u0440\u0435\u0437\u043e\u0432"),e=kk(d,200),console.log("\u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c \u0441\u0435\u0440\u0438\u044e \u0432 \u0441\u043f\u0438\u0441\u043e\u043a \u0438 \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u0432 QuadView"),
lk(X.aa.uc,e),mk(e),z(h,nk(a.ma),3);f=h.h;r=new ok(f[0],"aorta");q=new ok(f[1],"vessel0");t=new ok(f[2],"vessel1");n=(f.length-1)/3-1;B=[];for(v=1;v<=n;v++)B.push({name:f[3*v],ag:f[3*v+1].data,ga:f[3*v+2].data});pk(r);pk(q);pk(t);F={stack:a.nb.i.stack[0],Dc:r,Zd:[q,t],P:B};gk(a,F);h.f=0})})();else if(-1!==c.indexOf("\u0427\u0442\u0435\u043d\u0438\u0435 DICOM \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0430")||"\u0427\u0442\u0435\u043d\u0438\u0435 DICOM \u0444\u0430\u0439\u043b\u0430"===c){var e=b.target.pe("inputfile-invisible"),
f=function(a){e.removeEventListener("change",f);qk(a.target.files);a.target.value=""};e.addEventListener("change",f)}else"lws tests"===c?(a.ma=new rk,a.ma.addEventListener("ready",function(){function b(){var a,b,d;return Ea(function(e){if(1==e.f)return z(e,sk(c.ma,"test lws"),2);a=e.h;b=tk(a);d=new ok(b[0],"zero cube");uk(d);console.log(d);e.f=0})}var c;return Ea(function(d){console.log("ready");c=a;b();d.f=0})})):"test load svetz-190"===c?(a.ma=new rk,a.ma.addEventListener("ready",function(){function b(){var a,
b,d,e;return Ea(function(f){switch(f.f){case 1:return z(f,sk(c.ma,"test load svetz-190"),2);case 2:return a=f.h,b=tk(a),z(f,sk(c.ma,"test load svetz-frame-i"),3);case 3:return d=f.h,tk(d),z(f,sk(c.ma,"test load svetz-frame-k"),4);case 4:e=f.h,tk(e),new ok(b[0],"shvetz"),f.f=0}})}var c;return Ea(function(d){console.log("ready");c=a;b();d.f=0})})):"\u0420\u0435\u0433\u0440\u0435\u0441\u0441\u0438\u043e\u043d\u043d\u044b\u0435 \u0442\u0435\u0441\u0442\u044b"===d&&vk(b)}
function wk(a,b,c){b?(b=a.h,b.i.ac(b.j(),"\ud83d\udfe2"),b.wa="\ud83d\udfe2",a.h.Oa("FFR \u0441\u0435\u0440\u0432\u0435\u0440 (\u0432\u0435\u0440\u0441\u0438\u044f "+c+") \u0433\u043e\u0442\u043e\u0432 @wss://dodo.inm.ras.ru/websocket")):(c=a.h,c.i.ac(c.j(),"\ud83d\udd34"),c.wa="\ud83d\udd34",a.h.Oa("FFR \u0441\u0435\u0440\u0432\u0435\u0440 \u0437\u0430\u043a\u0440\u044b\u043b \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435"),alert("FFR \u0441\u0435\u0440\u0432\u0435\u0440 \u0437\u0430\u043a\u0440\u044b\u043b \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435"),
a.l.Fa(!1))}la.Object.defineProperties(Zj.prototype,{Tf:{configurable:!0,enumerable:!0,set:function(a){this.ma=a}},fg:{configurable:!0,enumerable:!0,set:function(a){this.Bc=a}}});function xk(a,b){Ue.call(this);this.w=a;a=Nd(this.w)?this.w:this.w?this.w.body:null;this.l=!!a&&Ef(a);this.f=M(this.w,ic?"DOMMouseScroll":"mousewheel",this,b)}C(xk,Ue);
xk.prototype.handleEvent=function(a){var b=0,c=0,d=a.f;"mousewheel"==d.type?(a=yk(-d.wheelDelta),Ka(d.wheelDeltaX)?(b=yk(-d.wheelDeltaX),c=yk(-d.wheelDeltaY)):c=a):(a=d.detail,100<a?a=3:-100>a&&(a=-3),Ka(d.axis)&&d.axis===d.HORIZONTAL_AXIS?b=a:c=a);Ma(this.h)&&(b=pd(b,-this.h,this.h));Ma(this.i)&&(c=pd(c,-this.i,this.i));this.l&&(b=-b);b=new zk(a,d,b,c);this.dispatchEvent(b)};function yk(a){return jc&&(kc||mc)&&0!=a%40?a:a/40}xk.prototype.G=function(){xk.m.G.call(this);Qe(this.f);this.f=null};
function zk(a,b,c,d){te.call(this,b);this.type="mousewheel";this.detail=a;this.deltaX=c;this.deltaY=d}C(zk,te);function Ak(){Ue.call(this);this.f=Bk;this.l=this.i=null}C(Ak,Ue);var Bk=0;Ak.prototype.ua=function(){this.bb("begin")};Ak.prototype.A=function(){this.bb("end")};Ak.prototype.bb=function(a){this.dispatchEvent(a)};function Ck(a,b,c){me.call(this);this.f=a;this.l=b||0;this.h=c;this.i=ab(this.ig,this)}C(Ck,me);g=Ck.prototype;g.nc=0;g.G=function(){Ck.m.G.call(this);this.stop();delete this.f;delete this.h};g.start=function(a){this.stop();this.nc=wh(this.i,Ka(a)?a:this.l)};g.stop=function(){0!=this.nc&&A.clearTimeout(this.nc);this.nc=0};g.ig=function(){this.nc=0;this.f&&this.f.call(this.h)};var lb={},Dk=null;function Ek(a){a=Wa(a);delete lb[a];kb()&&Dk&&Dk.stop()}function Fk(){Dk||(Dk=new Ck(function(){Gk()},20));var a=Dk;0!=a.nc||a.start()}function Gk(){var a=cb();gb(lb,function(b){Hk(b,a)});kb()||Fk()};function Ik(a,b,c,d){Ak.call(this);if(!Qa(a)||!Qa(b))throw Error("Start and end parameters must be arrays");if(a.length!=b.length)throw Error("Start and end points must be the same length");this.C=a;this.fa=b;this.V=c;this.O=d;this.coords=[];this.B=!1;this.h=0}C(Ik,Ak);g=Ik.prototype;
g.play=function(a){if(a||this.f==Bk)this.h=0,this.coords=this.C;else if(1==this.f)return!1;Ek(this);this.i=a=cb();-1==this.f&&(this.i-=this.V*this.h);this.l=this.i+this.V;this.h||this.ua();this.bb("play");-1==this.f&&this.bb("resume");this.f=1;var b=Wa(this);b in lb||(lb[b]=this);Fk();Hk(this,a);return!0};g.stop=function(a){Ek(this);this.f=Bk;a&&(this.h=1);Jk(this,this.h);this.bb("stop");this.A()};g.G=function(){this.f==Bk||this.stop(!1);this.bb("destroy");Ik.m.G.call(this)};
function Hk(a,b){b<a.i&&(a.l=b+a.l-a.i,a.i=b);a.h=(b-a.i)/(a.l-a.i);1<a.h&&(a.h=1);Jk(a,a.h);1==a.h?(a.f=Bk,Ek(a),a.bb("finish"),a.A()):1==a.f&&a.Ge()}function Jk(a,b){Ua(a.O)&&(b=a.O(b));a.coords=Array(a.C.length);for(var c=0;c<a.C.length;c++)a.coords[c]=(a.fa[c]-a.C[c])*b+a.C[c]}g.Ge=function(){this.bb("animate")};g.bb=function(a){this.dispatchEvent(new Kk(a,this))};function Kk(a,b){se.call(this,a);this.coords=b.coords;this.x=b.coords[0];this.y=b.coords[1];this.z=b.coords[2];this.state=b.f}
C(Kk,se);function Lk(){Ak.call(this);this.h=[]}C(Lk,Ak);Lk.prototype.add=function(a){Bb(this.h,a)||(this.h.push(a),M(a,"finish",this.u,!1,this))};Lk.prototype.remove=function(a){Cb(this.h,a)&&Pe(a,"finish",this.u,!1,this)};Lk.prototype.G=function(){xb(this.h,function(a){a.dispose()});this.h.length=0;Lk.m.G.call(this)};function Mk(){Lk.call(this);this.C=0}C(Mk,Lk);
Mk.prototype.play=function(a){if(0==this.h.length)return!1;if(a||this.f==Bk)this.C=0,this.ua();else if(1==this.f)return!1;this.bb("play");-1==this.f&&this.bb("resume");var b=-1==this.f&&!a;this.i=cb();this.l=null;this.f=1;xb(this.h,function(c){b&&-1!=c.f||c.play(a)});return!0};Mk.prototype.stop=function(a){xb(this.h,function(b){b.f==Bk||b.stop(a)});this.f=Bk;this.l=cb();this.bb("stop");this.A()};Mk.prototype.u=function(){this.C++;this.C==this.h.length&&(this.l=cb(),this.f=Bk,this.bb("finish"),this.A())};function Nk(a,b,c,d,e){Ik.call(this,b,c,d,e);this.D=a}C(Nk,Ik);Nk.prototype.u=Na;Nk.prototype.Ge=function(){this.u();Nk.m.Ge.call(this)};Nk.prototype.A=function(){this.u();Nk.m.A.call(this)};Nk.prototype.ua=function(){this.u();Nk.m.ua.call(this)};function Ok(a,b,c,d,e){if(2!=b.length||2!=c.length)throw Error("Start and end points must be 2D");Nk.apply(this,arguments)}C(Ok,Nk);
Ok.prototype.u=function(){var a;if(a=this.B)Ka(this.Y)||(this.Y=Ef(this.D)),a=this.Y;this.D.style[a?"right":"left"]=Math.round(this.coords[0])+"px";this.D.style.top=Math.round(this.coords[1])+"px"};function Pk(a,b,c,d,e){Nk.call(this,a,[b],[c],d,e)}C(Pk,Nk);Pk.prototype.u=function(){this.D.style.width=Math.round(this.coords[0])+"px"};function Qk(a,b){P.call(this,a);this.h=new Rj;this.bd=b||Ec;M(this.h,"change",this.yf,!1,this)}C(Qk,P);g=Qk.prototype;g.Jd=!1;g.Ef=0;g.we=!0;g.S=function(){Qk.m.S.call(this);var a=this.f.M("DIV","goog-slider-horizontal");this.xa(a)};g.xa=function(a){Qk.m.xa.call(this,a);jg(a,"goog-slider-horizontal");a=this.j();var b=wd(document,null,"goog-slider-thumb",a)[0];b||(b=this.f.M("DIV","goog-slider-thumb"),Zd(b,"button"),a.appendChild(b));this.i=this.B=b;Zd(this.j(),"slider");Rk(this)};
g.I=function(){Qk.m.I.call(this);this.l=new pi(this.i);this.u=new pi(this.B);this.l.l=!1;this.u.l=!1;this.l.je=this.u.je=Na;this.fa=new We(this.j());Sk(this,!0);this.j().tabIndex=0;Tk(this)};
function Sk(a,b){b?(Q(a).listen(a.l,"beforedrag",a.Bd).listen(a.u,"beforedrag",a.Bd).listen(a.l,["start","end"],a.Fd).listen(a.u,["start","end"],a.Fd).listen(a.fa,"key",a.uf).listen(a.j(),"click",a.Cd).listen(a.j(),"mousedown",a.Cd),Uk(a,!0)):(Q(a).W(a.l,"beforedrag",a.Bd).W(a.u,"beforedrag",a.Bd).W(a.l,["start","end"],a.Fd).W(a.u,["start","end"],a.Fd).W(a.fa,"key",a.uf).W(a.j(),"click",a.Cd).W(a.j(),"mousedown",a.Cd),Uk(a,!1))}g.ha=function(){Qk.m.ha.call(this);re(this.l,this.u,this.fa,this.V)};
g.Bd=function(a){var b=a.f==this.l?this.i:this.B;var c=a.left/(this.j().clientWidth-b.offsetWidth)*(V(100)-V(0))+V(0);c=a.f==this.l?Math.min(Math.max(c,V(0)),this.getValue()+Math.round(this.h.f)):Math.min(Math.max(c,this.getValue()),V(100));Vk(this,b,c)};
g.Fd=function(a){var b="start"==a.type;ng(this.j(),"goog-slider-dragging",b);ng(a.target.handle,"goog-slider-thumb-dragging",b);a=a.f==this.l;b?(this.dispatchEvent("e"),this.dispatchEvent(a?"a":"c")):(this.dispatchEvent("f"),this.dispatchEvent(a?"b":"d"))};
g.uf=function(a){var b=!0;switch(a.keyCode){case 36:Wk(this,V(0));break;case 35:Wk(this,V(100));break;case 33:Xk(this,10);break;case 34:Xk(this,-10);break;case 37:var c=-1;Xk(this,a.shiftKey?10*c:c);break;case 40:Xk(this,a.shiftKey?-10:-1);break;case 39:c=1;Xk(this,a.shiftKey?10*c:c);break;case 38:Xk(this,a.shiftKey?10:1);break;default:b=!1}b&&a.preventDefault()};
g.Cd=function(a){this.j().focus&&this.j().focus();var b=a.target;if(!(Od(this.i,b)||Od(this.B,b)||(b="click"==a.type,b&&cb()<this.Ef+1E3))){b||(this.Ef=cb());this.Qe(a);b=V(0);var c=V(100),d=this.i.offsetWidth,e=this.j().clientWidth-d;a=uf(a,this.j()).x-d/2;this.Y=Yk(this,(c-b)*a/e+b);this.jc=this.yb>this.Y.offsetLeft+this.Y.offsetWidth;a=vd(this.j());Q(this).listen(a,"mouseup",this.Pe,!0).listen(this.j(),"mousemove",this.Qe);this.O||(this.O=new vh(200),Q(this).listen(this.O,"tick",this.zf));this.zf();
this.O.start()}};g.xf=function(a){Xk(this,0<a.detail?-1:1);a.preventDefault()};g.zf=function(){var a,b=this.yb,c=this.Y.offsetLeft;this.jc?b>c+this.Y.offsetWidth&&(a=Zk(this,this.Y)+10):b<c&&(a=Zk(this,this.Y)-10);Ka(a)&&Vk(this,this.Y,a)};g.Pe=function(){this.O&&this.O.stop();var a=vd(this.j());Q(this).W(a,"mouseup",this.Pe,!0).W(this.j(),"mousemove",this.Qe)};g.Qe=function(a){this.yb=uf(a,this.j()).x};
function Zk(a,b){if(b==a.i)return a.h.getValue();if(b==a.B)return a.h.getValue()+Math.round(a.h.f);throw Error("Illegal thumb element. Neither minThumb nor maxThumb");}function Xk(a,b){1>Math.abs(b)&&(b=1*(0<b?1:0>b?-1:b));var c=Zk(a,a.i)+b;b=Zk(a,a.B)+b;c=pd(c,V(0),V(100));b=pd(b,V(0),V(100));$k(a,c,b-c)}function Vk(a,b,c){var d=V(c);c=b==a.i?d:a.h.getValue();b=b==a.B?d:a.h.getValue()+Math.round(a.h.f);c>=V(0)&&b>=c&&V(100)>=b&&$k(a,c,b-c)}
function $k(a,b,c){V(0)<=b&&b<=V(100)-c&&0<=c&&c<=V(100)-b&&(b!=a.getValue()||c!=Math.round(a.h.f))&&(a.h.i=!0,Tj(a.h,0),Sj(a.h,b),Tj(a.h,c),a.h.i=!1,a.yf(null))}function Yk(a,b){return b<=a.h.getValue()+Math.round(a.h.f)/2?a.i:a.B}g.yf=function(){Tk(this);Rk(this);this.dispatchEvent("change")};
function Tk(a){if(a.i&&!a.Jd){var b=al(a,Zk(a,a.i));var c=al(a,Zk(a,a.B));a.i.style.left=b.x+"px";a.B.style.left=c.x+"px";a.D&&(b=bl(b.x,c.x,a.i.offsetWidth),a.D.style.left=b.offset+"px",a.D.style.width=b.size+"px")}}function bl(a,b,c){var d=Math.ceil(c/2);return{offset:a+d,size:Math.max(b-a+c-2*d,0)}}function al(a,b){var c=new H;if(a.i){var d=V(0),e=V(100);c.x=Math.round((b==d&&d==e?0:(b-d)/(e-d))*(a.j().clientWidth-a.i.offsetWidth));c.y=a.i.offsetTop}return c}
function Wk(a,b){b=pd(b,V(0),V(100));a.Jd&&(a.Ya.stop(!0),a.Ya.dispose());var c=new Mk,d=Yk(a,b),e=a.getValue(),f=Math.round(a.h.f),h=Zk(a,d),k=al(a,h);1>Math.abs(b-h)&&(b=pd(h+(b>h?1:-1),V(0),V(100)));Vk(a,d,b);b=al(a,Zk(a,d));k=new Ok(d,[k.x,k.y],[b.x,d.offsetTop],100);k.B=!1;c.add(k);a.D&&(k=al(a,e),h=al(a,e+f),e=k,f=h,d==a.i?e=b:f=b,d=bl(k.x,h.x,a.i.offsetWidth),e=bl(e.x,f.x,a.i.offsetWidth),b=new Ok(a.D,[d.offset,a.D.offsetTop],[e.offset,a.D.offsetTop],100),d=new Pk(a.D,d.size,e.size,100),b.B=
!1,d.B=!1,c.add(b),c.add(d));a.Ya=c;Q(a).listen(c,"end",a.dg);a.Jd=!0;c.play(!1)}g.dg=function(){this.Jd=!1;this.dispatchEvent("g")};g.G=function(){Qk.m.G.call(this);this.O&&this.O.dispose();delete this.O;this.Ya&&this.Ya.dispose();delete this.Ya;delete this.i;delete this.B;this.D&&delete this.D;this.h.dispose();delete this.h;this.fa&&(this.fa.dispose(),delete this.fa);this.V&&(this.V.dispose(),delete this.V);this.l&&(this.l.dispose(),delete this.l);this.u&&(this.u.dispose(),delete this.u)};
g.getValue=function(){return this.h.getValue()};function cl(a,b){Vk(a,a.i,b)}g.K=function(a){N(this.j(),a);a&&Tk(this)};function Rk(a){var b=a.j();b&&(L(b,"valuemin",V(0)),L(b,"valuemax",V(100)),L(b,"valuenow",a.getValue()),L(b,"valuetext",a.bd(a.getValue())||""))}function Uk(a,b){b?(a.V||(a.V=new xk(a.j())),Q(a).listen(a.V,"mousewheel",a.xf)):Q(a).W(a.V,"mousewheel",a.xf)}
g.Fa=function(a){this.we!=a&&this.dispatchEvent(a?"enable":"disable")&&(this.we=a,Sk(this,a),a||this.Pe(),ng(this.j(),"goog-slider-disabled",!a))};g.isEnabled=function(){return this.we};function dl(a,b){Qk.call(this,a,b);Tj(this.h,0)}C(dl,Qk);function el(a){var b=this,c=J("div",{style:"position:absolute;width:100%;top:9px;border:1px inset white;overflow:hidden;height:0;"}),d=J("div",{"class":"goog-slider-thumb"});d.innerHTML="&nbsp;&#8741";this.l=J("div",{"class":"goog-slider",style:"min-width:20px; height: 20px;  flex-grow:2;"},c,d);this.f=new dl;this.h=J("div",{style:"background-color: ThreeDShadow;"});this.i=J("div",{style:"background-color: ThreeDShadow;"});this.h.innerHTML="\u25c0";this.i.innerHTML="\u25b6";this.A=J("div",{style:"display:flex; width:100%;"},
this.h,this.l,this.i);a.appendChild(this.A);bg(this.f,this.l);this.h.onclick=function(){cl(b.f,b.getValue()-1)};this.i.onclick=function(){cl(b.f,b.getValue()+1)}}el.prototype.listen=function(a){this.f.addEventListener("change",a)};el.prototype.getValue=function(){return this.f.getValue()};function fl(){}C(fl,yg);Oa(fl);fl.prototype.Sa=function(a){var b=a.f.M("SPAN",Bg(this,a).join(" "));gl(this,b,a.l);return b};fl.prototype.na=function(a,b){b=fl.m.na.call(this,a,b);var c=hg(b),d=hl;Bb(c,il(this,jl))?d=jl:Bb(c,il(this,kl))?d=kl:Bb(c,il(this,hl))&&(d=hl);a.l=d;L(b,"checked",d==jl?"mixed":d==kl?"true":"false");return b};fl.prototype.$b=function(){return"checkbox"};
function gl(a,b,c){if(b){var d=il(a,c);ig(b,d)||(gb(ll,function(a){a=il(this,a);ng(b,a,a==d)},a),L(b,"checked",c==jl?"mixed":c==kl?"true":"false"))}}fl.prototype.T=function(){return"goog-checkbox"};function il(a,b){a=a.T();if(b==kl)return a+"-checked";if(b==hl)return a+"-unchecked";if(b==jl)return a+"-undetermined";throw Error("Invalid checkbox state: "+b);};function ml(a,b,c){c=c||fl.ia();Kg.call(this,null,c,b);this.l=Ka(a)?a:hl}C(ml,Kg);var kl=!0,hl=!1,jl=null,ll={Gh:kl,Zh:hl,$h:jl};g=ml.prototype;g.pc=function(){return this.l==kl};g.Td=function(a){a!=this.l&&(this.l=a,gl(this.i,this.j(),this.l))};g.I=function(){ml.m.I.call(this);this.Dd&&Q(this).listen(this.j(),"click",this.vf)};g.vf=function(a){a.stopPropagation();var b=this.l?"uncheck":"check";this.isEnabled()&&!a.target.href&&this.dispatchEvent(b)&&(a.preventDefault(),this.Td(this.l?hl:kl),this.dispatchEvent("change"))};
g.bc=function(a){32==a.keyCode&&(this.sb(a),this.vf(a));return!1};og("goog-checkbox",function(){return new ml});var nl=[[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,8,3,9,8,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,8,3,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[9,2,10,0,2,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[2,8,3,2,10,8,10,9,8,-1,-1,-1,-1,-1,-1,-1],[3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,11,2,8,11,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,9,0,2,3,11,-1,-1,-1,-1,-1,-1,
-1,-1,-1,-1],[1,11,2,1,9,11,9,8,11,-1,-1,-1,-1,-1,-1,-1],[3,10,1,11,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,10,1,0,8,10,8,11,10,-1,-1,-1,-1,-1,-1,-1],[3,9,0,3,11,9,11,10,9,-1,-1,-1,-1,-1,-1,-1],[9,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,3,0,7,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,1,9,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,1,9,4,7,1,7,3,1,-1,-1,-1,-1,-1,-1,-1],[1,2,10,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[3,4,7,3,0,4,1,2,10,-1,-1,-1,-1,-1,-1,-1],
[9,2,10,9,0,2,8,4,7,-1,-1,-1,-1,-1,-1,-1],[2,10,9,2,9,7,2,7,3,7,9,4,-1,-1,-1,-1],[8,4,7,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[11,4,7,11,2,4,2,0,4,-1,-1,-1,-1,-1,-1,-1],[9,0,1,8,4,7,2,3,11,-1,-1,-1,-1,-1,-1,-1],[4,7,11,9,4,11,9,11,2,9,2,1,-1,-1,-1,-1],[3,10,1,3,11,10,7,8,4,-1,-1,-1,-1,-1,-1,-1],[1,11,10,1,4,11,1,0,4,7,11,4,-1,-1,-1,-1],[4,7,8,9,0,11,9,11,10,11,0,3,-1,-1,-1,-1],[4,7,11,4,11,9,9,11,10,-1,-1,-1,-1,-1,-1,-1],[9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[9,5,4,0,8,3,-1,-1,-1,-1,-1,-1,
-1,-1,-1,-1],[0,5,4,1,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[8,5,4,8,3,5,3,1,5,-1,-1,-1,-1,-1,-1,-1],[1,2,10,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[3,0,8,1,2,10,4,9,5,-1,-1,-1,-1,-1,-1,-1],[5,2,10,5,4,2,4,0,2,-1,-1,-1,-1,-1,-1,-1],[2,10,5,3,2,5,3,5,4,3,4,8,-1,-1,-1,-1],[9,5,4,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,11,2,0,8,11,4,9,5,-1,-1,-1,-1,-1,-1,-1],[0,5,4,0,1,5,2,3,11,-1,-1,-1,-1,-1,-1,-1],[2,1,5,2,5,8,2,8,11,4,8,5,-1,-1,-1,-1],[10,3,11,10,1,3,9,5,4,-1,-1,-1,-1,-1,-1,-1],[4,9,5,0,8,1,8,10,1,8,
11,10,-1,-1,-1,-1],[5,4,0,5,0,11,5,11,10,11,0,3,-1,-1,-1,-1],[5,4,8,5,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1],[9,7,8,5,7,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[9,3,0,9,5,3,5,7,3,-1,-1,-1,-1,-1,-1,-1],[0,7,8,0,1,7,1,5,7,-1,-1,-1,-1,-1,-1,-1],[1,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[9,7,8,9,5,7,10,1,2,-1,-1,-1,-1,-1,-1,-1],[10,1,2,9,5,0,5,3,0,5,7,3,-1,-1,-1,-1],[8,0,2,8,2,5,8,5,7,10,5,2,-1,-1,-1,-1],[2,10,5,2,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1],[7,9,5,7,8,9,3,11,2,-1,-1,-1,-1,-1,-1,-1],[9,5,7,9,7,2,9,2,0,2,7,
11,-1,-1,-1,-1],[2,3,11,0,1,8,1,7,8,1,5,7,-1,-1,-1,-1],[11,2,1,11,1,7,7,1,5,-1,-1,-1,-1,-1,-1,-1],[9,5,8,8,5,7,10,1,3,10,3,11,-1,-1,-1,-1],[5,7,0,5,0,9,7,11,0,1,0,10,11,10,0,-1],[11,10,0,11,0,3,10,5,0,8,0,7,5,7,0,-1],[11,10,5,7,11,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,8,3,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[9,0,1,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,8,3,1,9,8,5,10,6,-1,-1,-1,-1,-1,-1,-1],[1,6,5,2,6,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,6,5,1,2,6,
3,0,8,-1,-1,-1,-1,-1,-1,-1],[9,6,5,9,0,6,0,2,6,-1,-1,-1,-1,-1,-1,-1],[5,9,8,5,8,2,5,2,6,3,2,8,-1,-1,-1,-1],[2,3,11,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[11,0,8,11,2,0,10,6,5,-1,-1,-1,-1,-1,-1,-1],[0,1,9,2,3,11,5,10,6,-1,-1,-1,-1,-1,-1,-1],[5,10,6,1,9,2,9,11,2,9,8,11,-1,-1,-1,-1],[6,3,11,6,5,3,5,1,3,-1,-1,-1,-1,-1,-1,-1],[0,8,11,0,11,5,0,5,1,5,11,6,-1,-1,-1,-1],[3,11,6,0,3,6,0,6,5,0,5,9,-1,-1,-1,-1],[6,5,9,6,9,11,11,9,8,-1,-1,-1,-1,-1,-1,-1],[5,10,6,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,3,0,4,7,
3,6,5,10,-1,-1,-1,-1,-1,-1,-1],[1,9,0,5,10,6,8,4,7,-1,-1,-1,-1,-1,-1,-1],[10,6,5,1,9,7,1,7,3,7,9,4,-1,-1,-1,-1],[6,1,2,6,5,1,4,7,8,-1,-1,-1,-1,-1,-1,-1],[1,2,5,5,2,6,3,0,4,3,4,7,-1,-1,-1,-1],[8,4,7,9,0,5,0,6,5,0,2,6,-1,-1,-1,-1],[7,3,9,7,9,4,3,2,9,5,9,6,2,6,9,-1],[3,11,2,7,8,4,10,6,5,-1,-1,-1,-1,-1,-1,-1],[5,10,6,4,7,2,4,2,0,2,7,11,-1,-1,-1,-1],[0,1,9,4,7,8,2,3,11,5,10,6,-1,-1,-1,-1],[9,2,1,9,11,2,9,4,11,7,11,4,5,10,6,-1],[8,4,7,3,11,5,3,5,1,5,11,6,-1,-1,-1,-1],[5,1,11,5,11,6,1,0,11,7,11,4,0,4,11,
-1],[0,5,9,0,6,5,0,3,6,11,6,3,8,4,7,-1],[6,5,9,6,9,11,4,7,9,7,11,9,-1,-1,-1,-1],[10,4,9,6,4,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,10,6,4,9,10,0,8,3,-1,-1,-1,-1,-1,-1,-1],[10,0,1,10,6,0,6,4,0,-1,-1,-1,-1,-1,-1,-1],[8,3,1,8,1,6,8,6,4,6,1,10,-1,-1,-1,-1],[1,4,9,1,2,4,2,6,4,-1,-1,-1,-1,-1,-1,-1],[3,0,8,1,2,9,2,4,9,2,6,4,-1,-1,-1,-1],[0,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[8,3,2,8,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1],[10,4,9,10,6,4,11,2,3,-1,-1,-1,-1,-1,-1,-1],[0,8,2,2,8,11,4,9,10,4,10,6,-1,-1,-1,-1],[3,
11,2,0,1,6,0,6,4,6,1,10,-1,-1,-1,-1],[6,4,1,6,1,10,4,8,1,2,1,11,8,11,1,-1],[9,6,4,9,3,6,9,1,3,11,6,3,-1,-1,-1,-1],[8,11,1,8,1,0,11,6,1,9,1,4,6,4,1,-1],[3,11,6,3,6,0,0,6,4,-1,-1,-1,-1,-1,-1,-1],[6,4,8,11,6,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[7,10,6,7,8,10,8,9,10,-1,-1,-1,-1,-1,-1,-1],[0,7,3,0,10,7,0,9,10,6,7,10,-1,-1,-1,-1],[10,6,7,1,10,7,1,7,8,1,8,0,-1,-1,-1,-1],[10,6,7,10,7,1,1,7,3,-1,-1,-1,-1,-1,-1,-1],[1,2,6,1,6,8,1,8,9,8,6,7,-1,-1,-1,-1],[2,6,9,2,9,1,6,7,9,0,9,3,7,3,9,-1],[7,8,0,7,0,6,6,0,2,-1,
-1,-1,-1,-1,-1,-1],[7,3,2,6,7,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[2,3,11,10,6,8,10,8,9,8,6,7,-1,-1,-1,-1],[2,0,7,2,7,11,0,9,7,6,7,10,9,10,7,-1],[1,8,0,1,7,8,1,10,7,6,7,10,2,3,11,-1],[11,2,1,11,1,7,10,6,1,6,7,1,-1,-1,-1,-1],[8,9,6,8,6,7,9,1,6,11,6,3,1,3,6,-1],[0,9,1,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[7,8,0,7,0,6,3,11,0,11,6,0,-1,-1,-1,-1],[7,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[3,0,8,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,1,9,11,7,6,-1,-1,
-1,-1,-1,-1,-1,-1,-1,-1],[8,1,9,8,3,1,11,7,6,-1,-1,-1,-1,-1,-1,-1],[10,1,2,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,2,10,3,0,8,6,11,7,-1,-1,-1,-1,-1,-1,-1],[2,9,0,2,10,9,6,11,7,-1,-1,-1,-1,-1,-1,-1],[6,11,7,2,10,3,10,8,3,10,9,8,-1,-1,-1,-1],[7,2,3,6,2,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[7,0,8,7,6,0,6,2,0,-1,-1,-1,-1,-1,-1,-1],[2,7,6,2,3,7,0,1,9,-1,-1,-1,-1,-1,-1,-1],[1,6,2,1,8,6,1,9,8,8,7,6,-1,-1,-1,-1],[10,7,6,10,1,7,1,3,7,-1,-1,-1,-1,-1,-1,-1],[10,7,6,1,7,10,1,8,7,1,0,8,-1,-1,-1,-1],[0,3,7,0,7,10,
0,10,9,6,10,7,-1,-1,-1,-1],[7,6,10,7,10,8,8,10,9,-1,-1,-1,-1,-1,-1,-1],[6,8,4,11,8,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[3,6,11,3,0,6,0,4,6,-1,-1,-1,-1,-1,-1,-1],[8,6,11,8,4,6,9,0,1,-1,-1,-1,-1,-1,-1,-1],[9,4,6,9,6,3,9,3,1,11,3,6,-1,-1,-1,-1],[6,8,4,6,11,8,2,10,1,-1,-1,-1,-1,-1,-1,-1],[1,2,10,3,0,11,0,6,11,0,4,6,-1,-1,-1,-1],[4,11,8,4,6,11,0,2,9,2,10,9,-1,-1,-1,-1],[10,9,3,10,3,2,9,4,3,11,3,6,4,6,3,-1],[8,2,3,8,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1],[0,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,9,0,2,3,4,2,
4,6,4,3,8,-1,-1,-1,-1],[1,9,4,1,4,2,2,4,6,-1,-1,-1,-1,-1,-1,-1],[8,1,3,8,6,1,8,4,6,6,10,1,-1,-1,-1,-1],[10,1,0,10,0,6,6,0,4,-1,-1,-1,-1,-1,-1,-1],[4,6,3,4,3,8,6,10,3,0,3,9,10,9,3,-1],[10,9,4,6,10,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,9,5,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,8,3,4,9,5,11,7,6,-1,-1,-1,-1,-1,-1,-1],[5,0,1,5,4,0,7,6,11,-1,-1,-1,-1,-1,-1,-1],[11,7,6,8,3,4,3,5,4,3,1,5,-1,-1,-1,-1],[9,5,4,10,1,2,7,6,11,-1,-1,-1,-1,-1,-1,-1],[6,11,7,1,2,10,0,8,3,4,9,5,-1,-1,-1,-1],[7,6,11,5,4,10,4,2,10,
4,0,2,-1,-1,-1,-1],[3,4,8,3,5,4,3,2,5,10,5,2,11,7,6,-1],[7,2,3,7,6,2,5,4,9,-1,-1,-1,-1,-1,-1,-1],[9,5,4,0,8,6,0,6,2,6,8,7,-1,-1,-1,-1],[3,6,2,3,7,6,1,5,0,5,4,0,-1,-1,-1,-1],[6,2,8,6,8,7,2,1,8,4,8,5,1,5,8,-1],[9,5,4,10,1,6,1,7,6,1,3,7,-1,-1,-1,-1],[1,6,10,1,7,6,1,0,7,8,7,0,9,5,4,-1],[4,0,10,4,10,5,0,3,10,6,10,7,3,7,10,-1],[7,6,10,7,10,8,5,4,10,4,8,10,-1,-1,-1,-1],[6,9,5,6,11,9,11,8,9,-1,-1,-1,-1,-1,-1,-1],[3,6,11,0,6,3,0,5,6,0,9,5,-1,-1,-1,-1],[0,11,8,0,5,11,0,1,5,5,6,11,-1,-1,-1,-1],[6,11,3,6,3,5,
5,3,1,-1,-1,-1,-1,-1,-1,-1],[1,2,10,9,5,11,9,11,8,11,5,6,-1,-1,-1,-1],[0,11,3,0,6,11,0,9,6,5,6,9,1,2,10,-1],[11,8,5,11,5,6,8,0,5,10,5,2,0,2,5,-1],[6,11,3,6,3,5,2,10,3,10,5,3,-1,-1,-1,-1],[5,8,9,5,2,8,5,6,2,3,8,2,-1,-1,-1,-1],[9,5,6,9,6,0,0,6,2,-1,-1,-1,-1,-1,-1,-1],[1,5,8,1,8,0,5,6,8,3,8,2,6,2,8,-1],[1,5,6,2,1,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,3,6,1,6,10,3,8,6,5,6,9,8,9,6,-1],[10,1,0,10,0,6,9,5,0,5,6,0,-1,-1,-1,-1],[0,3,8,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[10,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,
-1,-1,-1,-1],[11,5,10,7,5,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[11,5,10,11,7,5,8,3,0,-1,-1,-1,-1,-1,-1,-1],[5,11,7,5,10,11,1,9,0,-1,-1,-1,-1,-1,-1,-1],[10,7,5,10,11,7,9,8,1,8,3,1,-1,-1,-1,-1],[11,1,2,11,7,1,7,5,1,-1,-1,-1,-1,-1,-1,-1],[0,8,3,1,2,7,1,7,5,7,2,11,-1,-1,-1,-1],[9,7,5,9,2,7,9,0,2,2,11,7,-1,-1,-1,-1],[7,5,2,7,2,11,5,9,2,3,2,8,9,8,2,-1],[2,5,10,2,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1],[8,2,0,8,5,2,8,7,5,10,2,5,-1,-1,-1,-1],[9,0,1,5,10,3,5,3,7,3,10,2,-1,-1,-1,-1],[9,8,2,9,2,1,8,7,2,10,2,5,7,5,2,-1],
[1,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,8,7,0,7,1,1,7,5,-1,-1,-1,-1,-1,-1,-1],[9,0,3,9,3,5,5,3,7,-1,-1,-1,-1,-1,-1,-1],[9,8,7,5,9,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[5,8,4,5,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1],[5,0,4,5,11,0,5,10,11,11,3,0,-1,-1,-1,-1],[0,1,9,8,4,10,8,10,11,10,4,5,-1,-1,-1,-1],[10,11,4,10,4,5,11,3,4,9,4,1,3,1,4,-1],[2,5,1,2,8,5,2,11,8,4,5,8,-1,-1,-1,-1],[0,4,11,0,11,3,4,5,11,2,11,1,5,1,11,-1],[0,2,5,0,5,9,2,11,5,4,5,8,11,8,5,-1],[9,4,5,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[2,
5,10,3,5,2,3,4,5,3,8,4,-1,-1,-1,-1],[5,10,2,5,2,4,4,2,0,-1,-1,-1,-1,-1,-1,-1],[3,10,2,3,5,10,3,8,5,4,5,8,0,1,9,-1],[5,10,2,5,2,4,1,9,2,9,4,2,-1,-1,-1,-1],[8,4,5,8,5,3,3,5,1,-1,-1,-1,-1,-1,-1,-1],[0,4,5,1,0,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[8,4,5,8,5,3,9,0,5,0,3,5,-1,-1,-1,-1],[9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,11,7,4,9,11,9,10,11,-1,-1,-1,-1,-1,-1,-1],[0,8,3,4,9,7,9,11,7,9,10,11,-1,-1,-1,-1],[1,10,11,1,11,4,1,4,0,7,4,11,-1,-1,-1,-1],[3,1,4,3,4,8,1,10,4,7,4,11,10,11,4,-1],[4,11,7,9,
11,4,9,2,11,9,1,2,-1,-1,-1,-1],[9,7,4,9,11,7,9,1,11,2,11,1,0,8,3,-1],[11,7,4,11,4,2,2,4,0,-1,-1,-1,-1,-1,-1,-1],[11,7,4,11,4,2,8,3,4,3,2,4,-1,-1,-1,-1],[2,9,10,2,7,9,2,3,7,7,4,9,-1,-1,-1,-1],[9,10,7,9,7,4,10,2,7,8,7,0,2,0,7,-1],[3,7,10,3,10,2,7,4,10,1,10,0,4,0,10,-1],[1,10,2,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,9,1,4,1,7,7,1,3,-1,-1,-1,-1,-1,-1,-1],[4,9,1,4,1,7,0,8,1,8,7,1,-1,-1,-1,-1],[4,0,3,7,4,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[9,10,8,10,11,8,-1,
-1,-1,-1,-1,-1,-1,-1,-1,-1],[3,0,9,3,9,11,11,9,10,-1,-1,-1,-1,-1,-1,-1],[0,1,10,0,10,8,8,10,11,-1,-1,-1,-1,-1,-1,-1],[3,1,10,11,3,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[1,2,11,1,11,9,9,11,8,-1,-1,-1,-1,-1,-1,-1],[3,0,9,3,9,11,1,2,9,2,11,9,-1,-1,-1,-1],[0,2,11,8,0,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[3,2,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[2,3,8,2,8,10,10,8,9,-1,-1,-1,-1,-1,-1,-1],[9,10,2,0,9,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[2,3,8,2,8,10,0,1,8,1,10,8,-1,-1,-1,-1],[1,10,2,-1,-1,-1,-1,-1,-1,-1,-1,
-1,-1,-1,-1,-1],[1,3,8,9,1,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,9,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]];function ol(a,b){this.f=a;this.l=b.stack[0];this.i=null;this.h={wb:.09,alpha:.5,beta:.5,gamma:500,X:null};this.A=this.u=this.L=null;this.C=20}
ol.prototype.start=function(){var a=this,b,c,d,e,f,h;return Ea(function(k){if(1==k.f)return console.log("FFR__driver::start()"),b=a,z(k,pl(a.f,a.l,function(b){return ql(a,b)}),2);if(3!=k.f)return z(k,a.f.Yc(),3);c=k.h;d=tk(c);e=d[0];e.result?(f=new Blob([d[1]],{type:"image/png"}),h=new rl(a.l,f,d[2]),sl(h,function(a){if(-1==h.l)var c=null;else{c=h.l;var d=h.h;c={center:new THREE.Vector3(d[4*c],d[4*c+1],d[4*c+2]),radius:d[4*c+3]}}c&&"OK"==a&&tl(b,c.center,c.radius)})):alert(e.reason);k.f=0})};
function tl(a,b,c){var d,e,f,h,k;Ea(function(l){switch(l.f){case 1:return d=b.x.toFixed(2),e=b.y.toFixed(2),f=b.z.toFixed(2),h=c.toFixed(2),console.log("FFR__driver::initializeAndSegmentAorta("+d+","+e+","+f+","+h+")"),z(l,a.f.Zc(d,e,f,h),2);case 2:return z(l,ul(a.f,function(b){return ql(a,b)}),3);case 3:return z(l,vl(a.f,"GetOptimalTau"),4);case 4:k=l.h,0<k&&(a.h.wb=k),wl(a),l.f=0}})}
function wl(a){var b,c;Ea(function(d){console.log("Aorta preview step");a.L||(b=fb("r0").parentNode,fb("r0").style.display="none",fb("r1").style.display="none",fb("r2").style.display="none",fb("r3").style.display="none",a.L=Z.enable(b),Z.Id(b),Z.render(b));c=new xl(a.f,a.h,a.L);yl(c,function(b){"ok"==b&&(a.u=c.L.J,a.A=c.l,b=c,b={wb:b.f.getValue()/100,alpha:document.getElementById(b.B).value,beta:document.getElementById(b.Xa).value,gamma:document.getElementById(b.D).value,X:b.l},a.h=b,zl(a))});d.f=
0})}
function zl(a){var b,c,d,e,f,h,k,l,m,p,r,q;Ea(function(t){switch(t.f){case 1:return b=a.h.wb,c=a.h.alpha,d=a.h.beta,e=a.h.gamma,console.log("step3("+b+","+c+","+d+","+e+") starts"),f=performance.now(),console.log("calling PrepareVesselsProc"),z(t,Al(a.f,a.h,function(b){return ql(a,b)}),2);case 2:return console.log("PrepareVesselsProc returns in",((performance.now()-f)/1E3).toFixed(3),"\u0441\u0435\u043a"),z(t,vl(a.f,"SetVesselsSeeds"),3);case 3:return console.log("SetVesselsSeeds returns",performance.now()),f=
performance.now(),z(t,Bl(a.f),4);case 4:h=t.h,console.log("LoadAortaObject returns in",((performance.now()-f)/1E3).toFixed(3),"\u0441\u0435\u043a"),k=tk(h),l=new ok(k[0],"aorta"),m=l.geometry(),p=new THREE.Mesh(m,new THREE.MeshLambertMaterial({color:64250,side:THREE.DoubleSide})),r=a.L.J,r.add(p),r.remove(a.A),a.A=p,q=new Cl(a.f,a.L),Dl(q,function(b){console.log(b);"cancel"==b?wl(a):(a.C=document.getElementById(q.i).value,a.u.remove(q.h),El(a))}),t.f=0}})}
function El(a){var b,c,d,e,f,h,k,l,m,p,r,q,t;Ea(function(n){switch(n.f){case 1:return console.log("---------------------start step 4----------------- "),b=performance.now(),z(n,Fl(a.f,a.h,a.C,function(b){return ql(a,b)}),2);case 2:return console.log("Thinning returns in",((performance.now()-b)/1E3).toFixed(3),"\u0441\u0435\u043a"),b=performance.now(),z(n,Bl(a.f),3);case 3:return c=n.h,console.log("LoadAortaObject returns in",((performance.now()-b)/1E3).toFixed(3),"\u0441\u0435\u043a"),d=tk(c),e=new ok(d[0],
"aorta"),z(n,vl(a.f,"GetVesselsObjectsCount"),4);case 4:f=n.h,h=[],k=0;case 5:if(!(k<f)){p=a.L.J;for(r=0;r<p.children.length;r++)"Mesh"==p.children[r].type&&p.remove(p.children[r]);console.log("---------------------step 4 finished----------------- ");return z(n,Gl(a),9)}return z(n,sk(a.f,"LoadVesselsObject "+k),8);case 8:l=n.h;m=tk(l);h.push(new ok(m[0],"vessel"+k));k++;n.f=5;break;case 9:q=n.h,console.log("calling processMarkStenosis"),t={stack:a.l,Dc:e,Zd:h,P:q},gk(X.aa,t),n.f=0}})}
function Gl(a){var b,c,d,e,f,h,k,l;return Ea(function(m){switch(m.f){case 1:return console.log("ffrdriver.getVesselInfo()"),z(m,vl(a.f,"GetVesselsCount"),2);case 2:b=m.h,c=[],d=0;case 3:if(!(d<b)){m.f=5;break}return z(m,vl(a.f,"GetVesselInfo "+d),6);case 6:return e=m.h,f=e.split(" "),f.splice(0,2),e=f.join(" "),k=h=void 0,z(m,vl(a.f,"GetVesselBifurcations "+d),7);case 7:l=m.h;if(!(l instanceof Blob)){m.f=8;break}return z(m,Hl(l),9);case 9:h=m.h;case 8:return z(m,vl(a.f,"GetVesselCenterLine "+d),10);
case 10:l=m.h;if(!(l instanceof Blob)){m.f=11;break}return z(m,Hl(l),12);case 12:k=m.h;case 11:c.push({name:e,ag:h,ga:k});d++;m.f=3;break;case 5:return m.return(c)}})}
function ql(a,b){var c=b.split(" ");if(1<c.length){var d=(100*parseFloat(c[0])).toFixed(1);c.shift();c=c.join(" ");a.i||(a.i=new Yj,Xi(a.i.f.f,c),a.i.f.f.K(!0));b=a.i;0>d&&(d=0);100<d&&(d=100);var e=b.h;Sj(e.i,d);e.j()&&Wj(e);Pd(b.l,d+"%");"fin"==c?a.i&&(a.i.close(),a.i=null):Pd(a.i.i,c)}else console.log("showProgress(): \u043d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442: ",b)}
function Hl(a){return new Promise(function(b){var c=new FileReader;c.onload=function(){var a=new Float64Array(c.result);b(a)};c.readAsArrayBuffer(a)})}function Il(a){return new Promise(function(b){var c=new FileReader;c.onload=function(){var a=new Uint8Array(c.result);b(a)};c.readAsArrayBuffer(a)})}
function Jl(a,b,c){var d="";b=b?b:0;for(c=b+(c?c:a.length);b<c;b++){var e=a[b];128>e?d+=String.fromCharCode(e):191<e&&224>e?(d+=String.fromCharCode((e&31)<<6|a[b+1]&63),b+=1):223<e&&240>e?(d+=String.fromCharCode((e&15)<<12|(a[b+1]&63)<<6|a[b+2]&63),b+=2):(e=((e&7)<<18|(a[b+1]&63)<<12|(a[b+2]&63)<<6|a[b+3]&63)-65536,d+=String.fromCharCode(e>>10|55296,e&1023|56320),b+=3)}return d}
function Kl(a,b){var c=a.stack[0].dimensionsIJK;c=[c.x,c.y,c.z];var d="limits=["+c[0]+","+c[1]+","+c[2]+"]",e="bounds=["+("["+b[0][0]+"-"+b[0][1]+"]")+","+("["+b[1][0]+"-"+b[1][1]+"]")+","+("["+b[2][0]+"-"+b[2][1]+"]")+"]";console.log("seriesResize(): "+e+" "+d);for(var f=3==b.length,h=0;3>h;h++)if(2==b[h].length){f&=b[h][0]<=b[h][1];var k=b[h][0];f&=0<=k&&k<c[h];k=b[h][1];f&=0<=k&&k<c[h]}console.assert(f,"bounds valid "+e+" "+d);if(!f)return null;c=new AMI.SeriesModel;for(var l in a)c[l]=a[l];a=
a.stack[0];l=new AMI.StackModel;for(var m in a)l[m]=a[m];l.frame=[];for(m=b[2][0];m<=b[2][1];m++){d=a.frame[m];e=b[0];f=b[1];h=e[1]-e[0]+1;k=f[1]-f[0]+1;var p=Object.assign(new AMI.FrameModel,d);p.imagePosition=d.imagePosition.slice();p.minMax=d.minMax.slice();console.assert(p.imagePosition!=d.imagePosition,"assert imagePosition");console.assert(p.minMax!=d.minMax,"assert minMax");for(var r=new Int16Array(h*k),q=0,t=f[0];t<=f[1];t++)for(var n=e[0];n<=e[1];n++)r[q++]=d.pixelData[t*d.columns+n];p.rows=
k;p.columns=h;p.pixelData=r;p.imagePosition[0]+=e[0]*p.pixelSpacing[0];p.imagePosition[1]+=f[0]*p.pixelSpacing[1];l.frame.push(p)}l.prepare();c.numberOfFrames=l._numberOfFrames;c.stack=[l];return c};function ok(a,b){this.H=a;this.R=a.R;this.data=a.data;this.s=[];this.f={first:-1,Od:-1,total:0};this.length=this.R[0]*this.R[1]*this.R[2];this.name=b?b:"";this.i=new THREE.Vector3(0,0,0);this.h=new THREE.Vector3(0,0,0)}function Ll(a,b,c,d){return b+c*a.R[0]+d*a.R[0]*a.R[1]}
ok.prototype.geometry=function(){if(0==this.data.length)var a=[];else{!this.H.qa||this.H.qa!=Ml&&this.H.qa!=Nl?(0==this.s.length&&uk(this),a=this.s):a=this.H.s;var b=[a[1]-a[0]+1,a[3]-a[2]+1,a[5]-a[4]+1],c=b[0];b=c*b[1];for(var d=[],e=a[4];e<a[5];e++)for(var f=e,h=a[2];h<a[3];h++)for(var k=h,l=a[0];l<a[1];l++){var m=l,p=l-a[0]+(h-a[2])*c+(e-a[4])*b;p=nl[1*Ol(this,p)+2*Ol(this,p+1)+4*Ol(this,p+1+b)+8*Ol(this,p+b)+16*Ol(this,p+c)+32*Ol(this,p+1+c)+64*Ol(this,p+1+c+b)+128*Ol(this,p+c+b)];for(var r=0;r<
p.length;r++){var q=p[r];if(-1!==q)switch(q){case 0:d.push(m+.5,k,f);break;case 1:d.push(m+1,k,f+.5);break;case 2:d.push(m+.5,k,f+1);break;case 3:d.push(m,k,f+.5);break;case 4:d.push(m+.5,k+1,f);break;case 5:d.push(m+1,k+1,f+.5);break;case 6:d.push(m+.5,k+1,f+1);break;case 7:d.push(m,k+1,f+.5);break;case 8:d.push(m,k+.5,f);break;case 9:d.push(m+1,k+.5,f);break;case 10:d.push(m+1,k+.5,f+1);break;case 11:d.push(m,k+.5,f+1)}}}a=d}if(0!==a.length%3||0===a.length)console.log("Cube::vertStat(): vertices length not multiple 3 or equal 0");
else for(c=new THREE.Vector3(a[0],a[1],a[2]),b=(new THREE.Vector3).copy(c),d=a.length/3,e=0;e<d;e++)f=a[3*e],h=a[3*e+1],k=a[3*e+2],c.x>f&&(c.x=f),b.x<f&&(b.x=f),c.y>h&&(c.y=h),b.y<h&&(b.y=h),c.z>k&&(c.z=k),b.z<k&&(b.z=k);c=new THREE.BufferGeometry;c.addAttribute("position",new THREE.Float32BufferAttribute(a,3));c.computeVertexNormals();c.computeBoundingBox();return c};
ok.prototype.getValue=function(a,b,c){if(0>a||a>=this.R[0]||0>b||b>=this.R[1]||0>c||c>=this.R[2])throw Error("FSF: getValue() invalid ["+a+","+b+","+c+"]");if(this.H.qa&&(this.H.qa==Ml||this.H.qa==Nl)){if(a<this.H.s[0]||a>this.H.s[1]||b<this.H.s[2]||b>this.H.s[3]||c<this.H.s[4]||c>this.H.s[5])return 0;var d=[this.H.s[1]-this.H.s[0]+1,this.H.s[3]-this.H.s[2]+1,this.H.s[5]-this.H.s[4]+1];a=[a-this.H.s[0],b-this.H.s[2],c-this.H.s[4]];d=a[0]+a[1]*d[0]+a[2]*d[0]*d[1];if(this.H.qa==Ml)return this.data[d];
a=d%8;return this.data[(d-a)/8]&1<<7-a?1:0}return this.H.qa==Pl?(d=Ll(this,a,b,c),a=d%8,this.data[(d-a)/8]&1<<7-a?1:0):this.data[Ll(this,a,b,c)]?1:0};function Ol(a,b){var c=b%8;return a.data[(b-c)/8]&1<<7-c?1:0}
function uk(a,b){a.f={total:0,first:-1,Od:-1};if(0!=a.data.length){if(!a.H.qa||a.H.qa!=Ml&&a.H.qa!=Nl){a.s=[a.R[0],-1,a.R[1],-1,a.R[2],-1];for(var c=0;c<a.length;c++){var d=c%a.R[0];d=[d,(c-d)/a.R[0]%a.R[1],Math.floor(c/a.R[0]/a.R[1])];a.getValue(d[0],d[1],d[2])&&(a.f.total++,-1==a.f.first&&(a.f.first=c),a.f.Od=c,a.s[0]>d[0]&&(a.s[0]=d[0]|0),a.s[1]<d[0]&&(a.s[1]=d[0]|0),a.s[2]>d[1]&&(a.s[2]=d[1]|0),a.s[3]<d[1]&&(a.s[3]=d[1]|0),a.s[4]>d[2]&&(a.s[4]=d[2]|0),a.s[5]<d[2]&&(a.s[5]=d[2]|0))}}else{for(var e,
f=a.H.s[4];f<=a.H.s[5];f++)for(var h=a.H.s[2];h<=a.H.s[3];h++)for(var k=a.H.s[0];k<=a.H.s[1];k++)a.getValue(k,h,f)&&(a.f.total++,-1==a.f.first&&(a.f.first=Ll(a,k,h,f)),c=k,d=h,e=f);a.f.Od=Ll(a,c,d,e)}void 0!=b&&(a.i.copy(new THREE.Vector3(a.s[0],a.s[2],a.s[4])),a.h.copy(new THREE.Vector3(a.s[1],a.s[3],a.s[5])),a.log())}}ok.prototype.toString=function(){return"cube "+this.name+"["+this.R[0]+","+this.R[1]+","+this.R[2]+"]"};
ok.prototype.log=function(){var a="cube "+this.name+"["+this.R[0]+","+this.R[1]+","+this.R[2]+"] nonzero-stats:";a+="{first:"+this.f.first+",last:"+this.f.Od+",total:"+this.f.total+"}";a=!this.H.qa||this.H.qa!=Ml&&this.H.qa!=Nl?a+(" ROI=["+this.s[0]+"x"+this.s[1]+","+this.s[2]+"x"+this.s[3]+","+this.s[4]+"x"+this.s[5]+"]"):a+(" protoCube.ROI=["+this.H.s[0]+"x"+this.H.s[1]+","+this.H.s[2]+"x"+this.H.s[3]+","+this.H.s[4]+"x"+this.H.s[5]+"]");console.log(a)};
function pk(a){if(!a.H.qa||a.H.qa!=Nl){uk(a);var b=a.s,c=new Uint8Array(Math.floor((b[1]-b[0]+1)*(b[3]-b[2]+1)*(b[5]-b[4]+1)/8)),d=0,e=0;c[0]=0;for(var f=b[4];f<=b[5];f++)for(var h=b[2];h<=b[3];h++)for(var k=b[0];k<=b[1];k++){var l=a.getValue(k,h,f)?1:0;c[d]|=l<<7-e;e++;8==e&&(d++,e=c[d]=0)}a.s=[];a.H.qa=Nl;a.H.s=b;a.data=c;a.H.data=null}};function Ql(){var a=THREE.Group.call(this)||this;var b=new THREE.Vector3(0,0,0);a.normal=new THREE.Vector3(0,0,1);a.yh=new THREE.ArrowHelper(a.normal,b,10,255,4,2);a.wh=new THREE.ArrowHelper(new THREE.Vector3(1,0,0),b,10,16711680,4,2);a.xh=new THREE.ArrowHelper(new THREE.Vector3(0,1,0),b,10,65280,4,2);b=new THREE.MeshBasicMaterial({color:9474192,side:THREE.DoubleSide,transparent:!0,opacity:.5});var c=new THREE.PlaneGeometry(20,20,1,1);a.gd=new THREE.Mesh(c,b);a.add(a.gd);a.add(a.yh);a.add(a.wh);a.add(a.xh);
return a}ka(Ql,THREE.Group);Ql.prototype.setColor=function(a){this.gd.material.color.setHex(a)};function Rl(a,b,c){var d=b.clone().add(c);a.position.copy(b);a.lookAt(d);a.normal=c.clone().normalize()}Ql.prototype.plane=function(){return(new THREE.Plane).setFromNormalAndCoplanarPoint(this.normal,this.position)};function Sl(a,b,c){var d=THREE.EventDispatcher.call(this)||this;d.F=a;d.F.far=10;d.F.fov=30;d.domElement=b;d.ga=c;d.Tc=c.length/3-1;d.tb=Math.floor(d.Tc/2);a=d.point(d.tb);b=d.point(d.tb+1);a.equals(b)&&(b=d.point(d.tb-1));b=(new THREE.Vector3).subVectors(b,a);b.normalize();c=new Ql;Rl(c,a,b);d.ee=c;d.next();return d}ka(Sl,THREE.EventDispatcher);
Sl.prototype.next=function(){var a=this.point(this.tb+1),b=this.point(this.tb+3);a.equals(b)&&(b=this.point(0));this.F.position.copy(a);this.F.lookAt(b);this.ee&&(b=(new THREE.Vector3).subVectors(b,a).normalize(),Rl(this.ee,a,b));this.tb<this.Tc&&this.tb++;this.dispatchEvent({type:"change"})};Sl.prototype.point=function(a){return a>this.Tc?(new THREE.Vector3).fromArray(this.ga,3*this.Tc):0>a?(new THREE.Vector3).fromArray(this.ga,0):(new THREE.Vector3).fromArray(this.ga,3*a)};
Sl.prototype.dispose=function(){console.log("AxplaneControls::dispose()")};Sl.prototype.update=function(){this.F.updateProjectionMatrix()};la.Object.defineProperties(Sl.prototype,{position:{configurable:!0,enumerable:!0,get:function(){return this.gd.position.clone()},set:function(){console.log("AxplaneControls::set position()"," its a read only attribute.. ignoring")}},gd:{configurable:!0,enumerable:!0,get:function(){return this.ee}}});var Tl={id:"",ki:void 0,domElement:null,ja:null,color:2171169,Pf:0,F:null,controls:null,J:null,Da:null,za:null,ji:null,cf:null,stack:null,render:null,lh:!1,le:!0,vb:null,ld:null,Ce:null},Z={create:function(){return Object.assign({},Tl)},enable:function(a){var b=Z.Eb(a,!1);b||(Z.data.push(Object.assign({},Tl)),b=Z.data[Z.data.length-1],"string"===typeof a?(b.id=a,b.domElement=document.getElementById(a)):(b.domElement=a,b.id=a.id));return b},isEnabled:function(a){return null!==Z.Eb(a,!1)},Id:function(a){a=
Z.Eb(a,!0);a.ja=new THREE.WebGLRenderer({antialias:!0});a.ja.setSize(a.domElement.clientWidth,a.domElement.clientHeight);a.ja.setClearColor(a.color,1);a.ja.domElement.id=a.Pf;a.domElement.appendChild(a.ja.domElement);a.F=new THREE.PerspectiveCamera(45,a.domElement.clientWidth/a.domElement.clientHeight,.1,1E5);a.F.position.x=500;a.F.position.y=500;a.F.position.z=-500;a.controls=new AMI.TrackballControl(a.F,a.domElement);a.controls.rotateSpeed=5.5;a.controls.zoomSpeed=1.2;a.controls.panSpeed=.8;a.controls.staticMoving=
!0;a.controls.dynamicDampingFactor=.3;a.J=new THREE.Scene;a.Da=new THREE.DirectionalLight(16777215,1);a.Da.position.copy(a.F.position);a.J.add(a.Da)},Hd:function(a){a=Z.Eb(a,!0);a.ja=new THREE.WebGLRenderer({antialias:!0});a.ja.autoClear=!1;a.ja.localClippingEnabled=!0;a.ja.setSize(a.domElement.clientWidth,a.domElement.clientHeight);a.ja.setClearColor(1184274,1);a.ja.domElement.id=a.Pf;a.domElement.appendChild(a.ja.domElement);a.F=new AMI.OrthographicCamera(a.domElement.clientWidth/-2,a.domElement.clientWidth/
2,a.domElement.clientHeight/2,a.domElement.clientHeight/-2,1,1E3);a.controls=new AMI.TrackballOrthoControl(a.F,a.domElement);a.controls.staticMoving=!0;a.controls.noRotate=!0;a.F.controls=a.controls;a.J=new THREE.Scene},Eb:function(a,b){for(var c="string"===typeof a?"id":"domElement",d=0;d<Z.data.length;d++)if(Z.data[d][c]===a)return Z.data[d];if(b)throw Error("getEnabledElement: can not find element "+a);return null},render:function(a){function b(){e.clear();c.le?(requestAnimationFrame(b),d.update(),
e.render(f,h),c.vb&&(e.autoClear=!1,e.render(c.vb,c.ld))):console.log("stoped UP3.render()")}var c=Z.Eb(a,!0);if(c.render)c.render(c);else{var d=c.controls,e=c.ja,f=c.J,h=c.F;c.lh=!0;c.le=!0;b()}},Vc:function(a){if(a=Z.Eb(a,!0))a.le=!1},ri:function(a,b){Z.Eb(a,!0).render=b},disable:function(a){if(a=Z.Eb(a,!0)){a.ja&&(a.ja=null);a.F&&(a.F=null);a.controls&&(a.controls=null);a.J&&(a.J=null);a.Da&&(a.Da=null);a.cf&&(a.cf=null);a.stack&&(a.stack=null);for(var b=0;b<Z.data.length;b++)if(Z.data[b]==a){Z.data.splice(b,
1);break}}},data:[]};window.UP3=Z;function Ul(a){this.h=void 0===a?1:a}
(function(){function a(a,b,c){return c[Math.min(a,b)+"_"+Math.max(a,b)]}function b(a,b,c,d,e,f){var h=Math.min(a,b),k=Math.max(a,b),l=h+"_"+k;l in d?c=d[l]:(c={a:c[h],b:c[k],Rd:null,faces:[]},d[l]=c);c.faces.push(e);f[a].ke.push(c);f[b].ke.push(c)}function c(a,b,c,d,e){a.push(new THREE.Face3(b,c,d,void 0,void 0,e))}function d(a,b){return Math.abs(b-a)/2+Math.min(a,b)}function e(a,b,c,d){a.push([b.clone(),c.clone(),d.clone()])}var f=["a","b","c"];Ul.prototype.f=function(h){var k=new THREE.Vector3,
l=[],m,p,r;var q=h.vertices;var t=h.faces;var n=h.faceVertexUvs[0];var B=void 0!==n&&0<n.length;var v=Array(q.length);var F={};var x=0;for(r=q.length;x<r;x++)v[x]={ke:[]};x=0;for(r=t.length;x<r;x++){var y=t[x];b(y.a,y.b,q,F,y,v);b(y.b,y.c,q,F,y,v);b(y.c,y.a,q,F,y,v)}r=[];for(I in F){x=F[I];var u=new THREE.Vector3;y=.375;var K=.125;var S=x.faces.length;2!=S&&(y=.5,K=0);u.addVectors(x.a,x.b).multiplyScalar(y);k.set(0,0,0);for(m=0;m<S;m++){y=x.faces[m];for(p=0;3>p;p++){var O=q[y[f[p]]];if(O!==x.a&&O!==
x.b)break}k.add(O)}k.multiplyScalar(K);u.add(k);x.Rd=r.length;r.push(u)}var W;y=[];var I=0;for(x=q.length;I<x;I++){p=q[I];S=v[I].ke;u=S.length;3==u?W=.1875:3<u&&(W=3/(8*u));O=1-u*W;K=W;2>=u&&2==u&&(O=.75,K=.125);var ba=p.clone().multiplyScalar(O);k.set(0,0,0);for(m=0;m<u;m++)O=S[m],O=O.a!==p?O.a:O.b,k.add(O);k.multiplyScalar(K);ba.add(k);y.push(ba)}k=y.concat(r);v=y.length;q=[];W=new THREE.Vector2;O=new THREE.Vector2;r=new THREE.Vector2;I=0;for(x=t.length;I<x;I++)y=t[I],m=a(y.a,y.b,F).Rd+v,u=a(y.b,
y.c,F).Rd+v,K=a(y.c,y.a,F).Rd+v,c(q,m,u,K,y.De),c(q,y.a,m,K,y.De),c(q,y.b,u,m,y.De),c(q,y.c,K,u,y.De),B&&(u=n[I],y=u[0],m=u[1],u=u[2],W.set(d(y.x,m.x),d(y.y,m.y)),O.set(d(m.x,u.x),d(m.y,u.y)),r.set(d(y.x,u.x),d(y.y,u.y)),e(l,W,O,r),e(l,y,W,r),e(l,m,O,W),e(l,u,r,O));h.vertices=k;h.faces=q;B&&(h.faceVertexUvs[0]=l)}})();function FileVolumeLoader(){var a=AMI.VolumeLoader.call(this)||this;a.Zf=null;return a}ka(FileVolumeLoader,AMI.VolumeLoader);FileVolumeLoader.prototype.fetch=function(a){return new Promise(function(b){var c=new FileReader;c.onload=function(){b({url:a,buffer:c.result})};c.readAsArrayBuffer(a)})};
FileVolumeLoader.prototype.load=function(a,b){var c=this;console.log("FileVolumeLoader::load()",a);var d=[];if(a instanceof File)d.push(a);else if(a instanceof FileList)for(var e=0;e<a.length;e++)d.push(a[e]);var f=[];d.forEach(function(a){Array.isArray(a)?f.push(c.loadSequenceGroup(a,b)):f.push(c.loadSequence(a,b))});return Promise.all(f)};FileVolumeLoader.prototype.parseFrame=function(a,b,c,d,e,f,h){this.Zf=e;AMI.VolumeLoader.prototype.parseFrame.call(this,a,b,c,d,e,f,h)};var Pl=37,Ml=38,Nl=39;function Vl(a){var b=a.data,c=a.offset;if(29!=b[c])throw Error("FSF: invalid Float64Array marker");if(c+8>b.length)throw Error("FSF: unsufficient buffer length");var d=256*b[c+2]+b[c+3];if(c+8+8*d>b.length)throw Error("FSF: unsufficient buffer length");b=new Float64Array(b.buffer,c+8,d);a.offset+=8+8*d;return b}
function Wl(a){var b=a.data,c=a.offset,d=b[c]&128;if((b[c]&-193)!=Ml)throw Error("FSF: invalid MASKWITHROI marker");if(c+20>b.length)throw Error("FSF: unsufficient buffer length");var e=256*b[c+2]+b[c+3],f=256*b[c+4]+b[c+5],h=256*b[c+6]+b[c+7],k=256*b[c+8]+b[c+9],l=256*b[c+10]+b[c+11],m=256*b[c+12]+b[c+13],p=256*b[c+14]+b[c+15],r=256*b[c+16]+b[c+17],q=256*b[c+18]+b[c+19],t=[k,l,m,p,r,q];d=d?0:(l-k+1)*(p-m+1)*(q-r+1);if(c+20+d>b.length)throw Error("FSF: unsufficient buffer length");b=new Uint8Array(b.buffer,
c+20,d);0==d&&console.assert(0==b.length,"mask should be zero-length Uint8Array ",b);a.offset+=20+d;return{R:[e,f,h],data:b,qa:Ml,s:t}}
function Xl(a){var b=a.data,c=a.offset,d=b[c]&128;if((b[c]&-193)!=Nl)throw Error("FSF: invalid BITMASKWITHROI marker");if(c+20>b.length)throw Error("FSF: unsufficient buffer length");var e=256*b[c+2]+b[c+3],f=256*b[c+4]+b[c+5],h=256*b[c+6]+b[c+7],k=256*b[c+8]+b[c+9],l=256*b[c+10]+b[c+11],m=256*b[c+12]+b[c+13],p=256*b[c+14]+b[c+15],r=256*b[c+16]+b[c+17],q=256*b[c+18]+b[c+19],t=[k,l,m,p,r,q];d=d?0:(l-k+1)*(p-m+1)*(q-r+1);k=d%8;d=((d-k)/8|0)+(0<k?1:0);if(c+20+d>b.length)throw Error("FSF: unsufficient buffer length");
b=new Uint8Array(b.buffer,c+20,d);0==d&&console.assert(0==b.length,"mask should be zero-length Uint8Array ",b);a.offset+=20+d;return{R:[e,f,h],data:b,qa:Nl,s:t}}
function Yl(a){var b=a.data,c=a.offset;if(b[c]!=Pl)throw Error("FSF: invalid BITMASK marker");if(c+8>b.length)throw Error("FSF: unsufficient buffer length");var d=256*b[c+2]+b[c+3],e=256*b[c+4]+b[c+5],f=256*b[c+6]+b[c+7],h=d*e*f,k=h/8;console.log("dims&packed size offset",d,e,f,k,c);if(h%8)throw Error("FSF::parseBitMaskCube \u0432\u043e\u043a\u0441\u0435\u043b\u044c\u043d\u0430\u044f \u043c\u0430\u0441\u043a\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0438\u043c\u0435\u0442\u044c \u0440\u0430\u0437\u043c\u0435\u0440 \u043a\u0440\u0430\u0442\u043d\u044b\u0439 8");if(c+
8+k>b.length)throw Error("FSF: unsufficient buffer length");b=new Uint8Array(b.buffer,c+8,k);a.offset+=8+k;return{R:[d,e,f],data:b,qa:Pl}}
function Zl(a){var b=a.data,c=a.offset,d=b[c]&128;if(5!=(b[c]&-193))throw Error("FSF: invalid Uint8Array marker");var e=d?4:2;if(c+e>=b.length)throw Error("FSF: unsufficient buffer length");d=d?16777216*b[c+2]+65536*b[c+3]+256*b[c+4]+b[c+5]:256*b[c+2]+b[c+3];if(c+d+e>=b.length)throw Error("FSF: unsufficient buffer length");a.offset+=d+2+e;return new Uint8Array(b.buffer,c+2+e,d)}
function $l(a){var b=a.data,c=a.offset,d=b[c]&128;if(17!=(b[c]&-193))throw Error("FSF: invalid Int32Array marker");var e=d?6:2;if(c+e>=b.length)throw Error("FSF: unsufficient buffer length");d=d?16777216*b[c+2]+65536*b[c+3]+256*b[c+4]+b[c+5]:256*b[c+2]+b[c+3];if(c+d+e>=b.length)throw Error("FSF: unsufficient buffer length");a.offset+=2+e+4*d;return new Int32Array(b.buffer,c+2+e,d)}
function am(a){var b=a.data,c=a.offset,d=b[c]&128;if(25!=(b[c]&-193))throw Error("FSF: invalid Float32Array marker");var e=d?6:2;if(c+e>=b.length)throw Error("FSF: unsufficient buffer length");d=d?16777216*b[c+2]+65536*b[c+3]+256*b[c+4]+b[c+5]:256*b[c+2]+b[c+3];if(c+d+e>=b.length)throw Error("FSF: unsufficient buffer length");a.offset+=2+e+4*d;return new Float32Array(b.buffer,c+2+e,d)}
function tk(a){a=new Uint8Array(a);for(var b=[],c={data:a,offset:0};c.offset<a.length;){var d=a[c.offset],e=d&-65;if(60==e)c.offset++;else if(184==e)b.push({result:!0}),c.offset+=2;else if(185==e){console.log("fbuf",c);d={result:!1,code:a[c.offset+1],reason:""};c.offset+=2;e=d;var f=c.data,h=c.offset;if(33!=f[h])throw Error("FSF: invalid STRING marker");if(h+3>=f.length)throw Error("FSF: unsufficient buffer length");var k=256*f[h+2]+f[h+3];if(h+k+4>f.length)throw Error("FSF: unsufficient buffer length");
c.offset+=k+4;e.reason=Jl(f,h+4,k);b.push(d)}else if(5==(e&-129))b.push(Zl(c));else if(17==(e&-129))b.push($l(c));else if(25==(e&-129))b.push(am(c));else if(29==e)b.push(Vl(c));else if(e==Pl)b.push(Yl(c));else if((e&-129)==Ml)b.push(Wl(c));else if((e&-129)==Nl)b.push(Xl(c));else throw console.log("FSF: fbuf ",bm(c.data.subarray(c.offset))),Error("FSF: invalid marker "+d.toString(16));}return b}
function cm(a,b){b=b||[a.length];var c=b.length&3,d="Int8Array Uint8Array Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" ");a=!ArrayBuffer.isView(a)||a instanceof DataView?-1:d.indexOf(a.constructor.name);if(-1==a)throw Error("unknown FSF type");a=new Uint8Array([a<<2|c,0,0,0,0,0,0,0]);for(d=0;d<c;d++)a[2+2*d]=b[d]>>8&255,a[2*d+3]=b[d]&255;return a}function dm(a){var b=new Uint8Array(2);b[0]=56;b[1]=a;return b}function em(a){return new Blob([cm(a),a])}
function fm(a){a=Float32Array.from(a);return new Blob([cm(a),a])}function bm(a){var b=16;a=a instanceof Uint8Array?a:new Uint8Array(a);b>a.length&&(b=a.length);for(var c="",d=0;d<b;d++)c+=a[d].toString(16)+" ";return c};function rk(){var a=this;this.h=!1;this.f=new WebSocket("wss://dodo.inm.ras.ru/websocket","ffr-protocol");this.f.onopen=function(){a.h=!0};this.f.onclose=function(){a.h=!1};this.f.onerror=function(){a.h=!1};this.i={Vf:3,Yc:4,Zc:5,Ve:6}}g=rk.prototype;g.addEventListener=function(a,b){"close"===a?this.f.addEventListener("close",b):"ready"===a&&this.f.addEventListener("open",b)};
function vl(a,b){return a.h?new Promise(function(c,d){a.f.onmessage=function(a){return c(a.data)};a.f.onerror=d;console.log("sending on ffr-protocol: ",b);a.f.binaryType="blob";a.f.send(b)}):Promise.reject("no connection to server")}function sk(a,b){if(!a.h)return Promise.reject("no connection to server");console.log("sending on ffr-protocol (binary): ",b);return new Promise(function(c,d){a.f.onmessage=function(a){return c(a.data)};a.f.onerror=d;a.f.binaryType="arraybuffer";a.f.send(b)})}
function nk(a){if(!a.h)return Promise.reject("no connection to server");var b=[];return new Promise(function(c,d){a.f.onmessage=function(a){a.data instanceof Blob?Il(a.data).then(function(a){var d=[];if(0==a.length)a=[{sd:!0,result:null}];else{for(var e,f=0;f<a.length;f+=e){var m=0!=(a[f]&64);var p=a[f]&-65;if(33==p)e=256*a[f+2]+a[f+3],p=Jl(a,f+4,e),e+=4;else if(7==p||11==p){var r={R:[],data:a};e=256*a[f+2]+a[f+3];var q=256*a[f+4]+a[f+5],t=256*a[f+6]+a[f+7];r.R=[e,q,t];var n=7==p?1:11==p?2:void 0;
e=e*q*t;n=e*n;r.data=7==p?new Uint8Array(a.buffer,f+8,e):11==p?new Int16Array(a.buffer,f+8,e):null;p=r;e=8+n}else if(29==p)e=r=256*a[f+2]+a[f+3],p={R:[r],data:a},p.data=new Float64Array(a.buffer,f+8,e),e=8*r+8;else if(60==p)if(m){d.push({sd:!0,result:null});break}else{e=1;continue}else{m=!0;p="error: \u043d\u0435\u0438\u0437\u0432\u0435\u0441\u0442\u043d\u044b\u0439 \u043c\u0430\u0440\u043a\u0435\u0440  "+p+" \u0432 \u043f\u043e\u0442\u043e\u043a\u0435";d.push({sd:m,result:p});break}d.push({sd:m,
result:p})}a=d}for(d=0;d<a.length;d++)b.push(a[d].result);(0==a.length||a[a.length-1].sd)&&c(b)}):c(a.data)};a.f.onerror=d;console.log("sending on ffr-protocol: ","test load state4");a.f.send("test load state4")})}g.version=function(){return vl(this,"version")};g.Yc=function(a,b,c){a=a||2;b=b||10;c=c||35;var d=dm(this.i.Yc);a=em(new Uint16Array([a,b,c]));d=new Blob([d,a]);console.log("sending on ffr-protocol: binary CMD AortaSearch_FindAorta");return sk(this,d)};
g.Zc=function(a,b,c,d){b=void 0===a?[]:[a,b,c,d];a=dm(this.i.Zc);b=em(new Float32Array(b));return sk(this,new Blob([a,b]))};function ul(a,b){return a.h?new Promise(function(c,d){a.f.send("PrepareAortaProc");a.f.onmessage=function(a){"fin"===a.data?(b("1 fin"),c(a.data)):b(a.data)};a.f.onerror=d}):Promise.reject("busy")}function gm(a,b){return sk(a,"LoadAortaPreview "+b)}
function Al(a,b,c){return a.h?new Promise(function(d,e){a.f.send("PrepareVesselsProc "+b.wb+" "+b.alpha+" "+b.beta+" "+b.gamma);a.f.onmessage=function(a){"fin"===a.data?(c("1 fin"),d(a.data)):c(a.data)};a.f.onerror=e}):Promise.reject("busy")}
function Fl(a,b,c,d){return a.h?new Promise(function(e,f){var h="Thinning "+b.wb+" "+b.alpha+" "+b.beta+" "+b.gamma;h+=" "+c;console.log(h);a.f.send(h);a.f.onmessage=function(a){a.data.startsWith("fin")?(a=a.data.split(" "),a=1<a.length?parseInt(a[1],10):0,d("1 fin"),e(a)):d(a.data)};a.f.onerror=f}):Promise.reject("busy")}function Bl(a){return sk(a,"LoadAortaObject")}
g.Ve=function(a,b){console.log("get PrepareResult()");if(!this.h)return Promise.reject("busy");var c=this;return new Promise(function(d,e){for(var f="PrepareResult ",h=w(a),k=h.next();!k.done;k=h.next())k=k.value,f+=" "+k.Wb.x+" "+k.Wb.y+" "+k.Wb.z,f+=" "+k.fc.x+" "+k.fc.y+" "+k.fc.z+" "+k.mb+"\n";console.log(f);c.f.send(f);c.f.onmessage=function(a){a.data.startsWith("fin")?(a=a.data.split(" "),a=2==a.length?parseFloat(a[1]):""+a[1]+" "+a[2],b("1 fin"),d(a)):b(a.data)};c.f.onerror=e})};
function hm(a,b,c,d){console.log("PrepareResultBinary()");return a.h?new Promise(function(e,f){for(var h=[],k=w(b),l=k.next();!l.done;l=k.next())l=l.value,h.push(l.Wb.x,l.Wb.y,l.Wb.z),h.push(l.fc.x,l.fc.y,l.fc.z,l.mb);k=dm(a.i.Ve);h=fm(h);l=fm(c);a.f.send(new Blob([k,h,l]));a.f.onmessage=function(a){a.data.startsWith("fin")?(a=a.data.split(" "),a=2==a.length?parseFloat(a[1]):""+a[1]+" "+a[2],d("1 fin"),e(a)):d(a.data)};a.f.onerror=f}):Promise.reject("busy")}
function pl(a,b,c){if(!a.h)return Promise.reject("no connection to server");var d=b.rescaleSlope,e=b.rescaleIntercept,f=1!=d||0!=e;return new Promise(function(h,k){a.f.onmessage=function(a){return h(a.data)};a.f.onerror=k;console.log("sending on ffr-protocol: binary CMD LOAD CUBE");var l=dm(a.i.Vf);k=new Uint8Array(32);k[0]=255;var m=em(k),p=fm(b.ijk2LPS.elements),r=fm(b.lps2IJK.elements),q=fm([b._spacing.x,b._spacing.y,b._spacing.z]);k=[b.dimensionsIJK.x,b.dimensionsIJK.y,b.dimensionsIJK.z];var t=
cm(b.frame[0].pixelData,k);a.f.send(new Blob([l,m,p,r,q,t]));a.f.onmessage=function(a){"fin"===a.data?(c("1 fin"),h(a.data)):c(a.data)};for(l=0;l<k[2];l++){m=b.frame[l].pixelData;if(f){p=m.slice();for(r=0;r<m.length;r++)p[r]=d*m[r]+e;m=p}a.f.send(m)}})};function qk(a){var b;Ea(function(c){if(1==c.f)return console.log("handler__loadDICOMFileOrDir()",a),z(c,im(a),2);b=c.h;lk(X.aa.uc,b);c.f=0})}function im(a){var b,c,d;return Ea(function(e){if(1==e.f)return b=new FileVolumeLoader,z(e,b.load(a),2);c=b.data[0].mergeSeries(b.data)[0];d=c.stack[0];d.prepare();return e.return(c)})}
function jm(a){var b=J("div");xf(b,128,128);document.body.appendChild(b);var c=Z.enable(b);c.ph=0;Z.Hd(b);c.Vd="axial";eb(c,a);var d=c.domElement.firstChild;c.ja.render(c.J,c.F);c=J("canvas");xf(c,128,128);var e=c.getContext("2d");e.drawImage(d,0,0);e.font="bold 36px serif";e.fillStyle="#ff0000";a=a._numberOfFrames;e.fillText(a.toString(),10>a?107:100>a?90:1E3>a?70:50,120);a=new Image;a.src=c.toDataURL();Z.disable(b);document.body.removeChild(b);return a};function km(a){Vg.call(this);this.nb=a.nb;this.box=[]}ka(km,Vg);km.prototype.S=function(){Vg.prototype.S.call(this);this.j().innerHTML=lm};
km.prototype.I=function(){var a=this;console.log("MarkStenosisComponent::enterDocument()");Vg.prototype.I.call(this);M(this.nb,"ROIChanged",function(a){a=a.value;document.getElementById("roi_min_x").value=a.min.x;document.getElementById("roi_min_y").value=a.min.y;document.getElementById("roi_min_z").value=a.min.z;document.getElementById("roi_size_x").value=a.max.x-a.min.x;document.getElementById("roi_size_y").value=a.max.y-a.min.y;document.getElementById("roi_size_z").value=a.max.z-a.min.z;document.getElementById("initialize_ffr").disabled=
!1});document.getElementById("reset_roi").addEventListener("click",function(){var b=a.nb;b.i&&(b.s=new THREE.Box3(new THREE.Vector3(0,0,0),b.i.stack[0].dimensionsIJK.clone()))});var b=document.getElementById("initialize_ffr");b.disabled=!0;b.addEventListener("click",function(){mm(a);var b=a.nb;console.log("initializeFFRProcessing()");var c=b.s.min.x,f=b.s.min.y,h=b.s.min.z,k=b.s.max.x,l=b.s.max.y,m=b.s.max.z,p=new THREE.Box3(new THREE.Vector3(0,0,0),b.i.stack[0].dimensionsIJK);p=!b.s.equals(p);console.log("ROI box ["+
c+","+f+","+h+" - ("+k+","+l+","+m+")] "+(p?"need resize":""));c=[[c,k-1],[f,l-1],[h,m-1]];(c=p?Kl(b.i,c):b.i)?(b.Bc=new ol(b.ma,c),b.D.fg=b.Bc,b.Bc.start()):alert("series null")});b=w("roi_min_x roi_min_y roi_min_z roi_size_x roi_size_y roi_size_z".split(" "));for(var c=b.next();!c.done;c=b.next())c=document.getElementById(c.value),c.addEventListener("change",function(){return mm(a)}),this.box.push(c)};
function mm(a){var b=a.box.map(function(a){return parseInt(a.value)}),c=new THREE.Vector3(b[0],b[1],b[2]);b=new THREE.Vector3(b[0]+b[3],b[1]+b[4],b[2]+b[5]);c=new THREE.Box3(c,b);a.nb.s=c}X.Z.Uf=km;var lm='<div class="content">\n      <fieldset><legend>3D \u0421\u0435\u0433\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f</legend>  \n          ROI \u0434\u043b\u044f \u0430\u0432\u0442\u043e\u0441\u0435\u0433\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438:<p> \n          \u041f\u043e\u0437\u0438\u0446\u0438\u044f (x,y,z):<br>\n          <input type="number" value="0" min="0" id="roi_min_x" style="width: 6em;"/>       \n          <input type="number" value="0" min="0" id="roi_min_y" style="width: 6em;"/>       \n          <input type="number" value="0" min="0" id="roi_min_z" style="width: 6em;"/>       \n          \u0420\u0430\u0437\u043c\u0435\u0440 (x,y,z):<br>\n          <input type="number" value="1" min="1" id="roi_size_x" style="width: 6em;"/>       \n          <input type="number" value="1" min="1" id="roi_size_y" style="width: 6em;"/>       \n          <input type="number" value="1" min="1" id="roi_size_z" style="width: 6em;"/>  \n          <p>    \n          <button id="reset_roi">\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c ROI</button> \n          <button id="initialize_ffr">Initialize FFR processing</button>\n        </fieldset>\n\n      </div>';function nm(a,b){this.h=a instanceof H?a:new H(a,b)}C(nm,Kh);nm.prototype.f=function(a,b,c,d){var e=vd(a);var f=e.body;e=e.documentElement;e=new H(f.scrollLeft||e.scrollLeft,f.scrollTop||e.scrollTop);f=this.h.x+e.x;e=this.h.y+e.y;var h=Hh(a);f-=h.x;e-=h.y;Jh(new H(f,e),a,b,c,null,null,d)};function om(a,b){nm.call(this,a,b)}C(om,nm);om.prototype.i=0;om.prototype.A=function(a){this.i=a};om.prototype.f=function(a,b,c,d){var e=pf(a);e=sf(e);var f=Dd(td(a).f);f=new H(this.h.x+f.scrollLeft,this.h.y+f.scrollTop);var h=b,k=Jh(f,a,h,c,e,10,d);if(0!=(k&496)){if(k&16||k&32)h^=4;if(k&64||k&128)h^=1;k=Jh(f,a,h,c,e,10,d);0!=(k&496)&&Jh(f,a,b,c,e,this.i,d)}};function pm(a,b){th.call(this,a,b);this.Cc=!0;dh(this,!0);this.K(!1,!0);this.h=new yi}C(pm,th);g=pm.prototype;g.Mg=0;g.xa=function(a){pm.m.xa.call(this,a);if(a=a.getAttribute("for")||a.htmlFor){a=this.f.j(a);if(a){var b=Wa(a);b=Ci(this.h.h,b)}else b=!1;b||(a?(b={w:a,Of:1,Rg:void 0,jf:"mousedown",Pg:void 0},this.h.set(Wa(a),b)):b=null,this.N&&this.af(b),a=bb(this.bh,a),this.j()&&Q(this).listen(this.j(),"keydown",a))}};
g.I=function(){pm.m.I.call(this);this.h.forEach(this.af,this);var a=Q(this);a.listen(this,"action",this.Xg);a.listen(this.f.f,"mousedown",this.$g,!0)};g.bh=function(a,b){if(27==b.keyCode)a.focus();else if(a=T(this,this.oa)){a=a.j();var c=new te(b.f,a);c.target=a;if(32==b.keyCode||13==b.keyCode)ye(a)?Ve(a,"keydown",!1,c):Re(a,"keydown",!1,c);32==b.keyCode&&qm(this)}};g.af=function(a){Q(this).listen(a.w,a.jf,this.eh);"contextmenu"!=a.jf&&Q(this).listen(a.w,"keydown",this.fh)};
function rm(a,b,c,d){var e=a.$;a.$||cb();a.dispatchEvent("beforeshow")&&(c="undefined"!=typeof c?c:8,e||(a.j().style.visibility="hidden"),N(a.j(),!0),b.f(a.j(),c,d),e||(a.j().style.visibility="visible"),a.ib(-1),a.K(!0))}function qm(a){a.$&&(a.K(!1),a.$||(a.Mg=cb()))}g.Xg=function(){qm(this)};g.eh=function(a){sm(this,a)};g.fh=function(a){32!=a.keyCode&&13!=a.keyCode&&40!=a.keyCode||sm(this,a);40==a.keyCode&&$g(this)};
function sm(a,b){for(var c=zi(a.h),d=0;d<c.length;d++){var e=a.h.get(c[d]);if(e.w==b.currentTarget){c=Ka(e.Of)?new Mh(e.w,e.Of,!0):new om(b.clientX,b.clientY);c.A&&c.A(5);rm(a,c,e.Rg,e.Pg);b.preventDefault();b.stopPropagation();break}}}g.$g=function(a){this.$&&!this.ob(a.target)&&qm(this)};g.vd=function(a){pm.m.vd.call(this,a);qm(this)};g.G=function(){pm.m.G.call(this);this.h&&(this.h.clear(),delete this.h)};function tm(){Vg.call(this);this.fe=R(this,"d12s")}ka(tm,Vg);tm.prototype.S=function(){Vg.prototype.S.call(this);this.j().innerHTML='<div style="height:100%; background:#ddd; display:flex; flex-direction:column; justify-content:space-between;">\n      <select style="width:100%; margin:5px 0px 5px 0px;"><option>Edit</option><option>Change label</option></select>\n      <select id="'+this.fe+'" size="8"></select>      \n      <button style="width:100%">\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043e\u0441\u0443\u0434</button>\n </div>'};
tm.prototype.I=function(){var a=this;Vg.prototype.I.call(this);var b=dg(this,"d12s");b.addEventListener("change",function(b){a.dispatchEvent({type:X.Z.Ha.Aa.dd,value:b.target.value})});b.oncontextmenu=function(b){if(b.target.value){b.preventDefault();var c=new pm;c.dc=b.target.value;uh(c,new U(b.target.value));uh(c,new sh);uh(c,new U("\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043e\u0441\u0443\u0434"));uh(c,new U("\u0412\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u0430\u044f \u044d\u043d\u0434\u043e\u0441\u043a\u043e\u043f\u0438\u044f"));
uh(c,new U("\u041c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0430 \u0441\u0442\u0435\u043d\u043e\u0437\u0430"));c.render(document.body);rm(c,new om(b.clientX,b.clientY),1);c.K(!0);M(c,"action",function(b){var c=b.target.Mb();b=b.currentTarget.dc;c="\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043e\u0441\u0443\u0434"===c?X.Z.Ha.Aa.cd:"\u0412\u0438\u0440\u0442\u0443\u0430\u043b\u044c\u043d\u0430\u044f \u044d\u043d\u0434\u043e\u0441\u043a\u043e\u043f\u0438\u044f"===c?X.Z.Ha.Aa.fd:"\u041c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0430 \u0441\u0442\u0435\u043d\u043e\u0437\u0430"===
c?X.Z.Ha.Aa.ad:"unknown";if(c!=X.Z.Ha.Aa.cd&&(c==X.Z.Ha.Aa.fd||c==X.Z.Ha.Aa.ad)){var d=um(a,b);d&&(d.selected=!0)}a.dispatchEvent({type:c,value:b})})}}};function um(a,b){a=dg(a,"d12s").childNodes;for(var c=0;c<a.length;c++)if("OPTION"==a[c].tagName&&a[c].label==b)return a[c];return null}tm.prototype.add=function(a){for(var b=dg(this,"d12s"),c=0;c<a.length;c++){var d=document.createElement("OPTION");d.label=a[c];d.value=a[c];b.appendChild(d)}};
tm.prototype.clear=function(){for(var a=dg(this,"d12s");0<a.childNodes.length;)a.removeChild(a.childNodes[0])};X.Z.Aa=tm;X.Z.Ha.Aa={dd:"select",cd:"remove",ad:"markstenosis",fd:"virtualendoscopy"};function ek(a){P.call(this);this.h=null;this.i=a}ka(ek,P);ek.prototype.S=function(){P.prototype.S.call(this);this.j().style.height="100%";this.h=new yj(new P,new X.Z.Uf(this.i),"vertical");this.da(this.h,!0);var a=new Lj(T(this.h,0).j(),["\u0412\u0438\u0437\u0443\u0430\u043b\u0438\u0437\u0430\u0446\u0438\u044f","\u0410\u043d\u0430\u043b\u0438\u0437"]);Mj(a,0,vm);Pj(a,0)};
ek.prototype.I=function(){P.prototype.I.call(this);this.h.j().style.height="100%";uj(this.h,240);new el(document.getElementById("s12"));new el(document.getElementById("s13"));new el(document.getElementById("s14"));new el(document.getElementById("s15"))};ek.prototype.K=function(a){this.j().style.display=a?"block":"none"};ek.prototype.resize=function(){uj(this.h)};X.Z.Qh=ek;var vm='<div id="div_vis_grid">\n    <div class="grid_row">\n      <div style="color:white">\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0439:</div>\n      <div style="display:flex; justify-content:space-between;">\n        <select id="sel1"">\n          <option>Realistic</option>\n          <option>Cardio</option>\n        </select>\n        <button>\u0420\u0435\u0434.</button>\n      </div>\n    </div>\n\n    <div class="grid_row">\n      <div style="color:white;">\u041e\u0441\u0432\u0435\u0449\u0435\u043d\u0438\u0435:</div>\n      <div style="display:flex;"><input type="checkbox" name="b"><div id="s12" style="flex-grow:2;"></div></div>    \n    </div>\n\n    <div class="grid_row">\n      <div style="color:white;">\u0423\u0440\u043e\u0432\u0435\u043d\u044c:</div>\n      <div id="s13"></div>\n    </div>\n\n    <div class="grid_row">\n      <div style="color:white;">\u041f\u043e\u0440\u043e\u0433:</div>\n      <div id="s14"></div>\n    </div>\n\n    <div class="grid_row">\n      <div style="color:white;">\u041f\u0440\u043e\u0437\u0440\u0430\u0447\u043d\u043e\u0441\u0442\u044c:</div>\n      <div id="s15"></div>\n    </div>\n\n    <div class="grid_row">\n      <div style="color:white;">X \u0433\u0440\u0430\u043d\u0438\u0446\u044b:</div>\n      <input type="text" name="a">     \n    </div>\n    <div class="grid_row">  \n      <div style="color:white;">Y \u0433\u0440\u0430\u043d\u0438\u0446\u044b:</div>\n      <input type="text" name="b">\n    </div>\n    <div class="grid_row">  \n      <div style="color:white;">Z \u0433\u0440\u0430\u043d\u0438\u0446\u044b:</div>\n      <input type="text" name="b">\n    </div>\n    <div class="grid_row">  \n      <div style="color:white;">\u0422\u0438\u043f \u0432\u044b\u0440\u0435\u0437\u0430:</div>\n      <select id="sel2">\n        <option>\u0411\u0435\u0437 \u0432\u044b\u0440\u0435\u0437\u0430</option>\n        <option>\u0423\u0433\u043b\u043e\u043c</option>\n        <option>\u041f\u0435\u0440\u0435\u0434\u043d\u0435\u0439 \u043f\u043b\u043e\u0441\u043a\u043e\u0442\u044c\u044e</option>\n      </select>\n    </div>';function hk(a,b){P.call(this);this.v=b;this.v.la={ba:{cube:b.Zd[0],X:null,color:16253184},ca:{cube:b.Zd[1],X:null,color:13798924}};console.log("\u0440\u0430\u0441\u043f\u0435\u0447\u0430\u0442\u043a\u0430 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0438 \u0430\u043e\u0440\u0442\u044b \u0438 \u0441\u043e\u0441\u0443\u0434\u043e\u0432-2");uk(this.v.Dc,!0);uk(this.v.la.ba.cube,!0);uk(this.v.la.ca.cube,!0);var c=this.v.Dc.H.s;b=new THREE.Box3(new THREE.Vector3(c[0],c[2],c[4]),new THREE.Vector3(c[1],
c[3],c[5]));c=this.v.la.ba.cube.H.s;var d=new THREE.Box3(new THREE.Vector3(c[0],c[2],c[4]),new THREE.Vector3(c[1],c[3],c[5]));c=this.v.la.ca.cube.H.s;c=new THREE.Box3(new THREE.Vector3(c[0],c[2],c[4]),new THREE.Vector3(c[1],c[3],c[5]));b=b.clone().union(d).union(c);console.log("\u043e\u0431\u0449\u0438\u0439 (\u0430\u043e\u0440\u0442\u0430+\u0441\u043e\u0441\u0443\u0434\u044b) ROI",b);console.log("minROI=["+b.min.x+"x"+b.max.x+","+b.min.y+"x"+b.max.y+","+b.min.z+"x"+b.max.z+"]");this.v.va=[];this.jc=
0;this.u=null;this.Xf=a;this.L=this.Y=this.V=this.D=this.O=this.fa=null;this.l=-1;this.h=null;this.i={Te:"0",ae:"c",$d:"e",de:"f",ce:"j",Yf:"1",Xe:"2",We:"3",ed:"4",Ze:"8",Ye:"9"};this.yb=void 0;this.B=this.Ya=null}ka(hk,P);hk.prototype.resize=function(){var a=this.L;a.F.aspect=a.domElement.clientWidth/a.domElement.clientHeight;a.F.updateProjectionMatrix();a.ja.setSize(a.domElement.clientWidth,a.domElement.clientHeight)};
hk.prototype.S=function(){P.prototype.S.call(this);this.j().style.height="100%";this.fa=new yj(new P,new P,"vertical");this.da(this.fa,!0);uj(this.fa,440);this.O=new Lj(T(this.fa,0).j(),["\u041c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0430 \u0441\u0442\u0435\u043d\u043e\u0437\u0430","\u0412\u0438\u0440\u0442. \u044d\u043d\u0434\u043e\u0441\u043a\u043e\u043f\u0438\u044f"]);var a='<div  class="content">\n            \u0421\u043e\u0441\u0443\u0434: <b><span id="'+R(this,this.i.Xe)+'"></span></b>\n            <div style="display:flex;">\n                \u0412\u0438\u0434\u0438\u043c\u043e\u0441\u0442\u044c \u0430\u043e\u0440\u0442\u044b <input type="checkbox" id="'+
R(this,this.i.ce)+'" checked>\n            </div>\n            <div style="display:flex; width:100%;">\n                \u041f\u0440\u043e\u0437\u0440\u0430\u0447\u043d\u043e\u0441\u0442\u044c:\n                <span title="\u043b\u0435\u0432\u044b\u0439 \u043c\u0430\u0440\u043a\u0435\u0440 \u0432\u043b\u0435\u0432\u043e">\u25c0</span> \n                <div id="'+R(this,this.i.Te)+'" style="min-width:20px; height: 20px; width:100%; flex-grow:2;"></div>\n                <span title="\u043f\u0440\u0430\u0432\u044b\u0439 \u043c\u0430\u0440\u043a\u0435\u0440 \u0432\u043f\u0440\u0430\u0432\u043e">\u25b6</span>\n            </div>\n            <p>\n            <p>\n            <fieldset>\n                <legend>\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u043f\u0430\u0446\u0438\u0435\u043d\u0442\u0435</legend>\n                <div id="'+
R(this,this.i.Yf)+'"></div>\n                 <div style="display: grid; grid-template-columns: 3fr 4fr">\n                    <div>Psys (mmHg)</div> <div><input id="Psys" type="number" value="120" style="width: 5em;"/></div>\n                 </div>\n                 <div style="display: grid; grid-template-columns: 3fr 4fr">\n                    <div>Pdia (mmHG)</div> <div><input id="Pdia" type="number" value="80" style="width: 5em;"/></div>\n                 </div>\n                 <div style="display: grid; grid-template-columns: 3fr 4fr">\n                    <div>SV (ml)</div> <div><input id="SV" type="number" value="60" style="width: 5em;"/></div>\n                 </div>\n                 <div style="display: grid; grid-template-columns: 3fr 4fr">\n                    <div>HR (bpm)</div> <div><input id="HR" type="number" value="60" style="width: 5em;"/></div>\n                 </div>\n            </fieldset>\n            <p>\n            <fieldset id="'+
R(this,this.i.ed)+'">\n                <legend>\u0421\u043f\u0438\u0441\u043e\u043a \u0441\u0442\u0435\u043d\u043e\u0437\u043e\u0432</legend>\n            </fieldset>\n            <p>\n            <button id="'+R(this,this.i.de)+'" disabled>Start Calculation</button>\n            <button id="'+R(this,this.i.$d)+'">Capture stenosis</button> \n            <button id="'+R(this,this.i.ae)+'" disabled>Clear list</button>\n            <div id="'+R(this,this.i.We)+'"></div>\n            <hr/>\n        </div>',
b='<div id="div_vis_grid">\n            <div class="grid_row">\n              <div style="color:white">\u0421\u0433\u043b\u0430\u0436\u0438\u0432\u0430\u043d\u0438\u0435:</div>\n              <div style="display:flex; justify-content:space-between;">\n                <button id="'+R(this,this.i.Ye)+'">\u0421\u0433\u043b\u0430\u0434\u0438\u0442\u044c +1</button>\n              </div>\n            </div>\n\n            <div class="grid_row">\n              <div style="color:white;">\u041e\u0441\u0432\u0435\u0449\u0435\u043d\u0438\u0435:</div>\n              <div style="display:flex;"><input type="checkbox" name="b"><div id="s12" style="flex-grow:2;"></div></div>    \n            </div>\n\n            <div class="grid_row">\n              <div style="color:white;">\u041f\u043e\u0437\u0438\u0446\u0438\u044f \u043a\u0430\u043c\u0435\u0440\u044b:</div>\n              <div id="'+
R(this,this.i.Ze)+'"></div>\n            </div>\n\n            <div class="grid_row">\n              <div style="color:white;">\u041f\u043e\u0440\u043e\u0433:</div>\n              <div id="s14"></div>\n            </div>\n\n            <div class="grid_row">\n              <div style="color:white;">\u041f\u0440\u043e\u0437\u0440\u0430\u0447\u043d\u043e\u0441\u0442\u044c:</div>\n              <div id="s15"></div>\n            </div>\n\n            <div class="grid_row">\n              <div style="color:white;">X \u0433\u0440\u0430\u043d\u0438\u0446\u044b:</div>\n              <input type="text" name="a">     \n            </div>\n            <div class="grid_row">  \n              <div style="color:white;">Y \u0433\u0440\u0430\u043d\u0438\u0446\u044b:</div>\n              <input type="text" name="b">\n            </div>\n            <div class="grid_row">  \n              <div style="color:white;">Z \u0433\u0440\u0430\u043d\u0438\u0446\u044b:</div>\n              <input type="text" name="b">\n            </div>\n            <div class="grid_row">  \n              <div style="color:white;">\u0422\u0438\u043f \u0432\u044b\u0440\u0435\u0437\u0430:</div>\n              <select id="sel2">\n                <option>\u0411\u0435\u0437 \u0432\u044b\u0440\u0435\u0437\u0430</option>\n                <option>\u0423\u0433\u043b\u043e\u043c</option>\n                <option>\u041f\u0435\u0440\u0435\u0434\u043d\u0435\u0439 \u043f\u043b\u043e\u0441\u043a\u043e\u0442\u044c\u044e</option>\n              </select>\n            </div>';
Mj(this.O,0,a);Mj(this.O,1,b);Pj(this.O,0);T(this.O.f,1).K(!1);this.V=new dl};
hk.prototype.I=function(){function a(){}var b=this;console.log("MarkStenosisComponent::enterDocument()");P.prototype.I.call(this);this.D=new X.Z.Aa;T(this.fa,1).da(this.D,!0);M(this.D,[X.Z.Ha.Aa.dd,X.Z.Ha.Aa.cd,X.Z.Ha.Aa.ad,X.Z.Ha.Aa.fd],function(a){var c=a.value;switch(a.type){case X.Z.Ha.Aa.dd:wm(b,c);break;case X.Z.Ha.Aa.cd:xm(b,c);break;case X.Z.Ha.Aa.ad:ym(b,c);break;case X.Z.Ha.Aa.fd:zm(b,c)}});this.V.S();this.V.render(dg(this,this.i.Te));this.V.j().style.height="20px";this.V.addEventListener("change",
function(){var a=b.V.getValue();a=parseInt(a)/100;b.v.la.ba.X.material.opacity=a;b.v.la.ca.X.material.opacity=a});var c=ib();M(this.V,c,a);M(this,c,a);for(var d in this.i)c=this.i[d].charAt(0),"a"<=c&&"z">=c&&dg(this,this.i[d]).addEventListener("click",function(a){return Am(b,a)});this.Ya=new el(dg(this,this.i.Ze));this.start(this.v);d=Bm(this);ym(this,this.v.P[d].name);Cm(this);Dm(this)};
function wm(a,b){return a.v.P.find(function(c,d){return c.name==b?(-1!=a.l&&(a.v.P[a.l].nd.visible=!1),a.l=d,a.v.P[a.l].nd.visible=!0,a.u&&Em(a.u,a.l),!0):!1})?a.l:-1}
function xm(a,b){var c,d,e,f,h,k,l;Ea(function(m){if(1==m.f)return c=a.v.P.findIndex(function(a){return a.name==b}),console.assert(-1!=c,"MarkStenosisComponent::_removeVessel: \u0441\u043e\u0441\u0443\u0434 "+b+" \u043d\u0430\u0439\u0434\u0435\u043d"),-1==c?(m.f=0,m=void 0):m=z(m,vl(X.aa.ma,"DeleteVessel "+c),3),m;d=m.h;console.assert("ok"==d,"FFR_DeleteVessel returned "+d);e=a.v.P[c];if(e.Wa&&0<e.Wa.length&&(f=confirm("\u0412\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043e\u0441\u0443\u0434 \u0441\u043e \u0441\u0442\u0435\u043d\u043e\u0437\u043e\u043c?"),
0==f))return m.return();h=e.Vb==a.v.la.ba?"Left vessel:":"Right vessel:";k=parseInt(e.name.slice(h.length+1));for(l=c+1;l<a.v.P.length&&a.v.P[l].Vb==e.Vb;l++)a.v.P[l].name=h+" "+k++;a.L.J.remove(e.nd);a.v.P.splice(c,1);a.D.clear();a.D.add(a.v.P.map(function(a){return a.name}));a.l=-1;m.f=0})}function Bm(a){var b=-1;a.v.P.forEach(function(a,d){0<a.ga.length&&(b=d)});return b}
function ym(a,b){if(-1==wm(a,b))console.log("cannot find "+b);else{var c=um(a.D,b);c&&(c.selected=!0);dg(a,a.i.Xe).innerHTML=b}}
function Fm(a,b){var c=b.target.nextSibling.nextSibling;if(!a.B){a.B=J("div",{style:"position: absolute; border:1px solid black; padding:5px; background-color:lightyellow;"});document.body.appendChild(a.B);var d=gd();Cf(d)}if("number"==c.type){d=a.v.va.find(function(a){return a.Hf==c.id});var e=d.id,f=d.ka.name,h=d.eb.range[0],k=d.eb.range[1],l=d.ka.profile[h];l=(Math.PI*l*l).toFixed(2);var m=d.ka.profile[k];m=(Math.PI*m*m).toFixed(2);var p=Gm(d.ka.ga,d.eb.range[0]),r=Gm(d.ka.ga,d.eb.range[1]+1);
p=p.distanceTo(r).toFixed(2);e="\u0441\u0442\u0435\u043d\u043e\u0437#"+e+': "'+f+'"['+h+","+k+"]"+("<br>S<sub>front</sub>="+l+" mm<sup>2</sup>")+("S<sub>rear</sub>="+m+" mm<sup>2</sup>");e+="<br>\u0414\u043b\u0438\u043d\u0430 "+p+" mm";-1==d.mb&&(e+="<br><b>\u043d\u0435 \u0430\u043a\u0442\u0438\u0432\u0435\u043d</b> (%% \u0441\u0442\u0435\u043d\u043e\u0437\u0430 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d)");a.B.innerHTML=e;a.B.style.left=15+b.clientX+"px";a.B.style.top=-35+b.clientY+"px"}d3.select(a.B).classed("hidden",
!1)}
function Am(a,b){var c=b.target.id.substring(Xf(a).length+1);switch(c){case a.i.$d:Hm(a);break;case a.i.de:console.log("Button Start Calculation pressed",a.v.va);Im(a);break;case a.i.ae:Jm(a);break;case a.i.ce:c=document.getElementById(R(a,a.i.ce));a.bd.visible=c.checked;console.log("camera position",a.L.F.position);break;default:for(var d=!1,e=w(a.v.va),f=e.next();!f.done;f=e.next())if(f=f.value,f.Hf==b.target.id){f.mb=document.getElementById(b.target.id).value;d=!0;break}else if(f.gf==b.target.id){Km(a,f);
b=a.v.P[a.l];a.u&&Lm(a.u,b);d=!0;break}d||console.log("unknown fragment ID "+c)}Cm(a)}
function Hm(a){var b=a.v.P[a.l],c=b.Wa.find(function(a){return null==a.ea});if(c){var d=["red","brown","orange"];d=d[a.jc%d.length];var e=a.v.va.length+1,f=a.jc++,h=R(a,"in")+"."+f;f=R(a,"bd")+"."+f;var k=dg(a,a.i.ed),l=J("div",{style:"width:10px; height:10px; background-color:"+d+"; margin-right:5px","class":"goog-inline-block"}),m=J("div",{});m.innerHTML="\u0421\u0442\u0435\u043d\u043e\u0437#"+e+' \n        <input id="'+h+'" type="number" value="-1" style="width: 3em;"/>%'+('<button id="'+f+'" style=" margin-left:10px">delete</button>');
m.insertBefore(l,m.firstChild);k.appendChild(m);l.addEventListener("mouseover",function(b){return Fm(a,b)});l.addEventListener("mouseout",function(){a.B&&d3.select(a.B).classed("hidden",!0)});c.ea={id:e,ka:b,eb:c,Hf:h,mb:-1,color:d,gf:f};a.v.va.push(c.ea);document.getElementById(h).addEventListener("change",function(b){return Am(a,b)});document.getElementById(f).addEventListener("click",function(b){return Am(a,b)});a.u&&Lm(a.u,b);Mm(c.X,c.ea.color)}}
function Km(a,b){var c=document.getElementById(b.gf).parentNode;dg(a,a.i.ed).removeChild(c);a.L.J.remove(b.eb.X);c=b.ka.Wa.indexOf(b.eb);-1!=c&&b.ka.Wa.splice(c,1);b=a.v.va.indexOf(b);-1!=b&&a.v.va.splice(b,1)}
function Jm(a){a.v.va.forEach(function(b){return Km(a,b)});var b=dg(a,a.i.ed),c=[];b.childNodes.forEach(function(a){a instanceof HTMLDivElement&&c.push(a)});c.forEach(function(a){return b.removeChild(a)});console.assert(0==c.length,"STENOSISLIST must be empty");console.assert(0==a.v.va.length,"\u0441\u043f\u0438\u0441\u043e\u043a \u0441\u0442\u0435\u043d\u043e\u0437\u043e\u0432 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c");a.v.va=[];var d=a.v.P.every(function(a){return a.Wa.every(function(a){return null==
a.ea})});console.assert(d,"\u0432 \u0441\u043e\u0441\u0443\u0434\u0430\u0445 \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c tubes, \u043f\u043e\u043c\u0435\u0447\u0435\u043d\u043d\u044b\u0445 \u043a\u0430\u043a \u0441\u0442\u0435\u043d\u043e\u0437 ");d=a.v.P[a.l];a.u&&Lm(a.u,d)}
function Cm(a){var b=document.getElementById(R(a,a.i.de)),c=document.getElementById(R(a,a.i.ae)),d=document.getElementById(R(a,a.i.$d)),e=!0;a.v.va.forEach(function(a){return e&=0<=a.mb});var f=a.v.P[a.l];f=f.Wa&&f.Wa.find(function(a){return null==a.ea});b.disabled=0==a.v.va.length||!e;c.disabled=0==a.v.va.length;d.disabled=!f}
function Nm(a,b){var c=new THREE.Color(b.color),d=255*c.r,e=255*c.g;c=255*c.b;for(var f=b.cube.geometry(),h=f.getAttribute("position").count,k=new Uint8Array(3*h),l=0;l<h;l++)k[3*l]=d,k[3*l+1]=e,k[3*l+2]=c;f.addAttribute("color",new THREE.BufferAttribute(k,3,!0));b.X=new THREE.Mesh(f,new THREE.MeshLambertMaterial({side:THREE.DoubleSide,transparent:!0,opacity:.2,vertexColors:THREE.VertexColors}));b.X.applyMatrix(a.Y.ijk2LPS)}
hk.prototype.start=function(a){this.Y=a.stack;var b=a.P;Pj(this.O,0);var c=this.Y.ijk2LPS;this.bd=a=new THREE.Mesh(a.Dc.geometry(),new THREE.MeshLambertMaterial({color:64250,side:THREE.DoubleSide}));a.applyMatrix(c);Nm(this,this.v.la.ba);Nm(this,this.v.la.ca);a=this.v.la.ba.X.geometry.boundingBox.clone().applyMatrix4(c);c=this.v.la.ca.X.geometry.boundingBox.clone().applyMatrix4(c);a.clone().intersect(c);for(var d=0;d<this.v.P.length;d++){var e=this.v.P[d].name,f=this.v.P[d].ga,h=f.length/3-1;h=new THREE.Vector3(f[3*
h],f[3*h+1],f[3*h+2]);f=a.containsPoint(h);h=c.containsPoint(h);f==h?(f=e.includes("Left vessel:"),console.warn(e+" classified by name as ",f?"LCA":"RCA")):e.includes("Left vessel:")&&f||e.includes("Right vessel:")&&h||console.warn(e+" was classified by geometry as ",f?"LCA":"RCA");this.v.P[d].Vb=f?this.v.la.ba:this.v.la.ca}a=fb("r0").parentNode;Z.isEnabled(a)?(Z.Vc(a),this.L=Z.Eb(a,!0)):(fb("r0").style.display="none",fb("r1").style.display="none",fb("r2").style.display="none",fb("r3").style.display=
"none",this.L=Z.enable(a),Z.Id(a));this.L.J.add(this.bd);this.L.J.add(this.v.la.ba.X);this.L.J.add(this.v.la.ca.X);a=this.Y.worldCenter();this.L.F.lookAt(a.x,a.y,a.z);this.L.F.zoom=5;this.L.F.updateProjectionMatrix();this.L.controls.target.set(a.x,a.y,a.z);a=[];for(c=0;c<b.length;c++){d=b[c].name;d.endsWith("\n")&&(d=d.slice(0,-1),b[c].name=d);a.push(b[c].name);d=new THREE.BufferGeometry;e=b[c].ga;f=new Float32Array(e.length);for(h=0;h<e.length;h++)f[h]=e[h];b[c].ga=f;d.addAttribute("position",new THREE.BufferAttribute(f,
3));d=new THREE.Line(d,new THREE.LineBasicMaterial({color:16777215}));d.visible=!1;b[c].nd=d;this.L.J.add(b[c].nd)}this.D.add(a)};
function Dm(a){function b(){requestAnimationFrame(b);h.update();c.Da.position.copy(e.position);k.clear();k.render(d,e);c.vb&&(k.autoClear=!1,k.render(c.vb,c.ld))}var c=a.L,d=c.J,e=c.F,f=a.Y,h=c.controls,k=c.ja;640==f._dimensionsIJK.z&&(console.log("\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043a\u0430\u043c\u0435\u0440\u044b \u0434\u043b\u044f \u0411\u0440\u0443\u0441\u043d\u0438\u0446\u0438\u043d\u0430"),e.position.x=339,
e.position.y=-636,e.position.z=785);var l=f.worldBoundingBox();f=new THREE.Vector3(l[1],l[3],l[5]);l=new THREE.Vector3(l[0],l[2],l[4]);var m=a.Y.worldCenter();c.Da.position.copy(f);c.Da.target.position.copy(m);d.add(c.Da.target);c.Da.target.updateMatrixWorld();f=new THREE.DirectionalLight(16777215,1);f.position.copy(l);f.target.position.copy(m);d.add(f.target);f.target.updateMatrixWorld();(new THREE.PointLight(16777215,10)).position.set(m.x,m.y,m.z);$k(a.V,40,20);dg(a,a.i.We);console.log("starting my render()");
b()}
function zm(a,b){function c(){requestAnimationFrame(c);d.h.controls.update();k.update();d.h.Da.position.copy(d.h.F.position);d.h.ja.render(d.h.J,d.h.F)}console.log("MarkStenosisComponent::_virtualEndoscopy("+b+")");var d=a;a.D.K(!1);b=a.Xf;b.width+=0;a.fa.setSize(b,.4*b.height);b=T(a.fa,1).Ia();b.style.height="100%";b.style.overflow="hidden";T(a.O.f,1).K(!0);Pj(a.O,1);cl(a.Ya.f,50);var e=a.L.J;a.h=Z.enable(b);Z.Id(b);a.h.controls=new Sl(a.h.F,a.h.domElement,a.v.P[a.l].ga);var f=a.v.la.ca.X.clone(),h=
0;a.h.J.add(f);var k=new THREE.CameraHelper(a.h.F);e.add(k);e.add(new THREE.AxisHelper(100));a.h.Da=new THREE.SpotLight(16777215,1);a.h.Da.position.copy(a.h.F.position);a.h.J.add(a.h.Da);a.h.Da.target.position.copy(a.h.controls.point(a.h.controls.tb+2));a.h.J.add(a.h.Da.target);console.log("near/far",a.h.F.mi,a.h.F.li);var l=a.h.controls.tb+2;a.h.domElement.addEventListener("click",function(){var b=a.h.controls.point(l++);a.h.Da.position.copy(b);console.log("pTarg",b)});a.Ya.f.addEventListener("change",
function(){var b=a.Ya.getValue(),c=a.h.controls;0>b&&(b=0);100<b&&(b=100);c.tb=Math.floor(c.Tc*b/100)-1;c.next()});dg(a,a.i.Ye).addEventListener("click",function(){h++;console.log("clicked button SMOOTH (factor will be "+h+")");console.log("myv1Mesh",f);var b=a.v.la.ca.X;var c=new Ul(h);var d=b.geometry;d=d.isBufferGeometry?(new THREE.Geometry).fromBufferGeometry(d):d.clone();d.mergeVertices();for(var e=c.h;0<e--;)c.f(d);d.computeFaceNormals();d.computeVertexNormals();c=d;b=b.material.clone();b=new THREE.Mesh(c,
b);b.applyMatrix(a.Y.ijk2LPS);a.h.J.remove(f);a.h.J.add(b);f=b;console.log("\u0411\u044b\u043b\u043e 0/0 \u0433\u0440\u0430\u043d\u0435\u0439/\u0432\u0435\u0440\u0448\u0438\u043d \u0421\u0442\u0430\u043b\u043e "+b.geometry.faces.length+"/"+b.geometry.vertices.length)});c()}
function Im(a){var b,c,d,e,f,h,k,l,m,p,r,q,t,n,B,v,F;Ea(function(x){if(1==x.f){if(!a.v.va.length)return x.return();b=[];c=w(a.v.va);for(d=c.next();!d.done;d=c.next())e=d.value,f=Gm(e.ka.ga,e.eb.range[0]),h=Gm(e.ka.ga,e.eb.range[1]),b.push({Wb:f,fc:h,mb:e.mb}),console.log("\u0434\u0435\u043b\u0430\u044e \u043d\u0435\u0432\u0438\u0434\u0438\u043c\u044b\u043c \u043c\u0435\u0448 \u0432 \u0434\u0438\u0430\u043f\u0430\u0437\u043e\u043d\u0435 ["+e.eb.range[0]+", "+e.eb.range[1]+"]"),e.eb.X.visible=!1;k=
performance.now();console.log("prepareStenosisResult() \u0441\u043f\u0438\u0441\u043e\u043a \u0441\u0442\u0435\u043d\u043e\u0437\u043e\u0432",b);l=document.getElementById("Psys").value;m=document.getElementById("Pdia").value;p=document.getElementById("SV").value;r=document.getElementById("HR").value;console.log("\u0427\u0421\u0421",[l,m,p,r]);return z(x,hm(X.aa.ma,b,[l,m,p,r],function(a){ql(X.aa.Bc,a)}),2)}q=x.h;t=(performance.now()-k)/1E3;n=Math.floor(t/60);B=Math.floor(t%60);v=""+n+" \u043c\u0438\u043d "+
B+" \u0441\u0435\u043a";"string"===typeof q?(a.yb=void 0,F="\u0440\u0430\u0441\u0447\u0435\u0442 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u043b\u0441\u044f \u0430\u0432\u0430\u0440\u0438\u0439\u043d\u043e:   "+q):(a.yb=q,F="FFR value "+a.yb,F+="\n\u0412\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: "+v,alert(F),Om(new Pm(a.v,a.L)));x.f=0})}
la.Object.defineProperties(hk.prototype,{vc:{configurable:!0,enumerable:!0,set:function(a){this.u=a;-1!=this.l&&Em(this.u,this.l)}}});X.Z.Wh=hk;function dk(a){P.call(this);var b=this;this.D=a;this.i=this.h=this.u=this.l=this.B=null;setTimeout(function(){b.ma=new rk;b.ma.addEventListener("ready",function(){return Qm(b)});b.ma.addEventListener("close",function(){console.log("onDisonnect");wk(b.D,!1)})},3E3);this.handle=this.Ac=null;a={ya:null,zb:null,Za:[null,null,null,null]};this.U=[Object.assign({},a),Object.assign({},a),Object.assign({},a)]}ka(dk,P);
function Qm(a){var b;return Ea(function(c){if(1==c.f)return console.log("onConnect"),z(c,a.ma.version(),2);b=c.h;wk(a.D,!0,b);a.D.Tf=a.ma;c.f=0})}dk.prototype.S=function(){P.prototype.S.call(this);var a=this.j();jg(a,"visualizer");a.appendChild(this.h=J("div",{id:"r0","class":"renderer"}));a.appendChild(this.u=J("div",{id:"r1","class":"renderer"}));a.appendChild(this.l=J("div",{id:"r2","class":"renderer"}));a.appendChild(this.B=J("div",{id:"r3","class":"renderer"}))};
dk.prototype.I=function(){var a=this;P.prototype.I.call(this);this.h=Z.enable("r0");this.u=Z.enable("r1");this.l=Z.enable("r2");this.B=Z.enable("r3");this.u.Vd="coronal";this.l.Vd="sagittal";this.B.Vd="axial";Z.Id("r0");this.h.controls.rotateSpeed=.1;Z.Hd("r1");Z.Hd("r2");Z.Hd("r3");this.U[0].ya=this.u;this.U[1].ya=this.l;this.U[2].ya=this.B;for(var b=w(this.U),c=b.next();!c.done;c=b.next())c=c.value,c.ya.domElement.addEventListener("mousedown",function(b){b=Rm(a,b);b.dir&&(a.handle=b)}),c.ya.domElement.addEventListener("mouseup",
function(){a.handle&&(a.handle.U.ya.controls.enabled=!0,a.handle=null)}),c.ya.domElement.addEventListener("mousemove",function(b){if((b=Rm(a,b))&&b.U&&b.U.zb&&(b.U.zb.color=Sm(b)?16776960:65280,b.U.ya.domElement.style.cursor=b.cursor,b.Ua&&a.handle)){b.U.ya.controls.enabled=!1;var c=a.s;0>a.handle.dir.x?c.min.x=b.Ua.x:0<a.handle.dir.x&&(c.max.x=b.Ua.x);0>a.handle.dir.y?c.min.y=b.Ua.y:0<a.handle.dir.y&&(c.max.y=b.Ua.y);0>a.handle.dir.z?c.min.z=b.Ua.z:0<a.handle.dir.z&&(c.max.z=b.Ua.z);c.max.x<=c.min.x&&
(c.max.x=c.min.x+1);c.max.y<=c.min.y&&(c.max.y=c.min.y+1);c.max.z<=c.min.z&&(c.max.z=c.min.z+1);a.s=c}}),c.ya.controls.addEventListener("OnScroll",function(b){var c=b.target.domElement.id;if((c="r1"==c?a.U[0]:"r2"==c?a.U[1]:"r3"==c?a.U[2]:null)&&c.ya.za){var d=c.ya.za;0<b.delta?d.index<d.orientationMaxIndex-1&&(d.index+=1):0<d.index&&--d.index;c.zb.slice=d.slice}})};
function mk(a){var b=X.aa.nb;b.clear();b.i=a;a=a.stack[0];b.s=new THREE.Box3(new THREE.Vector3(0,0,0),a.dimensionsIJK.clone());b.dispatchEvent({type:"ROIChanged",value:b.s});for(var c=w(b.U),d=c.next();!d.done;d=c.next())d=d.value,eb(d.ya,a),d.zb=new Tm(b.s,d.ya.za.slice),d.ya.J.add(d.zb);b.l.F.invertColumns();b.h.J.add(b.u.J);b.h.J.add(b.l.J);b.h.J.add(b.B.J);a=a.worldCenter();b.h.F.lookAt(a.x,a.y,a.z);b.h.F.updateProjectionMatrix();b.h.controls.target.set(a.x,a.y,a.z);Z.render("r0");Z.render("r1");
Z.render("r2");Z.render("r3");b=w(b.U);for(d=b.next();!d.done;d=b.next())a=d.value,Um(a),console.assert(a.Za[0]&&a.Za[1],"WN not null")}dk.prototype.clear=function(){this.i&&(console.log("QuadView::clear()"),this.u.J.remove(this.u.za),this.l.J.remove(this.l.za),this.B.J.remove(this.B.za),Z.Vc("r0"),Z.Vc("r1"),Z.Vc("r2"),Z.Vc("r3"),this.i=null)};
dk.prototype.resize=function(){this.h.F.aspect=this.h.domElement.clientWidth/this.h.domElement.clientHeight;this.h.F.updateProjectionMatrix();this.h.ja.setSize(this.h.domElement.clientWidth,this.h.domElement.clientHeight);Vm(this,this.u);Vm(this,this.l);Vm(this,this.B)};
function Vm(a,b){b.F.canvas={width:b.domElement.clientWidth,height:b.domElement.clientHeight};0!=b.domElement.clientWidth&&a.i&&b.F.fitBox(2,1);b.ja.setSize(b.domElement.clientWidth,b.domElement.clientHeight);a.i&&(b.za.slice.canvasWidth=b.domElement.clientWidth,b.za.slice.canvasHeight=b.domElement.clientHeight)}function Wm(a,b){b=b.target.parentNode.id;return"r1"==b?a.U[0]:"r2"==b?a.U[1]:"r3"==b?a.U[2]:null}
function Xm(a,b,c){if(!c)return null;a=Wm(a,b);if(!a)return null;a=a.ya;var d=a.F,e=b.target.parentElement,f=new THREE.Raycaster,h=db(e);f.setFromCamera({x:(b.clientX-h.left)/e.clientWidth*2-1,y:2*-((b.clientY-h.top)/e.clientHeight)+1},d);b=f.intersectObjects(c,!0);return 0<b.length?AMI.UtilsCore.worldToData(a.za.stack.lps2IJK,b[0].point):null}
function Rm(a,b){var c={U:null,Ua:null,cursor:"default",dir:null};c.U=Wm(a,b);if(!c.U)return null;if(!a.i)return c;c.Ua=Xm(a,b,c.U.ya.J.children);if(c.Ua){a=Ym(a,c);b=a.map(function(a,b,c){return Math.max(a,c[(b+1)%4])});for(var d=0;4>d;d++)if(5>b[d])return c.dir=c.U.Za[d].clone().add(c.U.Za[(d+1)%4]),c.cursor=["nw-resize","sw-resize","se-resize","ne-resize"][d],c;for(b=0;4>b;b++)if(5>a[b]){c.dir=c.U.Za[b];c.cursor=["n-resize","w-resize","s-resize","e-resize"][b];break}}return c}
function Sm(a){return a.U&&a.U.zb&&a.Ua?(new THREE.Box3).setFromArray(a.U.zb._geometry.attributes.position.array).containsPoint(a.Ua):!1}
function Um(a){function b(a,b,d){a=(new THREE.Vector3).subVectors(a,b);1E-6>Math.abs(a.x)&&(a.x=0);1E-6>Math.abs(a.y)&&(a.y=0);1E-6>Math.abs(a.z)&&(a.z=0);0!=a.x&&(a.x=Math.sign(a.x),b=0==a.y&&0==a.z,console.assert(b,"\u043d\u0435 \u043e\u0440\u0442\u043e x"),b||console.log(c.id+"."+d+" ("+a.x+" "+a.y+" "+a.z+")"));0!=a.y&&(a.y=Math.sign(a.y),b=0==a.x&&0==a.z,console.assert(b,"\u043d\u0435 \u043e\u0440\u0442\u043e y"),b||console.log(c.id+"."+d+" ("+a.x+" "+a.y+" "+a.z+")"));0!=a.z&&(a.z=Math.sign(a.z),
b=0==a.x&&0==a.y,console.assert(b,"\u043d\u0435 \u043e\u0440\u0442\u043e z"),b||console.log(c.id+"."+d+" ("+a.x+" "+a.y+" "+a.z+")"));return a}var c=a.ya,d=c.J,e=c.F,f=new THREE.Raycaster;a.Za=[null,null,null,null];f.setFromCamera({x:0,y:0},e);var h=f.intersectObjects(d.children,!0),k=h[0].point.clone();f.setFromCamera({x:0,y:.5},e);h=f.intersectObjects(d.children,!0);0<h.length&&(a.Za[0]=b(h[0].point,k,"N"));f.setFromCamera({x:-.2,y:0},e);h=f.intersectObjects(d.children,!0);0<h.length&&(a.Za[1]=
b(h[0].point,k,"W"));a.Za[2]=a.Za[0].clone().negate();a.Za[3]=a.Za[1].clone().negate()}function Ym(a,b){function c(a,b){if(!Sm(a))return Infinity;b=a.U.Za[b];return b.x?Math.abs(a.Ua.x-(0>b.x?d.s.min.x:d.s.max.x)):b.y?Math.abs(a.Ua.y-(0>b.y?d.s.min.y:d.s.max.y)):b.z?Math.abs(a.Ua.z-(0>b.z?d.s.min.z:d.s.max.z)):Infinity}var d=a;return[c(b,0),c(b,1),c(b,2),c(b,3)]}
la.Object.defineProperties(dk.prototype,{s:{configurable:!0,enumerable:!0,get:function(){return this.Ac},set:function(a){if(this.i){a.min.clamp(new THREE.Vector3(0,0,0),this.i.stack[0].dimensionsIJK);a.max.clamp(new THREE.Vector3(0,0,0),this.i.stack[0].dimensionsIJK);this.Ac=a;a=w(this.U);for(var b=a.next();!b.done;b=a.next())b=b.value,b.zb&&(b.zb.s=this.s);this.dispatchEvent({type:"ROIChanged",value:this.s})}}}});
function Tm(a,b){var c=AMI.BorderHelper.call(this,{geometry:b.geometry,aabbSpace:"IJK",stack:b.stack})||this;c.$e=b;c.Ac=a;c.color=65280;c._material=new THREE.LineDashedMaterial({color:65280,dashSize:9,gapSize:5});c._update();return c}ka(Tm,AMI.BorderHelper);
Tm.prototype._update=function(){var a=this.$e,b=a.planePosition,c=a.planeDirection;a={halfDimensions:this.s.getSize(new THREE.Vector3).multiplyScalar(.5),center:this.s.getCenter(new THREE.Vector3),toAABB:new THREE.Matrix4};b={position:new THREE.Vector3(b.x,b.y,b.z),direction:new THREE.Vector3(c.x,c.y,c.z)};c=AMI.IntersectionsCore.aabbPlane(a,b);this.helpersSlice.geometry=0==c.length?[]:new AMI.SliceGeometry(a.halfDimensions,a.center,b.position,b.direction);AMI.BorderHelper.prototype._update.call(this);
0!=c.length&&this._mesh.computeLineDistances()};la.Object.defineProperties(Tm.prototype,{s:{configurable:!0,enumerable:!0,set:function(a){this.Ac=a;this._update()},get:function(){return this.Ac}},slice:{configurable:!0,enumerable:!0,set:function(a){this.$e=a;this._update()}}});function fk(){P.call(this);this.B=this.h=null;this.i=[];this.D=0;this.l=new Map;this.u=null}ka(fk,P);fk.prototype.S=function(){P.prototype.S.call(this);this.j().style.height="100%";this.h=new Lj(this.j(),[])};fk.prototype.I=function(){var a=this;P.prototype.I.call(this);Zm(this,"\u041d\u0435\u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f");Pj(this.h,0);Qj(this.h,function(b){return $m(a,b.target)})};
fk.prototype.K=function(a){this.j().style.display=a?"block":"none"};function an(a,b){console.log("removeSeriesListItem_("+b+")");var c=a.l.get(b).vh.Kf.j();c.removeChild(document.getElementById(b));a.l.delete(b);return c.children.length}
function $m(a,b){console.log("removeSeriesList_() \u0443\u0434\u0430\u043b\u044f\u0435\u043c \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u0443 \u0438 SplitPane");for(var c=gg(a.h.f,b),d=a.i[c].Kf.j();0<d.children.length;)an(a,d.children[0].id);a.i.splice(c,1);a.h.f.removeChild(b,!0)}
function kk(a,b){console.log("SeriesLists::seriesThinOut("+b+")");var c=new AMI.SeriesModel;for(d in a)c[d]=a[d];var d=a.stack[0];a=new AMI.StackModel;for(var e in d)a[e]=d[e];a.frame=d.frame.slice(0);d=a._numberOfFrames;if(d<=b)console.log("\u043f\u0440\u043e\u0440\u0435\u0436\u0438\u0432\u0430\u043d\u0438\u0435 \u043d\u0435 \u0442\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f");else{for(e=2;d/e>b;)e*=2;for(b=0;b<a.frame.length;b++)a.frame.splice(b+1,e-1)}a.prepare();c.numberOfFrames=a._numberOfFrames;
c.stack=[a];return c}
function lk(a,b){function c(a){a.preventDefault();var c=new pm;c.dc=b;uh(c,new U("\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0441\u0435\u0440\u0438\u044e"));var d=new Sh("\u041f\u0440\u043e\u0440\u0435\u0434\u0438\u0442\u044c \u0441\u0435\u0440\u0438\u044e");Yh(d,new U("\u0434\u043e 100 \u0441\u0440\u0435\u0437\u043e\u0432"));Yh(d,new U("\u0434\u043e 200 \u0441\u0440\u0435\u0437\u043e\u0432"));Yh(d,new U("\u0434\u043e 500 \u0441\u0440\u0435\u0437\u043e\u0432"));Yh(d,new U("\u0434\u043e 750 \u0441\u0440\u0435\u0437\u043e\u0432"));uh(c,
d);uh(c,new U("\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0441\u0435\u0440\u0438\u044e"));uh(c,new U("\u041e\u0431\u0440\u0435\u0437\u0430\u0442\u044c"));c.render(document.body);rm(c,new om(a.clientX,a.clientY),1);c.K(!0);M(c,"action",function(a){var b=k,c=a.currentTarget.dc,d=c.fe;a=a.target.Mb();a.startsWith("\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0441\u0435\u0440\u0438\u044e")?(ff(document.getElementById(d),"background","#726886"),b.u=d,mk(c)):a.startsWith("\u0417\u0430\u043a\u0440\u044b\u0442\u044c")?
(d==b.u&&X.aa.nb.clear(),0==an(b,d)&&$m(b,b.h.f.cb)):a.startsWith("\u0434\u043e ")?(c=kk(c,parseInt(a.split(" ")[1],10)),lk(b,c)):a.startsWith("\u041e\u0431\u0440\u0435\u0437\u0430\u0442\u044c")&&(console.log("\u041e\u0431\u0440\u0435\u0437\u0430\u0442\u044c"),c=Kl(c,[[164,475],[94,284],[191,300]]),lk(b,c))});return!1}var d=b.stack[0];console.log("addNewSeries stack ["+d.fi+","+d.di+","+d.ei+"]");var e=new Map;e.set("SN",b.rawHeader.string("x00200011"));e.set("PN",b.rawHeader.string("x00181030"));
e.set("image",jm(d));e.set("SD",b.seriesDescription);e.set("NF",b.numberOfFrames);e.set("modality",b.modality);e.set("patientName",b.patientName);e.set("patientSex",b.patientSex);e.set("patientBirthdate",b.patientBirthdate);e.set("studyDate",b.studyDate);d=Zm(a,b.patientName);Pj(a.h,d);d=a.i[d];var f=R(a.h.f,""+a.D++),h=bn(e,f);T(d,1).j().appendChild(h);T(d,0).j().innerHTML=cn(e);a.resize();var k=a;b.fe=f;a.l.set(f,{vh:d});h.oncontextmenu=function(a){c(a)}}
function Zm(a,b){for(var c=0;c<eg(a.h.f);c++)if(b==T(a.h.f,c).wa)return c;Oj(a.h,b,"\u041d\u0435\u0441\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f"!=b);b=eg(a.h.f)-1;c=a.h;var d=b<eg(c.f)&&0<=b?c.h[b]:null;var e=a.h.f.Ia();c=new yj;a.B=c;c.render(d);a.i.push(c);yf(e).height=150;a=T(c,0).j();d=T(c,1).j();ff(a,"border","0px solid red");ff(d,"border","0px solid red");a.style.background="#000";d.style.background=
"#222";a.innerHTML=cn();ff(T(c,1).j(),"display","flex");return b}
function bn(a,b){J("img",{src:"img/series-lists-item-tumb.png",style:"float:left"});var c=a.get("image"),d=a.get("SN"),e=a.get("PN"),f=a.get("SD");a=a.get("NF");c=J("div",{style:"float:left; width:128px; height:128px;"},c);var h=J("span",{style:"width:200px; word-wrap:break-word; color:white;"},"\u041d\u043e\u043c\u0435\u0440: "+d);d=J("span",{style:"width:200px; word-wrap:break-word; color:white; font-size:x-small;"},"PN:   "+e);f=J("span",{style:"width:200px; word-wrap:break-word; color:white; font-size:x-small;"},
"SD:   "+f);a=J("span",{style:"width:200px; word-wrap:break-word; color:white; font-size:x-small;"},"\u041a\u0430\u0434\u0440\u043e\u0432: "+a);c=[c,h,J("BR")];e&&(c.push(d),c.push(J("BR")));c.push(f);c.push(J("BR"));c.push(a);return J("div",{id:b,style:"background:#333; width:300px; height:130px; margin:5px;"},c)}
function cn(a){var b=a?a.get("modality"):"",c=a?a.get("patientName"):"",d=a?a.get("patientSex"):"",e=a?a.get("patientBirthdate"):"";a=a?a.get("studyDate"):"";return'<div style="display:flex; background:#3a3a3a">\n    <div style="display:flex; flex-direction:column;">\n      <button title="\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f">X</button>\n      <button title="\u042d\u043a\u0441\u043f\u043e\u0440\u0442 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \u043d\u0430 CD/USB"><img src="img/CD-ROM-icon.png" /></button>\n      <button title="\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043d\u0430 PACS"><img src="img/Save-PACS.png"/></button>\n      <button title="\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0441\u043d\u0438\u043c\u043e\u043a \u044d\u043a\u0440\u0430\u043d\u0430"><img src="img/camera.png"/></button>\n    </div>\n\n    <div >\n      <fieldset style="color:white;">\n        <legend>\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f</legend>\n          ['+b+
"] "+c+"\n          <p>\n            \u041a\u0430\u0440\u0442\u0430:<br>\n            \u041f\u043e\u043b: "+d+"<br>\n            \u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f: "+e+"<br>\n            \u0414\u0430\u0442\u0430 \u043f\u043e\u0441\u0435\u0449\u0435\u043d\u0438\u044f: "+a+'<br>\n          </p>  \n      </fieldset>\n    </div>\n    <div style="display:flex; flex-direction:column;">\n      <button title="\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439: &#013;\u041d\u043e\u043c\u0435\u0440 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f">N</button>\n      <button title="\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439: &#013;\u041f\u0440\u043e\u0442\u043e\u043a\u043e\u043b \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438">PN</button>\n      <button title="\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439: &#013;\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f">SD</button>\n      <button title="\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u043a\u0430 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439: &#013;\u0412\u0440\u0435\u043c\u044f">T</button>\n    </div>\n  </div>'}
fk.prototype.resize=function(){var a=yf(this.j());this.B.setSize(a,230)};function rl(a,b,c){this.stack=a;this.C=URL.createObjectURL(b);this.h=c;this.l=-1;this.f=new oj;a=this.f.f;this.f.f.Ia().style.background="#fff";this.A=R(a,"d8");pj(this.f,'<div style="position:relative; width:512px; height:512px;">\n<div style="position: absolute; top:0;"><img src="'+this.C+'"/></div>\n<canvas style="position: absolute; top:0;" width="512" height="512" id='+this.A+"></canvas>\n</div>");Xi(this.f.f,"AortaForm");Yi(this.f.f).style.background="#fff";a=new Ui;Ti(a,{caption:"Accept",key:"OK"},
!0);Ti(a,{caption:"Reject",key:"CANCEL"},!1,!0);Ti(a,{caption:"\u0423\u043a\u0430\u0437\u0430\u0442\u044c \u0434\u0440\u0443\u0433\u043e\u0439 \u0446\u0435\u043d\u0442\u0440 \u0430\u043e\u0440\u0442\u044b",key:"PICK"},!1,!1);gj(this.f.f,a);0==this.h.length&&(jj(a,"OK",!1),jj(a,"PICK",!1));this.i=null;dn(this,0)}
function dn(a,b){var c=a.h,d=a.h.length/4;if(0!=d){a.l=b;var e=document.getElementById(a.A);b=e.getContext("2d");b.clearRect(0,0,e.width,e.height);for(e=0;e<d;e++){var f=new THREE.Vector3(c[4*e],c[4*e+1],c[4*e+2]),h=c[4*e+3];a.i=(new THREE.Vector3).copy(f).applyMatrix4(a.stack.lps2IJK);f=new THREE.Vector3(f.x+h,f.y,f.z);f=(new THREE.Vector3).copy(f).applyMatrix4(a.stack.lps2IJK).x-a.i.x;h=Math.round(a.i.x);var k=Math.round(a.i.y);b.beginPath();b.arc(h,k,f,0,2*Math.PI,!1);e==a.l?(b.lineWidth=3,b.setLineDash([])):
(b.lineWidth=2,b.setLineDash([5,5]));b.strokeStyle="red";b.stroke()}}}function en(a){var b=document.getElementById(a.A);b.style.cursor="url('img/pan-cursor.cur'), crosshair";jj(a.f.f.h,"PICK",!1);var c=db(b);b.addEventListener("mousedown",function(b){b=(new THREE.Vector3(b.clientX-c.left,b.clientY-c.top,a.i.z)).applyMatrix4(a.stack.ijk2LPS);for(var d=a.h,f=a.h.length/4,h=0;h<f;h++){var k=new THREE.Vector3(d[4*h],d[4*h+1],d[4*h+2]),l=d[4*h+3];if(k.distanceToSquared(b)<=l*l){dn(a,h);break}}})}
function sl(a,b){a.f.listen(function(c){if("PICK"==c.key)return en(a),!1;b(c.key)});a.f.f.K(!0)};function xl(a,b,c){var d=this;console.log("new FFR.Dialog10()");this.fb=a;this.v=b;this.L=c;this.h=new oj;Xi(this.h.f,"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438 \u0430\u043e\u0440\u0442\u044b");a=this.h.f;console.log("setting dialog10 non-modal");0!=a.Qd&&$i(a);b=a.Ia();yf(b);b=R(a,"d10-cont");this.u=R(a,"d10-span");pj(this.h,'<div id="'+b+'"></div>');this.h.f.Ia().style.background="#d0d0d0";b=new Lj(document.getElementById(b),
["\u0421\u0435\u0433\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f \u0430\u043e\u0440\u0442\u044b","\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b"]);c=R(a,"d10-sl");var e='<div class="content">\n      <span id="'+this.u+'">\u041f\u043e\u0440\u043e\u0433:</span><br>\n      <p>\n      <div id="'+c+'"></div>\n      </p>\n      <p>\n      \u0412\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u043f\u043e\u0440\u043e\u0433 \u0442\u0430\u043a, \u0447\u0442\u043e\u0431\u044b \u0431\u044b\u043b\u0430 \u0432\u0438\u0434\u043d\u0430 \u0430\u043e\u0440\u0442\u0430 \u0438 \n      \u0447\u0430\u0441\u0442\u0438 \u043a\u043e\u0440\u043e\u043d\u0430\u0440\u043d\u044b\u0445 \u0430\u0440\u0442\u0435\u0440\u0438\u0439.\n    </p>\n    </div>\n  </div>';
this.B=R(a,"inp1");this.Xa=R(a,"inp2");this.D=R(a,"inp3");a='<div class="content" >\n      <fieldset>\n        <legend>Vessels</legend>\n        <div style="background:#d0d0d0;display: grid;grid-template-columns: 1fr 3fr;"> Alpha: <input type="number" id="'+this.B+('" min="0.2" max=1 step="0.05" value="'+this.v.alpha+'"> </div>\n        <div style="background:#d0d0d0;display: grid;grid-template-columns: 1fr 3fr;"> Beta:  <input type="number" id="')+this.Xa+('"  min="0.2" max=1 step="0.05" value="'+
this.v.beta+'"> </div>\n        <div style="background:#d0d0d0;display: grid;grid-template-columns: 1fr 3fr;"> Gamma: <input type="number" id="')+this.D+('" min=0 max=1000 step=1 value="'+this.v.gamma+'"> </div>\n      </fieldset>\n    </div>');Mj(b,0,e);this.f=new el(document.getElementById(c));Mj(b,1,a);Pj(b,0);this.f.listen(function(){return fn(d)});this.l=null;this.C=!1;this.i=this.A=0}function gn(a,b){a.C=b;hn(a);a.f.f.Fa(!b);a=a.h.f.h;jj(a,"ok",!b);jj(a,"cancel",!b)}
function hn(a){document.getElementById(a.u).innerHTML="\u041f\u043e\u0440\u043e\u0433: "+a.f.getValue()/100+(a.C?"(\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430..)":"")}
function fn(a){var b,c,d,e,f,h,k,l,m,p,r,q,t;return Ea(function(n){if(1==n.f){console.log("Dialog10::tauChanged() ",a.f.getValue()/100);hn(a);b=!a.L;c=performance.now();d=a.A?c-a.A:0;if(!b&&200>d)return a.i&&clearTimeout(a.i),a.A=c,console.log("\u043f\u0440\u043e\u043f\u0443\u0441\u043a\u0430\u0435\u043c tau=",a.f.getValue()/100,d),a.i=setTimeout(function(){return fn(a)},200),n.return();a.i&&clearTimeout(a.i);a.i=0;a.A=0;console.log("Dialog10::tauChanged() process tau=",a.f.getValue()/100);e=a.L.J;
f=a.L.F;if(a.C)return console.log("\u043a\u0430\u043d\u0430\u043b \u0437\u0430\u043d\u044f\u0442, \u0436\u0434\u0443 \u043e\u0441\u0432\u043e\u0431\u043e\u0436\u0434\u0435\u043d\u0438\u044f.."),n.return();b||(console.log("\u043e\u0447\u0438\u0449\u0430\u0435\u043c \u0441\u0446\u0435\u043d\u0443"),e.remove(a.l));gn(a,!0);h=performance.now();return z(n,gm(a.fb,a.f.getValue()/100),2)}k=n.h;console.log("LoadAortaPreview \u0432\u0440\u0435\u043c\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 ",
((performance.now()-h)/1E3).toFixed(3)," \u0441\u0435\u043a");l=tk(k);m=new ok(l[0],"aorta");p=m.geometry();r=new THREE.Mesh(p,new THREE.MeshLambertMaterial({color:64250,side:THREE.DoubleSide}));a.l=r;e.add(r);q=p.boundingBox.getCenter();t=(new THREE.Vector3).addVectors(q,new THREE.Vector3(150,150,150));f.position.set(t.x,t.y,t.z);f.lookAt(q.x,q.y,q.z);a.L.controls.target.set(q.x,q.y,q.z);console.log("added aortaPreviewMesh");gn(a,!1);n.f=0})}
function yl(a,b){a.h.listen(function(a){return b(a.key)});a.h.f.K(!0);cl(a.f.f,100*a.v.wb)};function Cl(a,b){var c=this;console.log("new FFR.Dialog11()");this.A=a;this.L=b;this.h=null;this.f=new oj;Xi(this.f.f,"\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438 \u0441\u043e\u0441\u0443\u0434\u043e\u0432");a=this.f.f;0!=a.Qd&&$i(a);this.i=R(a,"d11-inp");this.l=R(a,"d11-span");pj(this.f,'<div class="content">\n      <fieldset>\n        <legend>\u041f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u0441\u0435\u0433\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438 \u0441\u043e\u0441\u0443\u0434\u043e\u0432</legend>\n        \u041f\u043e\u0440\u043e\u0433:  <input type="number"  id="'+
this.i+('" min="0" max="100" step="1" value="20.0">\n        <span id="'+this.l+'"></span>\n        <p>\n        \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043f\u043e\u0440\u043e\u0433, \u0447\u0442\u043e\u0431\u044b \u043d\u0430\u0439\u0442\u0438 \u043a\u043e\u0440\u043e\u043d\u0430\u0440\u043d\u044b\u0435 \u0430\u0440\u0442\u0435\u0440\u0438\u0438. \u0427\u0435\u043c \u043d\u0438\u0436\u0435 \u043f\u043e\u0440\u043e\u0433, \u0442\u0435\u043c \u0431\u043e\u043b\u044c\u0448\u0430\u044f<br>\n        \u043e\u0431\u043b\u0430\u0441\u0442\u044c \u0431\u0443\u0434\u0435\u0442 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0430.\n        </p>\n        <fieldset>\n          <legend>\u0412\u044b\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u0443\u0447\u0430\u0441\u0442\u043a\u043e\u0432 \u0441\u043e\u0441\u0443\u0434\u0430</legend>\n          <button>\u041d\u0430\u0437\u0430\u0434</button>\n          <button>\u0412\u043f\u0435\u0440\u0435\u0434</button>\n          <button>\u0423\u043a\u0430\u0437\u0430\u0442\u044c \u0443\u0447\u0430\u0441\u0442\u043e\u043a \u0441\u043e\u0441\u0443\u0434\u0430</button>\n        </fieldset>\n      </fieldset>\n    </div>'));
document.getElementById(this.i).onchange=function(){return jn(c)}}
function jn(a){var b,c,d,e,f,h,k,l,m,p;return Ea(function(r){if(1==r.f){console.log("D11 inputChanged()");if(!a.f.f.Qb)return console.log("D11 is not visible..returning"),r.return();b=document.getElementById(a.i);c=document.getElementById(a.l);b.disabled=!0;c.innerHTML="(\u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0430..)";d=a.f.f.h;jj(d,"ok",!1);jj(d,"cancel",!1);e=a.L.J;h=f=performance.now();console.log("calling LoadVesselsPreview("+b.value+")");return z(r,sk(a.A,"LoadVesselsPreview "+b.value),
2)}k=r.h;console.log("LoadVesselsPreview returns in",((performance.now()-f)/1E3).toFixed(3),"\u0441\u0435\u043a");l=tk(k);0<l.length&&(m=new ok(l[0],"vessels"),f=performance.now(),p=m.geometry(),console.log("vesselsCube.geometry() takes ",((performance.now()-f)/1E3).toFixed(3),"\u0441\u0435\u043a"),a.h&&e.remove(a.h),a.h=new THREE.Mesh(p,new THREE.MeshLambertMaterial({color:16448E3,side:THREE.DoubleSide})),e.add(a.h));b.disabled=!1;c.innerHTML="";jj(d,"ok",!0);jj(d,"cancel",!0);console.log("\u043a \u0441\u0446\u0435\u043d\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d vesselMesh \u0437\u0430 ",
((performance.now()-h)/1E3).toFixed(3),"\u0441\u0435\u043a");r.f=0})}function Dl(a,b){a.f.listen(function(a){return b(a.key)});a.f.f.K(!0);jn(a)};function kn(a){this.v=a};function ik(a){P.call(this);this.v=a.v;this.h=a;this.l=null;this.u=new kn(this.v);this.i=null;this.v.P.forEach(function(a){return a.Wa=[]})}ka(ik,P);ik.prototype.S=function(){P.prototype.S.call(this);this.j().style.height="100%";this.j().innerHTML='<div id="myDiv1" style="width:100%; height:100%; background:#ccc;"></div>'};
ik.prototype.I=function(){P.prototype.I.call(this);d3.select("div#myDiv1");var a=document.getElementById("myDiv1");yf(a);a=yf(a).height;this.l=d3.select("div#myDiv1").append("svg").attr("width","100%").attr("height",a);this.h.vc=this};
function Lm(a,b){a.v.va.filter(function(a){return a.ka==b});var c=b.profile;a.l.selectAll("rect").remove();var d=document.getElementById("myDiv1"),e=yf(d).width,f=yf(d).height,h=d3.scaleBand().domain(d3.range(c.length)).range([0,e]).paddingInner(.05),k=d3.scaleLinear().domain([0,d3.max(c)]).range([0,f]);a.l.selectAll("rect").data(c).enter().append("rect").attr("x",function(a,b){return h(b)}).attr("fill",function(a,c){return(a=b.Wa.find(function(a){return a.range[0]<=c&&c<=a.range[1]}))?a.ea?a.ea.color:
"white":"teal"}).attr("y",function(a){return f-k(a)}).attr("width",h.bandwidth()).attr("height",function(a){return k(a)}).on("click",function(b,c){ln(a,a.i,c)});a.l.selectAll("rect").append("title").text(function(c,d){var e=a.i.ga;c=new THREE.Vector3(e[3*d],e[3*d+1],e[3*d+2]);e=new THREE.Vector3(e[3*(d+1)],e[3*(d+1)+1],e[3*(d+1)+2]);c=c.distanceTo(e);return"\u0441\u0435\u0433\u043c\u0435\u043d\u0442 "+d+":\n\u0434\u043b\u0438\u043d\u0430 "+c.toFixed(1)+" \u043c\u043c\n\u0434\u0438\u0430\u043c\u0435\u0442\u0440 "+
(2*b.profile[d]).toFixed(1)+" \u043c\u043c"})}
function Em(a,b){a.i=a.v.P[b];if(!a.i.profile){var c=a.i,d=a.u,e=[3,3,3],f=d.v.stack._spacing,h=(e[0]-1)/2,k=(e[1]-1)/2,l=(e[2]-1)/2;e=[];for(var m=[],p=-h;p<=h;p++)for(var r=-k;r<=k;r++)for(var q=-l;q<=l;q++){var t=p*f.x,n=r*f.y,B=q*f.z;t=t*t+n*n+B*B;if(0!=t){n=e.indexOf(t);if(-1==n)if(0==e.length||t>e[e.length-1])e.push(t),m.push([]),n=e.length-1;else{for(n=0;e[n]<t;)n++;e.splice(n,0,t);m.splice(n,0,[])}m[n].push([p,r,q])}}for(f=0;f<e.length;f++)e[f]=parseFloat(Math.sqrt(e[f]).toFixed(3));f=[];
for(h=0;h<e.length;h++)f.push({kc:e[h],si:m[h]});e=d.v.P[b].Vb.cube;b=d.v.P[b].ga;m=b.length/3;f=[];h=[];for(k=0;k<m-1;k++){l=new THREE.Vector3(b[3*k],b[3*k+1],b[3*k+2]);p=l=AMI.UtilsCore.worldToData(d.v.stack.lps2IJK,l);r=d.v.stack._spacing;n=[7,7,3];q=(n[0]-1)/2;t=(n[1]-1)/2;n=(n[2]-1)/2;for(var v=B=void 0,F=-q;F<=q;F++)for(var x=-t;x<=t;x++)for(var y=-n;y<=n;y++)if(0!=F||0!=x||0!=y){var u=F*r.x,K=x*r.y,S=y*r.z;u=u*u+K*K+S*S;if(void 0==v||u>v)v=u;0==e.getValue(p.x+F,p.y+x,p.z+y)&&(u=F*r.x,K=x*r.y,
S=y*r.z,u=u*u+K*K+S*S,void 0==B||u<B)&&(B=u)}f.push(void 0==B?Math.sqrt(v):Math.sqrt(B));h.push(l)}c.profile=f}Lm(a,a.i);Cm(a.h)}function mn(a,b,c){var d=nn({ka:b,range:c,radius:.6});a.h.L.J.add(d);b.Wa.push({range:c,X:d,ea:null})}
function on(a,b,c){console.assert(!c.ea,"\u0444\u0443\u043d\u043a\u0446\u0438\u044f_removeTube \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0443\u0434\u044f\u043b\u044f\u0442\u044c \u0441\u0442\u0435\u043d\u043e\u0437\u044b");c.ea||(a.h.L.J.remove(c.X),a=b.Wa.indexOf(c),-1!=a&&b.Wa.splice(a,1))}function pn(a,b,c){var d=c.ea?c.ea.color:16777215;a.h.L.J.remove(c.X);c.X=nn({ka:b,range:c.range,radius:.6,color:d});a.h.L.J.add(c.X)}
function qn(a,b,c){console.assert(!c[0].ea||!c[1].ea,"\u0434\u0432\u0430 \u0441\u0442\u0435\u043d\u043e\u0437\u0430 \u043d\u0435 \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u044f\u044e\u0442\u0441\u044f");if(!c[0].ea||!c[1].ea){var d=c[0].ea?c[0]:c[1];c=c[0].ea?c[1]:c[0];d.range[0]=Math.min(d.range[0],c.range[0]);d.range[1]=Math.max(d.range[1],c.range[1]);on(a,b,c);pn(a,b,d)}}
function ln(a,b,c){var d=b.Wa.find(function(a){return a.range[0]<=c&&c<=a.range[1]}),e=!d;d3.select(a.l.selectAll("rect").nodes()[c]);var f=b.Wa.filter(function(a){return a.range[0]-1<=c&&c<=a.range[1]+1});if(2==f.length){if(f[0].ea&&f[1].ea){alert("\u043d\u0435\u043b\u044c\u0437\u044f \u043e\u0431\u044a\u0435\u0434\u0438\u043d\u044f\u0442\u044c \u0434\u0432\u0430 \u0441\u0442\u0435\u043d\u043e\u0437\u0430");return}qn(a,b,f)}else if(1==f.length){f=f[0];if(f.range[0]<c&&c<f.range[1]){alert("\u0441\u0442\u0435\u043d\u043e\u0437 \u043c\u043e\u0436\u043d\u043e \u0442\u043e\u043b\u044c\u043a\u043e \u0440\u0430\u0441\u0448\u0438\u0440\u044f\u0442\u044c \u0438\u043b\u0438 \u0441\u0443\u0436\u0430\u0442\u044c");
return}0==f.range[1]-f.range[0]&&!f.ea&&d?on(a,b,f):(d=(f.range[0]==c||c==f.range[1])&&!e,console.assert((f.range[0]-1==c||c==f.range[1]+1)&&e||d,"\u0441\u0443\u0436\u0435\u043d\u0438\u0435/\u0440\u0430\u0441\u0448\u0438\u0440\u0435\u043d\u0438\u0435 tube "),e?c==f.range[0]-1?f.range[0]=c:c==f.range[1]+1&&(f.range[1]=c):c==f.range[0]?f.range[0]++:c==f.range[1]&&f.range[1]--,pn(a,b,f))}else mn(a,b,[c,c]);Lm(a,b);Cm(a.h)}ik.prototype.K=function(a){this.j().style.display=a?"block":"none"};
ik.prototype.resize=function(){};X.Z.ci=ik;THREE.$c=function(a,b){this.Sb=[];this.map=THREE.Se[a];this.n=b;this.Pd=a;a=1/this.n;for(b=0;1>=b;b+=a)for(var c=0;c<this.map.length-1;c++)if(b>=this.map[c][0]&&b<this.map[c+1][0]){var d=this.map[c][0],e=this.map[c+1][0],f=(new THREE.Color(16777215)).setHex(this.map[c][1]),h=(new THREE.Color(16777215)).setHex(this.map[c+1][1]);d=f.lerp(h,(b-d)/(e-d));this.Sb.push(d)}return this.set(this)};
function rn(a,b){b<=a.Ea?b=a.Ea:b>=a.kb&&(b=a.kb);b=(b-a.Ea)/(a.kb-a.Ea);b=Math.round(b*a.n);b==a.n?--b:b;return a.Sb[b]}THREE.$c.prototype={constructor:THREE.$c,Sb:[],map:[],Pd:"rainbow",n:256,Ea:0,kb:1,o:null,set:function(a){a instanceof THREE.$c&&this.copy(a);return this},copy:function(a){this.Sb=a.Sb;this.Pd=a.Pd;this.map=a.map;this.n=a.n;this.Ea=a.Ea;this.kb=a.kb;return this}};
THREE.Se={rainbow:[[0,"0x0000FF"],[.2,"0x00FFFF"],[.5,"0x00FF00"],[.8,"0xFFFF00"],[1,"0xFF0000"]],rainbow1:[[0,"0xFF0000"],[.2,"0xFFFF00"],[.5,"0x00FF00"],[.8,"0x00FFFF"],[1,"0x0000FF"]],cooltowarm:[[0,"0x3C4EC2"],[.2,"0x9BBCFF"],[.5,"0xDCDCDC"],[.8,"0xF6A385"],[1,"0xB40426"]],blackbody:[[0,"0x000000"],[.2,"0x780000"],[.5,"0xE63200"],[.8,"0xFFFF00"],[1,"0xFFFFFF"]],grayscale:[[0,"0x000000"],[.2,"0x404040"],[.5,"0x7F7F80"],[.8,"0xBFBFBF"],[1,"0xFFFFFF"]]};function sn(){var a,b,c,d,e,f,h,k,l,m,p;return Ea(function(r){if(1==r.f)return z(r,fetch("bin/FFR/FFRfull.tre"),2);if(3!=r.f)return a=r.h,b={},a.ok?z(r,a.text(),3):r.return({error:a.status});c=r.h;d=c.split(/\r?\n/);e=0;for(h=[];e<d.length;){if(""!=d[e])if(" LCA"==d[e]||" RCA"==d[e])f=" LCA"==d[e]?1:2,2==f&&(b.ba=h,h=[]);else{k=parseFloat(d[++e]);l=parseInt(d[++e]);m=[];for(p=0;p<l;p++)m.push(parseFloat(d[++e]));h.push({step:k,Gc:m})}e++}b.ca=h;return r.return(b)})}
function tn(){var a,b,c,d,e,f,h,k,l,m,p,r,q,t,n,B,v,F,x,y;return Ea(function(u){if(1==u.f)return z(u,fetch("bin/FFR/input_data.tre"),2);if(3!=u.f)return a=u.h,b={},a.ok?z(u,a.text(),3):u.return({error:a.status});c=u.h;d=c.split(/\r?\n/);e=2;for(f=1;2>=f;f++){h=parseInt(d[e]);if(isNaN(h))return u.return({error:"line "+e});k=[];e++;for(l=0;l<h;l++){if(parseInt(d[e])-1!=k.length)return u.return({error:"line "+e});m=d[e+1].split(" ");if(3!=m.length)return u.return({error:"line "+e+"+1"});k.push([parseFloat(m[0]),
parseFloat(m[1]),parseFloat(m[2])]);e+=3}1==f?b.ba={nodes:k}:b.ca={nodes:k}}for(p=1;2>=p;p++){r=parseInt(d[e]);if(isNaN(r))return u.return({error:"line "+e});q=[];e++;for(t=0;t<r;t++){if(parseInt(d[e])-1!=q.length)return u.return({error:"line "+e});n=d[e+1].split(" ");if(2!=n.length)return u.return({error:"line "+e+"+1"});B=parseFloat(d[e+2]);v=parseFloat(d[e+3]);q.push({Ug:parseInt(n[0])-1,Vg:parseInt(n[1])-1,pi:B,oi:v,Ie:null});e+=5}1==p?b.ba.ub=q:b.ca.ub=q}F=parseInt(d[e]);x=[];for(y=0;y<F;y++)x.push({hi:parseInt(d[e+
1]),ni:parseInt(d[e+2])-1,type:parseInt(d[e+3])});b.ea=x;return u.return(b)})};function Pm(a,b){console.log("PlasticBoy()");this.state=a;this.L=b;this.J=b.J;this.wc=this.Sc=null;this.kh=[];this.range=[.6,1];b.ld=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1E3);b.ld.position.set(0,0,4);b.Ce=new THREE.PointLight(16777215);b.Ce.position.set(0,100,100);b.vb=new THREE.Scene;b.vb.add(b.Ce);var c;a=new THREE.$c("rainbow1",256);a.kb=this.range[1];a.Ea=this.range[0];var d={layout:"vertical",position:{x:3,y:0,z:0}};void 0===d&&(d={});a.o={};a.o.Ib=d.hasOwnProperty("layout")?
d.layout:"vertical";a.o.position=d.hasOwnProperty("position")?d.position:{x:4,y:0,z:0};a.o.pa=d.hasOwnProperty("dimensions")?d.dimensions:{width:.5,height:3};a.o.canvas=document.createElement("canvas");a.o.canvas.setAttribute("id","legend");a.o.canvas.setAttribute("hidden",!0);document.body.appendChild(a.o.canvas);a.o.ef=a.o.canvas.getContext("2d");a.o.canvas.setAttribute("width",1);a.o.canvas.setAttribute("height",a.n);a.o.texture=new THREE.Texture(a.o.canvas);d=a.o.ef.getImageData(0,0,1,a.n);var e=
d.data;a.map=THREE.Se[a.Pd];for(var f=0,h=1/a.n,k=1;0<=k;k-=h)for(var l=a.map.length-1;0<=l;l--)if(k<a.map[l][0]&&k>=a.map[l-1][0]){var m=a.map[l-1][0],p=a.map[l][0],r=(new THREE.Color(16777215)).setHex(a.map[l-1][1]),q=(new THREE.Color(16777215)).setHex(a.map[l][1]);m=r.lerp(q,(k-m)/(p-m));e[4*f]=Math.round(255*m.r);e[4*f+1]=Math.round(255*m.g);e[4*f+2]=Math.round(255*m.b);e[4*f+3]=255;f+=1}a.o.ef.putImageData(d,0,0);a.o.texture.needsUpdate=!0;a.o.Ng=new THREE.PlaneBufferGeometry(a.o.pa.width,a.o.pa.height);
a.o.Og=new THREE.MeshBasicMaterial({map:a.o.texture,side:THREE.DoubleSide});a.o.X=new THREE.Mesh(a.o.Ng,a.o.Og);"horizontal"==a.o.Ib&&(a.o.X.rotation.z=Math.PI/180*-90);a.o.X.position.copy(a.o.position);d=a.o.X;b.vb.add(d);e={title:"     \u0424\u0420\u041a",ticks:6};if(a.o){"function"===typeof e&&(c=e);void 0===e&&(e={});a.o.labels={};a.o.labels.fontsize=e.hasOwnProperty("fontsize")?e.fontsize:24;a.o.labels.lf=e.hasOwnProperty("fontface")?e.fontface:"Arial";a.o.labels.title=e.hasOwnProperty("title")?
e.title:"";a.o.labels.sh=e.hasOwnProperty("um")?" [ "+e.um+" ]":"";a.o.labels.Wd=e.hasOwnProperty("ticks")?e.ticks:0;a.o.labels.ff=e.hasOwnProperty("decimal")?e.decimal:2;a.o.labels.Wg=e.hasOwnProperty("notation")?e.notation:"standard";e=document.createElement("canvas");f=e.getContext("2d");f.font="Normal "+1.2*a.o.labels.fontsize+"px "+a.o.labels.lf;f.fillStyle="rgba(255,100,100,0.8)";f.strokeStyle="rgba(255,0,0,1)";f.lineWidth=4;f.fillStyle="rgba( 255, 255, 255, 1.0 )";f.fillText(a.o.labels.title.toString()+
a.o.labels.sh.toString(),4,a.o.labels.fontsize+4);e=new THREE.CanvasTexture(e);e.minFilter=THREE.LinearFilter;e=new THREE.SpriteMaterial({map:e});e=new THREE.Sprite(e);e.scale.set(2,1,1);"vertical"==a.o.Ib&&e.position.set(a.o.position.x+a.o.pa.width,a.o.position.y+.45*a.o.pa.height,a.o.position.z);"horizontal"==a.o.Ib&&e.position.set(1.015*a.o.position.x,a.o.position.y+.03*a.o.pa.height,a.o.position.z);if(0<a.o.labels.Wd){var t={},n={};if("vertical"==a.o.Ib)var B=a.o.position.y+.36*a.o.pa.height,
v=a.o.position.y-.61*a.o.pa.height;if("horizontal"==a.o.Ib)var F=a.o.position.x+.75*a.o.pa.height,x=a.o.position.x-1.2*a.o.pa.width;for(f=0;f<a.o.labels.Wd;f++)h=(a.kb-a.Ea)/(a.o.labels.Wd-1)*f+a.Ea,c?h=c(h):h="scientific"==a.o.labels.Wg?h.toExponential(a.o.labels.ff):h.toFixed(a.o.labels.ff),k=document.createElement("canvas"),l=k.getContext("2d"),l.font="Normal "+a.o.labels.fontsize+"px "+a.o.labels.lf,l.fillStyle="rgba(255,100,100,0.8)",l.strokeStyle="rgba(255,0,0,1)",l.lineWidth=4,l.fillStyle=
"rgba( 255, 255, 255, 1.0 )",l.fillText(h.toString(),4,a.o.labels.fontsize+4),k=new THREE.CanvasTexture(k),k.minFilter=THREE.LinearFilter,k=new THREE.SpriteMaterial({map:k}),k=new THREE.Sprite(k),k.scale.set(2,1,1),"vertical"==a.o.Ib&&(l=v+(h-a.Ea)/(a.kb-a.Ea)*(B-v),k.position.set(a.o.position.x+2.7*a.o.pa.width,l,a.o.position.z)),"horizontal"==a.o.Ib&&(l=x+(h-a.Ea)/(a.kb-a.Ea)*(F-x),k.position.set(l,a.o.position.y-a.o.pa.width*(5<a.o.labels.Wd?0===f%2?1.7:2.1:1.7),a.o.position.z)),l=new THREE.LineBasicMaterial({color:16777215,
linewidth:2}),m=[],"vertical"==a.o.Ib&&(p=a.o.position.y-.5*a.o.pa.height+.01+(h-a.Ea)/(a.kb-a.Ea)*a.o.pa.height*.99,m.push(new THREE.Vector3(a.o.position.x+.55*a.o.pa.width,p,a.o.position.z)),m.push(new THREE.Vector3(a.o.position.x+.7*a.o.pa.width,p,a.o.position.z))),"horizontal"==a.o.Ib&&(p=a.o.position.x-.5*a.o.pa.height+.01+(h-a.Ea)/(a.kb-a.Ea)*a.o.pa.height*.99,m.push(new THREE.Vector3(p,a.o.position.y-.55*a.o.pa.width,a.o.position.z)),m.push(new THREE.Vector3(p,a.o.position.y-.7*a.o.pa.width,
a.o.position.z))),h=(new THREE.BufferGeometry).setFromPoints(m),h=new THREE.Line(h,l),n[f]=h,t[f]=k}c={title:e,ticks:t,lines:n}}else c=!1;b.vb.add(c.title);for(t=0;t<Object.keys(c.ticks).length;t++)b.vb.add(c.ticks[t]),b.vb.add(c.lines[t]);this.Sb=a;this.o=d;this.labels=c;console.log("LUT added");this.Ra=null}
function Om(a){function b(a){var b=a.target,c=db(a.target);b={x:(a.clientX-c.left)/b.clientWidth*2-1,y:2*-((a.clientY-c.top)/b.clientHeight)+1};c=u.L.F;var e=new THREE.Raycaster;e.setFromCamera(b,c);c=e.intersectObjects(n,!0);if(0<c.length){b=c[0].object;c=Math.floor(c[0].faceIndex/(2*b.geometry.parameters.radialSegments));e=null;for(var f=w([d.ba,d.ca]),h=f.next();!h.done;h=f.next()){h=w(h.value.ub);for(var k=h.next();!k.done;k=h.next())if(k=k.value,k.Ie==b){e=k;break}}b=e.Yd.ka.Vb==u.state.la.ba?
"LCA":"RCA";b=("LCA"==b?u.wc.ba:u.wc.ca)[("LCA"==b?u.Sc.ba.ub:u.Sc.ca.ub).indexOf(e)].Gc[c];u.Ra||(u.Ra=document.createElement("div"),u.Ra.style.position="absolute",u.Ra.style.background="rgba(255,0,0, 0.5)",u.Ra.style.color="white",u.Ra.innerHTML="Hello",document.body.appendChild(u.Ra));u.Ra.style.display="block";c=a.clientY-20;u.Ra.style.left=a.clientX+5+"px";u.Ra.style.top=c+"px";a=rn(u.Sb,b);u.Ra.style.background="rgb("+255*a.r+","+255*a.g+","+255*a.b+")";u.Ra.innerHTML=""+b.toFixed(2)}else u.Ra&&
(u.Ra.style.display="none")}var c,d,e,f,h,k,l,m,p,r,q,t,n,B,v,F,x,y,u;Ea(function(K){if(1==K.f)return c=a.state,z(K,tn(),2);if(3!=K.f)return d=K.h,z(K,sn(),3);e=K.h;a.Sc=d;a.wc=e;f=Infinity;h=-Infinity;k=[e.ba,e.ca];l=w(k);for(m=l.next();!m.done;m=l.next())for(p=m.value,r=w(p),q=r.next();!q.done;q=r.next())t=q.value,f=Math.min(f,Math.min.apply(Math,ca(t.Gc))),h=Math.max(h,Math.max.apply(Math,ca(t.Gc)));a.kh=[f,h];un(c,d);n=[];B=w([d.ba,d.ca]);for(v=B.next();!v.done;v=B.next())for(F=v.value,x=w(F.ub),
q=x.next();!q.done;q=x.next()){var S=y=q.value,O=S.Yd.ka.Vb==a.state.la.ba?"LCA":"RCA",W="LCA"==O?a.wc.ba:a.wc.ca,I=("LCA"==O?a.Sc.ba.ub:a.Sc.ca.ub).indexOf(S);O=W[I].Gc.length;var ba=nn({ka:S.Yd.ka,range:S.Yd.range,nh:O,color:16777215});a.J.add(ba);S.Ie=ba;S=W[I].Gc;for(W=0;W<O;W++){var Ra=rn(a.Sb,S[W]);I=ba;var Sa=W;if("TubeBufferGeometry"!=I.geometry.type)console.log("colorTubeSegment works only with THREE.TubeBufferGeometry");else if(Sa>=I.geometry.parameters.tubularSegments)console.log("colorTubeSegment: tube has only "+
I.geometry.parameters.tubularSegments+" segments");else{Ra=new THREE.Color(Ra);var Da=6*I.geometry.parameters.radialSegments,vb=I.geometry.getIndex().array,hb=Sa*Da;Sa=(Sa+1)*Da;for(Da=I.geometry.getAttribute("color").array;hb<Sa;hb++){var pa=vb[hb];Da[3*pa]=255*Ra.r;Da[3*pa+1]=255*Ra.g;Da[3*pa+2]=255*Ra.b}I.geometry.attributes.color.needsUpdate=!0}}n.push(y.Ie)}u=a;a.L.domElement.addEventListener("mousemove",b,!1);K.f=0})}
function un(a,b){for(var c={},d=w([b.ba,b.ca]),e=d.next();!e.done;c={Kb:c.Kb},e=d.next()){c.Kb=e.value;e=[];for(var f={},h=w(c.Kb.ub),k=h.next();!k.done;f={Xc:f.Xc},k=h.next()){k=k.value;var l=[],m=a.P.filter(function(c){return function(d){return d.Vb==(c.Kb==b.ca?a.la.ca:a.la.ba)}}(c));m=w(m);for(var p=m.next();!p.done;p=m.next()){p=p.value;var r=c.Kb.nodes[k.Vg],q=vn(a.stack,c.Kb.nodes[k.Ug],p);r=vn(a.stack,r,p);l.push({ka:p,range:[q.Bf,r.Bf],kc:[q.kc,r.kc]})}f.Xc=2;k=l.filter(function(a){return function(b){return b.kc[0]<
a.Xc&&b.kc[1]<a.Xc}}(f));e.push(k)}e=e.map(function(a){return a[0]});for(f=0;f<c.Kb.ub.length;f++)c.Kb.ub[f].Yd=e[f]}}function vn(a,b,c){var d=c.name;c=c.ga;a=(new THREE.Vector3(10*b[0],10*b[1],10*b[2])).add(a._origin);b=c.length/3;for(var e=Infinity,f=[],h=0;h<b;h++){var k=new THREE.Vector3(c[3*h],c[3*h+1],c[3*h+2]);k=a.distanceTo(k);k<e&&(f=[],f.push({name:d,Bf:h,kc:k}),e=k)}return f[0]}function Gm(a,b){return new THREE.Vector3(a[3*b],a[3*b+1],a[3*b+2])}
function nn(a){if(a.ka){var b=a.ka,c=b.ga.length/3,d=a.range||[0,c-1],e=a.radius||1,f=a.color||16777215,h=a.opacity||.7,k=d[0];c=d[1]+1<c?d[1]+1:c-1;a=a.nh||c-k;k=[];for(d=d[0];d<=c;d++)k.push(Gm(b.ga,d));b=new THREE.CatmullRomCurve3(k);e=new THREE.TubeBufferGeometry(b,a,e,8,!1);b=e.getAttribute("position").count;d=new Uint8Array(3*b);f=new THREE.Color(f);for(c=0;c<b;c++)d[3*c]=255*f.r,d[3*c+1]=255*f.g,d[3*c+2]=255*f.b;e.addAttribute("color",new THREE.BufferAttribute(d,3,!0));h=new THREE.MeshLambertMaterial({side:THREE.DoubleSide,
transparent:!0,opacity:h,vertexColors:THREE.VertexColors});return new THREE.Mesh(e,h)}console.log("Tubes.makeTubeMesh() props.vessel is required")}
function Mm(a,b){if("TubeBufferGeometry"!=a.geometry.type)console.log("colorTubeSegment works only with THREE.TubeBufferGeometry");else{b=new THREE.Color(b);for(var c=a.geometry.getAttribute("position").count,d=a.geometry.getAttribute("color").array,e=0;e<c;e++)d[3*e]=255*b.r,d[3*e+1]=255*b.g,d[3*e+2]=255*b.b;a.geometry.attributes.color.needsUpdate=!0}};function vk(a){a=a.target.Mb();"\u041f\u043e\u0447\u0443\u043a\u0430\u0435\u0432\u0430-113"===a?wn():"debug test"===a&&xn()}
function wn(){var a,b,c,d,e,f,h,k,l,m,p,r,q,t,n,B,v,F,x,y,u,K,S,O,W,I,ba,Ra,Sa,Da,vb,hb,pa,Bd,ge;Ea(function(Y){switch(Y.f){case 1:return console.log("\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439 \u0442\u0435\u0441\u0442 \u041f\u043e\u0447\u0443\u043a\u0430\u0435\u0432\u0430-113"),a=X.aa.ma,b=["http://localhost/~germank/IM1"],c=new AMI.VolumeLoader,console.log("\u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c DICOM "+b[0]),z(Y,c.load(b),2);case 2:return d=
c.data[0].mergeSeries(c.data)[0],console.log("\u043f\u0440\u043e\u0440\u0435\u0436\u0438\u0432\u0430\u0435\u043c \u0441\u0435\u0440\u0438\u044e \u0434\u043e 200 \u0441\u0440\u0435\u0437\u043e\u0432"),e=kk(d,200),console.log("\u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c \u0441\u0435\u0440\u0438\u044e \u0432 \u0441\u043f\u0438\u0441\u043e\u043a \u0438 \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u0432 QuadView"),lk(X.aa.uc,e),mk(e),console.log("\u043f\u0435\u0440\u0435\u0434\u0430\u0435\u043c \u043a\u0443\u0431"),
f=e.stack[0],z(Y,pl(a,f,function(){return console.log(".")}),3);case 3:return console.log("AortaSearch"),z(Y,a.Yc(),4);case 4:return z(Y,a.Zc(),5);case 5:return console.log("PrepareAortaProc"),z(Y,ul(a,function(a){return console.log(a)}),6);case 6:return console.log("GetOptimalTau"),h={wb:.09,alpha:.5,beta:.5,gamma:500,X:null},z(Y,vl(a,"GetOptimalTau"),7);case 7:return k=Y.h,console.log(k),0<k&&(h.wb=k),h.wb=.09,z(Y,gm(a,h.wb),8);case 8:return l=performance.now(),console.log("calling PrepareVesselsProc"),
z(Y,Al(a,h,function(a){return console.log(a)}),9);case 9:return console.log("PrepareVesselsProc returns in",((performance.now()-l)/1E3).toFixed(3),"\u0441\u0435\u043a"),l=performance.now(),z(Y,Bl(a),10);case 10:return m=Y.h,console.log("LoadAortaObject returns in",((performance.now()-l)/1E3).toFixed(3),"\u0441\u0435\u043a"),p=tk(m),r=new ok(p[0],"aorta"),uk(r,!0),l=performance.now(),z(Y,Fl(a,h,20,function(){return console.log(".")}),11);case 11:return console.log("Thinning returns in",((performance.now()-
l)/1E3).toFixed(3),"\u0441\u0435\u043a"),l=performance.now(),z(Y,Bl(a),12);case 12:return m=Y.h,console.log("LoadAortaObject returns in",((performance.now()-l)/1E3).toFixed(3),"\u0441\u0435\u043a"),p=tk(m),r=new ok(p[0],"aorta"),uk(r,!0),z(Y,vl(a,"GetVesselsObjectsCount"),13);case 13:q=Y.h,t=[],n=0;case 14:return n<q?z(Y,sk(a,"LoadVesselsObject "+n),17):(console.log("\u0417\u0430\u043f\u0440\u0430\u0448\u0438\u0432\u0430\u0435\u043c vessel info"),F=new ol(a,e),z(Y,Gl(F),18));case 17:B=Y.h;v=tk(B);
t.push(new ok(v[0],"vessel"+n));n++;Y.f=14;break;case 18:x=Y.h;console.log("v=",x);console.log("calling processMarkStenosis");y={stack:f,Dc:r,Zd:t,P:x};gk(X.aa,y);u=[55,61];K=wm(X.aa.Tb,"Right vessel: 3");S=X.aa.Tb.v.P[K];console.log('\u0441\u043e\u0441\u0443\u0434 \u0434\u043b\u044f \u043c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u043a\u0438 "Right vessel: 3"['+u[0]+","+u[1]+"]");mn(X.aa.vc,S,u);Lm(X.aa.vc,S);Hm(X.aa.Tb);X.aa.Tb.v.va[0].mb=50;O=[];W=w(X.aa.Tb.v.va);for(I=W.next();!I.done;I=W.next())ba=
I.value,Ra=Gm(ba.ka.ga,ba.eb.range[0]),Sa=Gm(ba.ka.ga,ba.eb.range[1]),O.push({Wb:Ra,fc:Sa,mb:ba.mb});l=performance.now();console.log("prepareStenosisResult() \u0441\u043f\u0438\u0441\u043e\u043a \u0441\u0442\u0435\u043d\u043e\u0437\u043e\u0432",O);return z(Y,hm(a,O,[120,80,60,60],function(){return console.log(".")}),19);case 19:Da=Y.h,vb=(performance.now()-l)/1E3,hb=Math.floor(vb/60),pa=Math.floor(vb%60),Bd=""+hb+" \u043c\u0438\u043d "+pa+" \u0441\u0435\u043a","string"===typeof Da?ge="\u0440\u0430\u0441\u0447\u0435\u0442 \u0437\u0430\u0432\u0435\u0440\u0448\u0438\u043b\u0441\u044f \u0430\u0432\u0430\u0440\u0438\u0439\u043d\u043e:   "+
Da:(ge="FFR value "+Da,ge+="\n\u0412\u0440\u0435\u043c\u044f \u0432\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u044f: "+Bd,alert(ge),Om(new Pm(X.aa.Tb.v,X.aa.Tb.L))),Y.f=0}})}
function xn(){var a,b,c,d,e;Ea(function(f){if(1==f.f)return a=X.aa.ma,b=["http://localhost/~germank/IM1"],console.time("testDebug"),c=new AMI.VolumeLoader,console.log("\u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c DICOM "+b[0]),z(f,c.load(b),2);d=c.data[0].mergeSeries(c.data)[0];console.log("\u043f\u0440\u043e\u0440\u0435\u0436\u0438\u0432\u0430\u0435\u043c \u0441\u0435\u0440\u0438\u044e \u0434\u043e 200 \u0441\u0440\u0435\u0437\u043e\u0432");e=kk(d,200);console.log("\u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u043c \u0441\u0435\u0440\u0438\u044e \u0432 \u0441\u043f\u0438\u0441\u043e\u043a \u0438 \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u0432 QuadView");
lk(X.aa.uc,e);mk(e);console.timeEnd("testDebug");(new ol(a,e)).start();f.f=0})};
//# sourceMappingURL=ffr-min.js.map
